<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Database exercises | X. A. Huang&#39;s Blog</title>
<meta name="keywords" content="no-tags">
<meta name="description" content="2016 Feb SELECT DISTINCT C.RV, C.Tonalità, C.Nome, C.Data FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE Tempo=&#34;Largo&#34; SELECT M.RV, M.Numero, M.Tempo, M.Durata FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE C.Data&gt;1720 GROUP BY M.RV, M.Numero, M.Tempo, M.durata HAVING COUNT(M.Numero) &gt; 3 Sbagliato il secondo perché il group by non grouppa bene, bisogna fare query innestata
$$ \pi_{RV, Numero,Tempo, Durata}(\sigma_{Durata &gt; 120}(Mov) \bowtie \sigma_{strumento=&ldquo;violino&rdquo;}Strumentazione) $$">
<meta name="author" content="Xuanqiang &#39;Angelo&#39; Huang">
<link rel="canonical" href="http://localhost:1313/content/notes/database-exercises/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/content/notes/database-exercises/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-WW6NN2QGKF', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Database exercises" />
<meta property="og:description" content="2016 Feb SELECT DISTINCT C.RV, C.Tonalità, C.Nome, C.Data FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE Tempo=&#34;Largo&#34; SELECT M.RV, M.Numero, M.Tempo, M.Durata FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE C.Data&gt;1720 GROUP BY M.RV, M.Numero, M.Tempo, M.durata HAVING COUNT(M.Numero) &gt; 3 Sbagliato il secondo perché il group by non grouppa bene, bisogna fare query innestata
$$ \pi_{RV, Numero,Tempo, Durata}(\sigma_{Durata &gt; 120}(Mov) \bowtie \sigma_{strumento=&ldquo;violino&rdquo;}Strumentazione) $$" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/content/notes/database-exercises/" />
<meta property="og:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta property="article:section" content="notes" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="http://localhost:1313/images/papermod-cover.png" />
<meta name="twitter:title" content="Database exercises"/>
<meta name="twitter:description" content="2016 Feb SELECT DISTINCT C.RV, C.Tonalità, C.Nome, C.Data FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE Tempo=&#34;Largo&#34; SELECT M.RV, M.Numero, M.Tempo, M.Durata FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE C.Data&gt;1720 GROUP BY M.RV, M.Numero, M.Tempo, M.durata HAVING COUNT(M.Numero) &gt; 3 Sbagliato il secondo perché il group by non grouppa bene, bisogna fare query innestata
$$ \pi_{RV, Numero,Tempo, Durata}(\sigma_{Durata &gt; 120}(Mov) \bowtie \sigma_{strumento=&ldquo;violino&rdquo;}Strumentazione) $$"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "http://localhost:1313/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Database exercises",
      "item": "http://localhost:1313/content/notes/database-exercises/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Database exercises",
  "name": "Database exercises",
  "description": "2016 Feb SELECT DISTINCT C.RV, C.Tonalità, C.Nome, C.Data FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE Tempo=\u0026#34;Largo\u0026#34; SELECT M.RV, M.Numero, M.Tempo, M.Durata FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE C.Data\u0026gt;1720 GROUP BY M.RV, M.Numero, M.Tempo, M.durata HAVING COUNT(M.Numero) \u0026gt; 3 Sbagliato il secondo perché il group by non grouppa bene, bisogna fare query innestata\n$$ \\pi_{RV, Numero,Tempo, Durata}(\\sigma_{Durata \u0026gt; 120}(Mov) \\bowtie \\sigma_{strumento=\u0026ldquo;violino\u0026rdquo;}Strumentazione) $$",
  "keywords": [
    "no-tags"
  ],
  "articleBody": "2016 Feb SELECT DISTINCT C.RV, C.Tonalità, C.Nome, C.Data FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE Tempo=\"Largo\" SELECT M.RV, M.Numero, M.Tempo, M.Durata FROM Concerto AS C JOIN Movimenti AS M ON C.RV=M.RV WHERE C.Data\u003e1720 GROUP BY M.RV, M.Numero, M.Tempo, M.durata HAVING COUNT(M.Numero) \u003e 3 Sbagliato il secondo perché il group by non grouppa bene, bisogna fare query innestata\n$$ \\pi_{RV, Numero,Tempo, Durata}(\\sigma_{Durata \u003e 120}(Mov) \\bowtie \\sigma_{strumento=“violino”}Strumentazione) $$\n$$ \\pi_{RV, Numero, Tempo, Durata)}(\\sigma_{Strumento=Cembalo}(Strumentazione) \\bowtie Concerti \\bowtie \\sigma_{Numero=3}(mov)) - $$ $$ \\pi_{RV, Numero, Tempo, Durata)}(\\sigma_{Strumento=Cembalo}(Strumentazione) \\bowtie Concerti \\bowtie \\sigma_{Numero\u003e3}(mov)) $$\nRandom exercises Relational algebra https://docs.google.com/presentation/d/1OuxnSOqHkj6Uq6xCSGzfK0mAlCn3xGZUVThRiFzQkrQ/edit#slide=id.g4f418699b7_0_16\nExercise 4 $$ \\pi_{\\text{Name}} (\\sigma_{\\text{Price} \u003e \\text{age} \\cdot 10}(\\text{PERSON} \\bowtie \\rho_{Id \u003c- Person}(\\text{ENROLLMENT}) \\bowtie \\rho_{Course \u003c- name}(\\text{COURSE}))) $$\nShould be correct, the prof. solution renamed another thing\nExercise 5 $$ \\pi_{\\text{Name}, \\text{Surname}} ( \\sigma_{\\text{Mark} = 30} (\n\\rho_{\\text{Student} \u003c- Id}(STUDENT) \\bowtie EXAM\n) ) $$ Prof solution uses a property of join selection.\nExercise 6 $$ \\pi_{\\text{Name}, \\text{Surname}}( \\pi_{\\text{Id}, \\text{Name}, \\text{Surname}} ( (STUDENT) )\n\\pi_{\\text{Id}, \\text{Name}, \\text{Surname}} ( \\sigma_{\\text{Mark} = 30} (\n\\rho_{\\text{Student} \u003c- Id}(STUDENT) \\bowtie EXAM ) ) ) $$\nDevo tenere l’ID perché ci potrebbero essere omonimi.\nExercise 7 $$ \\pi_{\\text{SupName}} ( \\rho_{\\text{SupName} \u003c- \\text{Name}}(SUPPLIER) \\bowtie_{\\text{Id} = \\text{SupId}} \\sigma_{Quantity \u003e 0}(SUPPLYING)\n\\bowtie_{\\text{ProdId} = \\text{Id}} \\sigma_{\\text{Name} \\neq \\text{PX274}}(PRODUCT)\n) $$\nSQL exercises Exercise 1 SELECT DISTINT LECTURER.Surname FROM LECTURER, STUDENT WHERE LECTURER.surname == STUDENT.surname Other solution\nSELECT DISTINCT Surname FROM LECTURER INTERSECT SELECT DISTINCT Surname FROM STUDENT Exercise 2 (da rifare) Questo è sbagliato\nSELECT L.Surname FROM LECTURER AS L JOIN EDITION AS E ON L.Id == E.Lecturer JOIN (SELECT Course, COUNT(Student) as passed FROM EDITION GROUP BY Course) ON E.Course == Course WHERE passed \u003e= 10 LECTURER(Id, Surname, Dept) STUDENT(Id, Surname) COURSE(Code, Name) EDITION(Course, Year, Lecturer) EXAM(Student, Course, Year)\nSELECT DISTINCT L.Surname FROM LECTURER AS L, EDITION AS C, EXAM AS E WHERE L.Id = C.Lecturer AND C.Course = E.Course AND C.Year = E.Year GROUP BY L.Id, L.Surname, C.Course, C.Year HAVING COUNT(*) \u003e 10\nExercise3 Select MIN(Mile) as Minimum, MAX(Mile) as Maximum FROM train WHERE Departure = \"Boston\" AND Arrival = \"Chicago\" Exercise 4 SELECT R.Name FROM Region as R, Residence AS C WHERE R.Name == C.Region GROUP BY Region.Name HAVING COUNT(Region.Name) \u003c Region.Population # Questo sicuramente sbagliato! Infatti lo è! GPT introduce una bella soluzione:\nSELECT R._Name FROM Region R WHERE R.Population \u003e ( SELECT COUNT(*) FROM Residence RS WHERE RS.Region = R._Name ); Exercise 5 Select F.title FROM Film AS F WHERE 7 \u003c= ( select AVG(Rating) FROM RATING WHERE FilmID = F.FilmId ) AND F.Year \u003e= 1990 AND F.Year \u003c= 2000 Exercise 6 Select MIN(User.AGE) FROM RATING NATURAL JOIN FILM NATURAL JOIN USER Where RATING.Rating \u003e 8 and FILM.Title = \"Blade runner\" 7 Dobbiamo in qualche modo usare tutte e quattro le relazioni, perché vogliamo comporre le informazioni\nSELECT P.Name, P.Song FROM PLAYLIST as P WHERE EXISTS ( SELECT FROM SONG as S, ALBUM as B, ARTIST as A, WHERE P.Song = S.ID and S.Albumb = B.ID and B.Artist = A.ID and B.Year \u003c 2001 and A.Labels = \"UMG\" ) Exercise 12 SELECT R.Name, SUM(S.Profits) FROM ROOM R JOIN SCREENING S ON R.Code = S.Room WHERE R.City = \"Rome\" AND S.Date \u003e= \"01/01/05\" AND S.Date \u003c= \"31/01/05\" GROUP BY R.Code, R.Name HAVING SUM(S.Profits) \u003e 20000 Exercise 13 FROM FILM F JOIN SCREEENING S ON JOIN ROOM R 27 Ho bisogno di un aggregato, perché devo sapere il numero di novels in cui appare\nAvrò bisogno di Characters e Novel, perché questi sono le cose prese.\nUn groupby CodeNov, Title e Name, potrebbe essere sensato. Come faccio ad esprimere il concetto che sono apparsi in più di un novel?\nPosso intanto creare una view in cui ho il nome del carattere e numero di\nSELECT name, sum(CodeNov) FROM CHARACTERS GROUP BY name HAVING sum(CodeNov) \u003e 1; Questa query la chiamo A1 e mi sarà utile come subquery !? Si, basta aggiungere un having e poi l’abbiamo! Alla fine non avevo bisogno della relazione Novel.\n28 Ho bisogno di sapere se è italiano l’autore, e Novel, quindi dovrei fare join per selezionare solamente le Novel italiane. Poi dovrei fare join ancora per capire se ho o meno il film. E devo contare anche i films…\nSeleziono Novelle italiane\nSELECT N.CodeNov FROM NOVEL AS N, AUTHORS AS A WHERE N.Author == A.Name AND Country = \"it\" Questa la chiamo A1\nPosso usare questo e una dicitura Groupby per finalizzare.\nSELECT N1.title, F.Code FROM NOVEL as N1, FILM as F WHERE N1.CodeNov = F.Novel AND N1.CodeNov in A1 GROUP BY N1.title, F.Code HAVING sum(F.Code) \u003e 1 Non so se posso rimuovere F.code fra le select.\n29 SELECT Title FROM NOVEL WHERE CodeNov not in ( SELECT N.CodeNov FROM NOVEL as N, FILM as F WHERE N.CodeNov = F.Novel ) Questa mi sembra facile, conoscendo però query innestate\n30 SELECT Title FROM NOVEL WHERE CodeNov not in ( SELECT N.CodeNov FROM NOVEL as N, CHARACTERS as C WHERE N.CodeNov = C.CodeNov AND C.Gender = \"Male\" ) Mi sembra ok anche se la soluzione è diversa rispetto a quello del prof. Una cosa che non ho capito della soluzione del prof è perché ha bisogno di selezionare anche codeNov…\nDesign concettuale Esercizio 1 Proviamo ad identificare\nClinica ID Chiave address numero di telefono Tool ID chiave descrizione Specialista ID Nome Cognome Numero telefono SLista (1, N) Collaboratori ID nome cognome Visita Codice Date Time Clinica -\u003e Visit (1, N), Clinica \u003c- Visit (1, 1) assign Visit -\u003e Spec (1, N), Visit \u003c- Spec (0, N) DO Spec -\u003e Tool (0, N), Spec \u003c- Tool (1, N) Use Coll -\u003e Tool (1, N), Coll \u003c- Tool (0, N) Responsabile Spec -\u003e Coll (0, N), Spec \u003c- Coll (1, N), work Esercizio 2 Corsi Nome prezzo max attendee Membri Generalizzazione ereditarietà, esclusiva (se si può stare da una parte o dall’altra allo stesso tempo), totale (perché o è uno o nell’altro) e si indica con la freccetta riempita. ID Nome Surname Phone number Trainer Cliente età Card Numero progressivo + esterno (cliente) prezzo totale Cliente - Card -\u003e (0, N), \u003c- (1, 1) own\nTrainer - Corso, -\u003e (0, N), \u003c- (1, 2), responsabile, Venduto è giusto anche (1, N) in questo caso, perché non è detto.\nCliente - Corso, -\u003e (0, N), \u003c- (0, N), Enroll, vincolo relazionale esterno.\nCard - Corso, -\u003e (1, N), \u003c- (0, N), Made-f\nMax A \u003e= client e anche by card.\nCosto carta \u003c costo corsi a cui da accesso\nEsercizio 3 Company (financial market?) Code Name Share capital Registered office City state Rating Agency Code Name financial instrument Nome + (company) Performance Figli (esclusivo, totale in questo caso) Derivati Shares Bonds Maturity date Fins - ocmp, -\u003e (1, 1) , \u003c- (1, N), issue Value Comp - Agency, -\u003e (1, N), \u003c- (1, N), rating Value Comp - Comp, -\u003e (1, N), \u003c- (1, N) Hold Percentuale BR:\n",
  "wordCount" : "1139",
  "inLanguage": "en",
  "image": "http://localhost:1313/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang 'Angelo' Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/content/notes/database-exercises/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. A. Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="X. A. Huang&#39;s Blog (Alt + H)">X. A. Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Database exercises
    </h1>
    <div class="post-meta">6 min&nbsp;·&nbsp;Xuanqiang &#39;Angelo&#39; Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#2016-feb" aria-label="2016 Feb">2016 Feb</a></li>
                <li>
                    <a href="#random-exercises" aria-label="Random exercises">Random exercises</a><ul>
                        
                <li>
                    <a href="#relational-algebra" aria-label="Relational algebra">Relational algebra</a><ul>
                        
                <li>
                    <a href="#exercise-4" aria-label="Exercise 4">Exercise 4</a></li>
                <li>
                    <a href="#exercise-5" aria-label="Exercise 5">Exercise 5</a></li>
                <li>
                    <a href="#exercise-6" aria-label="Exercise 6">Exercise 6</a></li>
                <li>
                    <a href="#exercise-7" aria-label="Exercise 7">Exercise 7</a></li></ul>
                </li>
                <li>
                    <a href="#sql-exercises" aria-label="SQL exercises">SQL exercises</a><ul>
                        
                <li>
                    <a href="#exercise-1" aria-label="Exercise 1">Exercise 1</a></li>
                <li>
                    <a href="#exercise-2-da-rifare" aria-label="Exercise 2 (da rifare)">Exercise 2 (da rifare)</a></li>
                <li>
                    <a href="#exercise3" aria-label="Exercise3">Exercise3</a></li>
                <li>
                    <a href="#exercise-4-1" aria-label="Exercise 4">Exercise 4</a></li>
                <li>
                    <a href="#exercise-5-1" aria-label="Exercise 5">Exercise 5</a></li>
                <li>
                    <a href="#exercise-6-1" aria-label="Exercise 6">Exercise 6</a></li>
                <li>
                    <a href="#7" aria-label="7">7</a></li>
                <li>
                    <a href="#exercise-12" aria-label="Exercise 12">Exercise 12</a></li>
                <li>
                    <a href="#exercise-13" aria-label="Exercise 13">Exercise 13</a></li>
                <li>
                    <a href="#27" aria-label="27">27</a></li>
                <li>
                    <a href="#28" aria-label="28">28</a></li>
                <li>
                    <a href="#29" aria-label="29">29</a></li>
                <li>
                    <a href="#30" aria-label="30">30</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#design-concettuale" aria-label="Design concettuale">Design concettuale</a><ul>
                        
                <li>
                    <a href="#esercizio-1" aria-label="Esercizio 1">Esercizio 1</a></li>
                <li>
                    <a href="#esercizio-2" aria-label="Esercizio 2">Esercizio 2</a></li>
                <li>
                    <a href="#esercizio-3" aria-label="Esercizio 3">Esercizio 3</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="2016-feb">2016 Feb<a hidden class="anchor" aria-hidden="true" href="#2016-feb">#</a></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">RV</span><span class="p">,</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">Tonalità</span><span class="p">,</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">Nome</span><span class="p">,</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="k">Data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">Concerto</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">C</span><span class="w"> </span><span class="k">JOIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Movimenti</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">RV</span><span class="o">=</span><span class="n">M</span><span class="p">.</span><span class="n">RV</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">Tempo</span><span class="o">=</span><span class="s2">&#34;Largo&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">RV</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">Numero</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">Tempo</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">Durata</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">Concerto</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">C</span><span class="w"> </span><span class="k">JOIN</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Movimenti</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">M</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">RV</span><span class="o">=</span><span class="n">M</span><span class="p">.</span><span class="n">RV</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="k">Data</span><span class="o">&gt;</span><span class="mi">1720</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">RV</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">Numero</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">Tempo</span><span class="p">,</span><span class="w"> </span><span class="n">M</span><span class="p">.</span><span class="n">durata</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">HAVING</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="n">M</span><span class="p">.</span><span class="n">Numero</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w">
</span></span></span></code></pre></div><p>Sbagliato il secondo perché il group by non grouppa bene, bisogna fare query innestata</p>
<p>$$
\pi_{RV, Numero,Tempo, Durata}(\sigma_{Durata &gt; 120}(Mov) \bowtie \sigma_{strumento=&ldquo;violino&rdquo;}Strumentazione)
$$</p>
<p>$$
\pi_{RV, Numero, Tempo, Durata)}(\sigma_{Strumento=Cembalo}(Strumentazione) \bowtie Concerti \bowtie \sigma_{Numero=3}(mov)) -
$$
$$
\pi_{RV, Numero, Tempo, Durata)}(\sigma_{Strumento=Cembalo}(Strumentazione) \bowtie Concerti \bowtie \sigma_{Numero&gt;3}(mov))
$$</p>
<h2 id="random-exercises">Random exercises<a hidden class="anchor" aria-hidden="true" href="#random-exercises">#</a></h2>
<h3 id="relational-algebra">Relational algebra<a hidden class="anchor" aria-hidden="true" href="#relational-algebra">#</a></h3>
<p><a href="https://docs.google.com/presentation/d/1OuxnSOqHkj6Uq6xCSGzfK0mAlCn3xGZUVThRiFzQkrQ/edit#slide=id.g4f418699b7_0_16">https://docs.google.com/presentation/d/1OuxnSOqHkj6Uq6xCSGzfK0mAlCn3xGZUVThRiFzQkrQ/edit#slide=id.g4f418699b7_0_16</a></p>
<h4 id="exercise-4">Exercise 4<a hidden class="anchor" aria-hidden="true" href="#exercise-4">#</a></h4>
<p>$$
\pi_{\text{Name}} (\sigma_{\text{Price} &gt; \text{age} \cdot 10}(\text{PERSON} \bowtie \rho_{Id &lt;- Person}(\text{ENROLLMENT}) \bowtie \rho_{Course &lt;- name}(\text{COURSE})))
$$</p>
<p>Should be correct, the prof. solution renamed another thing</p>
<h4 id="exercise-5">Exercise 5<a hidden class="anchor" aria-hidden="true" href="#exercise-5">#</a></h4>
<p>$$
\pi_{\text{Name}, \text{Surname}} (
\sigma_{\text{Mark} = 30} (</p>
<p>\rho_{\text{Student} &lt;- Id}(STUDENT)
\bowtie
EXAM</p>
<p>)
)
$$
Prof solution uses a property of join selection.</p>
<h4 id="exercise-6">Exercise 6<a hidden class="anchor" aria-hidden="true" href="#exercise-6">#</a></h4>
<p>$$
\pi_{\text{Name}, \text{Surname}}(
\pi_{\text{Id}, \text{Name}, \text{Surname}} (
(STUDENT)
)</p>
<ul>
<li></li>
</ul>
<p>\pi_{\text{Id}, \text{Name}, \text{Surname}} (
\sigma_{\text{Mark} = 30} (</p>
<p>\rho_{\text{Student} &lt;- Id}(STUDENT)
\bowtie
EXAM
)
)
)
$$</p>
<p>Devo tenere l&rsquo;ID perché ci potrebbero essere omonimi.</p>
<h4 id="exercise-7">Exercise 7<a hidden class="anchor" aria-hidden="true" href="#exercise-7">#</a></h4>
<p>$$
\pi_{\text{SupName}} (
\rho_{\text{SupName} &lt;- \text{Name}}(SUPPLIER)
\bowtie_{\text{Id} = \text{SupId}}
\sigma_{Quantity &gt; 0}(SUPPLYING)</p>
<p>\bowtie_{\text{ProdId} = \text{Id}}
\sigma_{\text{Name} \neq \text{PX274}}(PRODUCT)</p>
<p>)
$$</p>
<h3 id="sql-exercises">SQL exercises<a hidden class="anchor" aria-hidden="true" href="#sql-exercises">#</a></h3>
<h4 id="exercise-1">Exercise 1<a hidden class="anchor" aria-hidden="true" href="#exercise-1">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">DISTINT</span><span class="w"> </span><span class="n">LECTURER</span><span class="p">.</span><span class="n">Surname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">LECTURER</span><span class="p">,</span><span class="w"> </span><span class="n">STUDENT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">LECTURER</span><span class="p">.</span><span class="n">surname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">STUDENT</span><span class="p">.</span><span class="n">surname</span><span class="w">
</span></span></span></code></pre></div><p>Other solution</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">Surname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">LECTURER</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">INTERSECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">Surname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">STUDENT</span><span class="w">
</span></span></span></code></pre></div><h4 id="exercise-2-da-rifare">Exercise 2 (da rifare)<a hidden class="anchor" aria-hidden="true" href="#exercise-2-da-rifare">#</a></h4>
<p>Questo è sbagliato</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">L</span><span class="p">.</span><span class="n">Surname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">LECTURER</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">L</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w"> </span><span class="n">EDITION</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">L</span><span class="p">.</span><span class="n">Id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">E</span><span class="p">.</span><span class="n">Lecturer</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w"> </span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">Course</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="n">Student</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">passed</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">EDITION</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">Course</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">E</span><span class="p">.</span><span class="n">Course</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">Course</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">passed</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span></span></span></code></pre></div><p>LECTURER(Id, Surname, Dept)
STUDENT(Id, Surname)
COURSE(Code, Name)
EDITION(Course, Year, Lecturer)
EXAM(Student, Course, Year)</p>
<p>SELECT DISTINCT L.Surname FROM LECTURER AS L, EDITION AS C, EXAM AS E WHERE L.Id = C.Lecturer AND C.Course = E.Course AND C.Year = E.Year GROUP BY L.Id, L.Surname, C.Course, C.Year HAVING COUNT(*) &gt; 10</p>
<h4 id="exercise3">Exercise3<a hidden class="anchor" aria-hidden="true" href="#exercise3">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">Select</span><span class="w"> </span><span class="k">MIN</span><span class="p">(</span><span class="n">Mile</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Minimum</span><span class="p">,</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">Mile</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Maximum</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">train</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">Departure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;Boston&#34;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">Arrival</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;Chicago&#34;</span><span class="w">
</span></span></span></code></pre></div><h4 id="exercise-4-1">Exercise 4<a hidden class="anchor" aria-hidden="true" href="#exercise-4-1">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SELECT</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">Region</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">R</span><span class="p">,</span><span class="w"> </span><span class="n">Residence</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">C</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">Region</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">Region</span><span class="p">.</span><span class="n">Name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">HAVING</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="n">Region</span><span class="p">.</span><span class="n">Name</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Region</span><span class="p">.</span><span class="n">Population</span><span class="w"> </span><span class="o">#</span><span class="w"> </span><span class="n">Questo</span><span class="w"> </span><span class="n">sicuramente</span><span class="w"> </span><span class="n">sbagliato</span><span class="o">!</span><span class="w"> </span><span class="n">Infatti</span><span class="w"> </span><span class="n">lo</span><span class="w"> </span><span class="err">è</span><span class="o">!</span><span class="w">
</span></span></span></code></pre></div><p>GPT introduce una bella soluzione:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">_Name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">Region</span><span class="w"> </span><span class="n">R</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Population</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">FROM</span><span class="w"> </span><span class="n">Residence</span><span class="w"> </span><span class="n">RS</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">WHERE</span><span class="w"> </span><span class="n">RS</span><span class="p">.</span><span class="n">Region</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">_Name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h4 id="exercise-5-1">Exercise 5<a hidden class="anchor" aria-hidden="true" href="#exercise-5-1">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">Select</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">Film</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">F</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">select</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">Rating</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">FROM</span><span class="w"> </span><span class="n">RATING</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">FilmID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">FilmId</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="k">Year</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1990</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="k">Year</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2000</span><span class="w">
</span></span></span></code></pre></div><h4 id="exercise-6-1">Exercise 6<a hidden class="anchor" aria-hidden="true" href="#exercise-6-1">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">Select</span><span class="w"> </span><span class="k">MIN</span><span class="p">(</span><span class="k">User</span><span class="p">.</span><span class="n">AGE</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">RATING</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">FILM</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="k">USER</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">Where</span><span class="w"> </span><span class="n">RATING</span><span class="p">.</span><span class="n">Rating</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">FILM</span><span class="p">.</span><span class="n">Title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;Blade runner&#34;</span><span class="w">
</span></span></span></code></pre></div><h4 id="7">7<a hidden class="anchor" aria-hidden="true" href="#7">#</a></h4>
<p>Dobbiamo in qualche modo usare tutte e quattro le relazioni, perché vogliamo comporre le informazioni</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">P</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">P</span><span class="p">.</span><span class="n">Song</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">PLAYLIST</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">P</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="k">EXISTS</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">SELECT</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">FROM</span><span class="w"> </span><span class="n">SONG</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">S</span><span class="p">,</span><span class="w"> </span><span class="n">ALBUM</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">ARTIST</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">P</span><span class="p">.</span><span class="n">Song</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">Albumb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">ID</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="n">Artist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	 </span><span class="k">and</span><span class="w"> </span><span class="n">B</span><span class="p">.</span><span class="k">Year</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">2001</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">Labels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;UMG&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><h4 id="exercise-12">Exercise 12<a hidden class="anchor" aria-hidden="true" href="#exercise-12">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">Profits</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">ROOM</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">SCREENING</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="n">Room</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">City</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;Rome&#34;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="nb">Date</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="s2">&#34;01/01/05&#34;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">S</span><span class="p">.</span><span class="nb">Date</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s2">&#34;31/01/05&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Code</span><span class="p">,</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="n">Name</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">HAVING</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">S</span><span class="p">.</span><span class="n">Profits</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20000</span><span class="w">
</span></span></span></code></pre></div><h4 id="exercise-13">Exercise 13<a hidden class="anchor" aria-hidden="true" href="#exercise-13">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">FROM</span><span class="w"> </span><span class="n">FILM</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">SCREEENING</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="k">ON</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">JOIN</span><span class="w"> </span><span class="n">ROOM</span><span class="w"> </span><span class="n">R</span><span class="w">
</span></span></span></code></pre></div><h4 id="27">27<a hidden class="anchor" aria-hidden="true" href="#27">#</a></h4>
<p>Ho bisogno di un aggregato, perché devo sapere il numero di novels in cui appare</p>
<p>Avrò bisogno di Characters e Novel, perché questi sono le cose prese.</p>
<p>Un groupby CodeNov, Title e Name, potrebbe essere sensato.
Come faccio ad esprimere il concetto che sono apparsi in più di un novel?</p>
<p>Posso intanto creare una view in cui ho il nome del carattere e numero di</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">CodeNov</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">CHARACTERS</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">HAVING</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">CodeNov</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></div><p>Questa query la chiamo <code>A1</code> e mi sarà utile come subquery !? Si, basta aggiungere un having e poi l&rsquo;abbiamo!
Alla fine non avevo bisogno della relazione Novel.</p>
<h4 id="28">28<a hidden class="anchor" aria-hidden="true" href="#28">#</a></h4>
<p>Ho bisogno di sapere se è italiano l&rsquo;autore, e Novel, quindi dovrei fare join per selezionare solamente le Novel italiane. Poi dovrei fare join ancora per capire se ho o meno il film. E devo contare anche i films&hellip;</p>
<p>Seleziono Novelle italiane</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">N</span><span class="p">.</span><span class="n">CodeNov</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">NOVEL</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="n">AUTHORS</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">A</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">N</span><span class="p">.</span><span class="n">Author</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">Name</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">Country</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;it&#34;</span><span class="w">
</span></span></span></code></pre></div><p>Questa la chiamo <code>A1</code></p>
<p>Posso usare questo e una dicitura Groupby per finalizzare.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">N1</span><span class="p">.</span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">Code</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">NOVEL</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">N1</span><span class="p">,</span><span class="w"> </span><span class="n">FILM</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">F</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">N1</span><span class="p">.</span><span class="n">CodeNov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">Novel</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">N1</span><span class="p">.</span><span class="n">CodeNov</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">A1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">N1</span><span class="p">.</span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">Code</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">HAVING</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">F</span><span class="p">.</span><span class="n">Code</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span></span></span></code></pre></div><p>Non so se posso rimuovere F.code fra le select.</p>
<h4 id="29">29<a hidden class="anchor" aria-hidden="true" href="#29">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">Title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">NOVEL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">CodeNov</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">SELECT</span><span class="w"> </span><span class="n">N</span><span class="p">.</span><span class="n">CodeNov</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">FROM</span><span class="w"> </span><span class="n">NOVEL</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="n">FILM</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">F</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">N</span><span class="p">.</span><span class="n">CodeNov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">F</span><span class="p">.</span><span class="n">Novel</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>Questa mi sembra facile, conoscendo però query innestate</p>
<h4 id="30">30<a hidden class="anchor" aria-hidden="true" href="#30">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">Title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">NOVEL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">CodeNov</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">SELECT</span><span class="w"> </span><span class="n">N</span><span class="p">.</span><span class="n">CodeNov</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">FROM</span><span class="w"> </span><span class="n">NOVEL</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">N</span><span class="p">,</span><span class="w"> </span><span class="n">CHARACTERS</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">C</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">WHERE</span><span class="w"> </span><span class="n">N</span><span class="p">.</span><span class="n">CodeNov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">CodeNov</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="k">C</span><span class="p">.</span><span class="n">Gender</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&#34;Male&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>Mi sembra ok anche se la soluzione è diversa rispetto a quello del prof. Una cosa che non ho capito della soluzione del prof è perché ha bisogno di selezionare anche codeNov&hellip;</p>
<h2 id="design-concettuale">Design concettuale<a hidden class="anchor" aria-hidden="true" href="#design-concettuale">#</a></h2>
<h3 id="esercizio-1">Esercizio 1<a hidden class="anchor" aria-hidden="true" href="#esercizio-1">#</a></h3>
<p>Proviamo ad identificare</p>
<ol>
<li>Clinica
<ol>
<li>ID Chiave</li>
<li>address</li>
<li>numero di telefono</li>
</ol>
</li>
<li>Tool
<ol>
<li><strong>ID</strong> chiave</li>
<li>descrizione</li>
</ol>
</li>
<li>Specialista
<ol>
<li><strong>ID</strong></li>
<li>Nome</li>
<li>Cognome</li>
<li>Numero telefono</li>
<li>SLista (1, N)</li>
</ol>
</li>
<li>Collaboratori
<ol>
<li>ID</li>
<li>nome</li>
<li>cognome</li>
</ol>
</li>
<li>Visita
<ol>
<li>Codice</li>
<li>Date</li>
<li>Time</li>
</ol>
</li>
</ol>
<ul>
<li>Clinica -&gt; Visit (1, N), Clinica &lt;- Visit (1, 1) assign</li>
<li>Visit -&gt; Spec (1, N), Visit &lt;- Spec (0, N) DO</li>
<li>Spec -&gt; Tool (0, N), Spec &lt;- Tool (1, N) Use</li>
<li>Coll -&gt; Tool (1, N), Coll &lt;- Tool (0, N) Responsabile</li>
<li>Spec -&gt; Coll (0, N), Spec &lt;- Coll (1, N), work</li>
</ul>
<h3 id="esercizio-2">Esercizio 2<a hidden class="anchor" aria-hidden="true" href="#esercizio-2">#</a></h3>
<ol>
<li>Corsi
<ol>
<li><strong>Nome</strong></li>
<li>prezzo</li>
<li>max attendee</li>
</ol>
</li>
<li>Membri
<ol>
<li>Generalizzazione ereditarietà, esclusiva (se si può stare da una parte o dall&rsquo;altra allo stesso tempo), totale (perché o è uno o nell&rsquo;altro) e si indica con la freccetta riempita.
<ol>
<li><strong>ID</strong></li>
<li>Nome</li>
<li>Surname</li>
<li>Phone number</li>
</ol>
</li>
<li>Trainer</li>
<li>Cliente
<ol>
<li>età</li>
</ol>
</li>
</ol>
</li>
<li>Card
<ol>
<li><strong>Numero progressivo + esterno (cliente)</strong></li>
<li>prezzo totale</li>
</ol>
</li>
</ol>
<ul>
<li>
<p>Cliente - Card -&gt; (0, N), &lt;- (1, 1) own</p>
</li>
<li>
<p>Trainer - Corso, -&gt; (0, N), &lt;- (1, 2), responsabile, Venduto è giusto anche (1, N) in questo caso, perché non è detto.</p>
</li>
<li>
<p>Cliente - Corso, -&gt; (0, N), &lt;- (0, N), Enroll, vincolo relazionale esterno.</p>
</li>
<li>
<p>Card - Corso, -&gt; (1, N), &lt;- (0, N),  Made-f</p>
</li>
<li>
<p>Max A &gt;= client e anche by card.</p>
</li>
<li>
<p>Costo carta &lt; costo corsi a cui da accesso</p>
</li>
</ul>
<h3 id="esercizio-3">Esercizio 3<a hidden class="anchor" aria-hidden="true" href="#esercizio-3">#</a></h3>
<ol>
<li>Company (financial market?)
<ol>
<li><strong>Code</strong></li>
<li>Name</li>
<li>Share capital</li>
<li>Registered office
<ol>
<li>City</li>
<li>state</li>
</ol>
</li>
</ol>
</li>
<li>Rating Agency
<ol>
<li><strong>Code</strong></li>
<li>Name</li>
</ol>
</li>
<li>financial instrument
<ol>
<li><strong>Nome + (company)</strong></li>
<li>Performance</li>
<li>Figli (esclusivo, totale in questo caso)
<ol>
<li>Derivati</li>
<li>Shares</li>
<li>Bonds
<ol>
<li>Maturity date</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<ul>
<li>Fins - ocmp, -&gt; (1, 1) , &lt;- (1, N), issue
<ul>
<li>Value</li>
</ul>
</li>
<li>Comp - Agency, -&gt; (1, N), &lt;- (1, N), rating
<ul>
<li>Value</li>
</ul>
</li>
<li>Comp - Comp, -&gt; (1, N), &lt;- (1, N) Hold
<ul>
<li>Percentuale</li>
</ul>
</li>
</ul>
<p>BR:</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/no-tags/">No-Tags</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on x"
            href="https://x.com/intent/tweet/?text=Database%20exercises&amp;url=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f&amp;hashtags=no-tags">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f&amp;title=Database%20exercises&amp;summary=Database%20exercises&amp;source=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f&title=Database%20exercises">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on whatsapp"
            href="https://api.whatsapp.com/send?text=Database%20exercises%20-%20http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on telegram"
            href="https://telegram.me/share/url?text=Database%20exercises&amp;url=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Database exercises on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Database%20exercises&u=http%3a%2f%2flocalhost%3a1313%2fcontent%2fnotes%2fdatabase-exercises%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="http://localhost:1313/">X. A. Huang&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
