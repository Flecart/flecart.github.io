<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Cloud Computing Services | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="☁cloud-computing">
<meta name="description" content="Cloud Computing: An Overview
Cloud shifted the paradigm from owning hardware to renting computing resources on-demand. Hardware became a service.
Key Players in the Cloud Industry 🟨
The cloud computing market is dominated by several major providers, often referred to as the &ldquo;Big Seven&rdquo;, also called hyper-scalers. They are usually not interested in making it interoperable (they prefer the lock-in).

Amazon Web Services (AWS): The largest provider, offering a comprehensive suite of cloud services.
Microsoft Azure: Known for deep integration with enterprise systems and hybrid cloud solutions.
Google Cloud Platform (GCP): Excels in data analytics, AI/ML, and Kubernetes-based solutions.
IBM Cloud: Focuses on hybrid cloud and enterprise-grade AI.
Oracle Cloud: Specializes in database solutions and enterprise applications.
Alibaba Cloud: The leading provider in Asia, offering services similar to AWS.
Salesforce: A major player in SaaS, particularly for CRM and business applications.
These providers collectively control the majority of the global cloud infrastructure market, enabling scalable and on-demand computing resources for businesses worldwide.

Capital and Operational Expenses in the Cloud
Definition for CapEx and OpEx 🟥
Cloud computing transforms traditional IT cost structures by shifting expenses from capital expenditures (CapEx), such as purchasing servers and data centers, to operational expenditures (OpEx), where users pay only for the resources they consume.">
<meta name="author" content="Xuanqiang &#39;Angelo&#39; Huang">
<link rel="canonical" href="https://flecart.github.io/notes/cloud-computing-services/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/cloud-computing-services/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>






      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WW6NN2QGKF');
        }
      </script><meta property="og:url" content="https://flecart.github.io/notes/cloud-computing-services/">
  <meta property="og:site_name" content="X. Angelo Huang&#39;s Blog">
  <meta property="og:title" content="Cloud Computing Services">
  <meta property="og:description" content="Cloud Computing: An Overview Cloud shifted the paradigm from owning hardware to renting computing resources on-demand. Hardware became a service.
Key Players in the Cloud Industry 🟨 The cloud computing market is dominated by several major providers, often referred to as the “Big Seven”, also called hyper-scalers. They are usually not interested in making it interoperable (they prefer the lock-in).
Amazon Web Services (AWS): The largest provider, offering a comprehensive suite of cloud services. Microsoft Azure: Known for deep integration with enterprise systems and hybrid cloud solutions. Google Cloud Platform (GCP): Excels in data analytics, AI/ML, and Kubernetes-based solutions. IBM Cloud: Focuses on hybrid cloud and enterprise-grade AI. Oracle Cloud: Specializes in database solutions and enterprise applications. Alibaba Cloud: The leading provider in Asia, offering services similar to AWS. Salesforce: A major player in SaaS, particularly for CRM and business applications.
These providers collectively control the majority of the global cloud infrastructure market, enabling scalable and on-demand computing resources for businesses worldwide. Capital and Operational Expenses in the Cloud Definition for CapEx and OpEx 🟥 Cloud computing transforms traditional IT cost structures by shifting expenses from capital expenditures (CapEx), such as purchasing servers and data centers, to operational expenditures (OpEx), where users pay only for the resources they consume.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:tag" content="☁Cloud-Computing">
      <meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="Cloud Computing Services">
<meta name="twitter:description" content="Cloud Computing: An Overview
Cloud shifted the paradigm from owning hardware to renting computing resources on-demand. Hardware became a service.
Key Players in the Cloud Industry 🟨
The cloud computing market is dominated by several major providers, often referred to as the &ldquo;Big Seven&rdquo;, also called hyper-scalers. They are usually not interested in making it interoperable (they prefer the lock-in).

Amazon Web Services (AWS): The largest provider, offering a comprehensive suite of cloud services.
Microsoft Azure: Known for deep integration with enterprise systems and hybrid cloud solutions.
Google Cloud Platform (GCP): Excels in data analytics, AI/ML, and Kubernetes-based solutions.
IBM Cloud: Focuses on hybrid cloud and enterprise-grade AI.
Oracle Cloud: Specializes in database solutions and enterprise applications.
Alibaba Cloud: The leading provider in Asia, offering services similar to AWS.
Salesforce: A major player in SaaS, particularly for CRM and business applications.
These providers collectively control the majority of the global cloud infrastructure market, enabling scalable and on-demand computing resources for businesses worldwide.

Capital and Operational Expenses in the Cloud
Definition for CapEx and OpEx 🟥
Cloud computing transforms traditional IT cost structures by shifting expenses from capital expenditures (CapEx), such as purchasing servers and data centers, to operational expenditures (OpEx), where users pay only for the resources they consume.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Cloud Computing Services",
      "item": "https://flecart.github.io/notes/cloud-computing-services/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Cloud Computing Services",
  "name": "Cloud Computing Services",
  "description": "Cloud Computing: An Overview Cloud shifted the paradigm from owning hardware to renting computing resources on-demand. Hardware became a service.\nKey Players in the Cloud Industry 🟨 The cloud computing market is dominated by several major providers, often referred to as the \u0026ldquo;Big Seven\u0026rdquo;, also called hyper-scalers. They are usually not interested in making it interoperable (they prefer the lock-in).\nAmazon Web Services (AWS): The largest provider, offering a comprehensive suite of cloud services. Microsoft Azure: Known for deep integration with enterprise systems and hybrid cloud solutions. Google Cloud Platform (GCP): Excels in data analytics, AI/ML, and Kubernetes-based solutions. IBM Cloud: Focuses on hybrid cloud and enterprise-grade AI. Oracle Cloud: Specializes in database solutions and enterprise applications. Alibaba Cloud: The leading provider in Asia, offering services similar to AWS. Salesforce: A major player in SaaS, particularly for CRM and business applications.\nThese providers collectively control the majority of the global cloud infrastructure market, enabling scalable and on-demand computing resources for businesses worldwide. Capital and Operational Expenses in the Cloud Definition for CapEx and OpEx 🟥 Cloud computing transforms traditional IT cost structures by shifting expenses from capital expenditures (CapEx), such as purchasing servers and data centers, to operational expenditures (OpEx), where users pay only for the resources they consume.\n",
  "keywords": [
    "☁cloud-computing"
  ],
  "articleBody": "Cloud Computing: An Overview Cloud shifted the paradigm from owning hardware to renting computing resources on-demand. Hardware became a service.\nKey Players in the Cloud Industry 🟨 The cloud computing market is dominated by several major providers, often referred to as the “Big Seven”, also called hyper-scalers. They are usually not interested in making it interoperable (they prefer the lock-in).\nAmazon Web Services (AWS): The largest provider, offering a comprehensive suite of cloud services. Microsoft Azure: Known for deep integration with enterprise systems and hybrid cloud solutions. Google Cloud Platform (GCP): Excels in data analytics, AI/ML, and Kubernetes-based solutions. IBM Cloud: Focuses on hybrid cloud and enterprise-grade AI. Oracle Cloud: Specializes in database solutions and enterprise applications. Alibaba Cloud: The leading provider in Asia, offering services similar to AWS. Salesforce: A major player in SaaS, particularly for CRM and business applications.\nThese providers collectively control the majority of the global cloud infrastructure market, enabling scalable and on-demand computing resources for businesses worldwide. Capital and Operational Expenses in the Cloud Definition for CapEx and OpEx 🟥 Cloud computing transforms traditional IT cost structures by shifting expenses from capital expenditures (CapEx), such as purchasing servers and data centers, to operational expenditures (OpEx), where users pay only for the resources they consume.\nCapital Expenses are usually depreciated (spread in time). Operation Expenses are typically tax-deductible.\nTotal cost of ownership Better using hardware, leads to better performance at the same cost! So this is important to solve to keep costs of operating datacenters low. To compute the cost of ownership we need to take into account:\nCapital expense in buying hardware (big part 61%) Energy and cooling to keep it going Networking costs Other (like maintenance, cost of capital, amortized cost of building etc.) People that operate the building (security, technicians). Economic Advantages of the Cloud 🟨– Increased Resource Utilization: Cloud providers optimize hardware usage by sharing resources across multiple users (multitenancy), reducing idle capacity. Pay-as-You-Go Model: Organizations avoid upfront investments, paying instead for compute power, storage, and services as needed. Scalability: Costs align dynamically with demand, eliminating over-provisioning. Key Insight:\nThe cloud improves efficiency by enabling resource sharing. From the provider’s perspective, resource utilization increases significantly. For users, costs are proportional to actual usage, fostering financial flexibility.\nToday’s platforms are highly inefficient from this point of view. (most of the resources are not used!).\nCloud Service Models Cloud offerings are categorized into four primary service models, each providing distinct levels of abstraction and management responsibility.\nTraditional methods 🟩 On-premises: The traditional model where organizations own and manage their infrastructure. Colocation: Organizations rent space in a data center and manage their hardware. Example Equinox that rents server cages. Hosting. Then cloud came and made the system administration part much more easier for administrators, who do not need to worry about the hardware anymore. This was also the beauty of abstractions. Now, in the second part of the cloud evolution, as described in (Schleier-Smith et al. 2021), is innovating how developers work: they don’t need to care about scaling and managing the infrastructure anymore, they just need to care about the code.\nInfrastructure as a Service (IaaS) 🟩 Definition: IaaS provides virtualized computing resources over the internet, allowing users to rent fundamental infrastructure components.\nFeatures:\nVirtual Machines (VMs): Securely isolated partitions of physical servers, enabled by hypervisor-based virtualization. Deployment Options: Shared VMs: Cost-effective, multitenant environments. Dedicated Servers: Virtualized but not shared (single-tenant). Bare Metal Servers: Physical servers without virtualization. Use Case: Ideal for organizations needing full control over their software stack but lacking physical hardware. We pay by the minute. Security Considerations:\nUsers rely on the provider’s implementation of isolation, hardware security, and virtualization integrity. This aligns with the shared responsibility model, where providers secure the infrastructure, while users protect their data and applications.\nExamples:\nAWS EC2 (Elastic Compute Cloud) Microsoft Azure Virtual Machines Google Compute Engine Platform as a Service (PaaS) 🟨 Definition: PaaS delivers a managed environment for developing, testing, and deploying applications, abstracting underlying infrastructure.\nFeatures:\nPreconfigured middleware (e.g., databases, load balancers, autoscalers). Streamlined deployment pipelines and DevOps tools (distributed caches). Automatic scaling by the load (specify policies of scaling) and resource management. Use Case: Reduces development overhead by handling infrastructure management, allowing teams to focus on coding and innovation, instead of managing infrastructure.\nExamples:\nAWS Elastic Beanstalk Google App Engine Heroku Software as a Service (SaaS) 🟨– Definition: SaaS delivers fully functional applications over the internet, managed entirely by the provider (classical software websites on the web, you have an application you just give them the data (dropbox, gmail, snowflake))\nFeatures:\nUsers interact solely with the application interface. No maintenance or infrastructure management required. Often subscription-based. The user just inputs the data, does not need to write software. Examples:\nMicrosoft Office 365 Google Workspace (Gmail, Drive) Salesforce CRM Snowflake (cloud data warehousing) Simple comparison of Service Models Model Control Management Use Case IaaS High (OS \u0026 apps) User-managed Custom infrastructure needs PaaS Medium (apps) Provider-managed Streamlined app development SaaS Low (configuration) Fully managed Ready-to-use software FaaS Minimal (code) Fully automated Event-driven, short-lived tasks Serverless computing We hide the hardware, but we also hide the backend!\nThe future evolution of serverless computing, and in our view of cloud computing, will be guided by efforts to provide abstractions that simplify cloud programming. (Schleier-Smith et al. 2021).\nFunctions as a Service (FaaS) / Serverless Computing 🟩 Definition: FaaS allows users to deploy event-driven, stateless functions without managing servers.\nFeatures:\nEvent Triggers: Functions execute in response to events (e.g., file uploads, API calls, scheduled by the cluster manager, but it is difficult to provide low latency scheduling, see Cluster Resource Management#Dirigent). Millisecond Billing: Costs are based on execution time and memory used (fine grained billing!). Automatic Scaling: Instances spin up/down seamlessly with demand. Advantages:\nEliminates server provisioning and capacity planning from the developer/user. Ideal for parallelizable tasks (e.g., video encoding, data processing). Very fine granularity of billing. Use Cases:\nSmall highly parallelizable functions triggered by events. Real-time data processing Microservices architecture Batch jobs (e.g., compiling code, running unit tests, compressing or decompressing videos). Examples:\nAWS Lambda Azure Functions Google Cloud Functions Sometimes we can see these as a supercomputer on demand. Advantages and Disadvantages of Serverless Computing 🟨++ Advantages:\nEasy to use (just add a single function + trigger) Scalable (automatic scaling, very robust to bursts) Cost-effective (pay only for execution time) Limitations:\nStateless No connection between each other or states between each other (we don’t have IPs between each other) E.g. if we need to use Massive Parallel Processing frameworks, we write to a shared location. Limited resources (execution time, bandwidth, memory etc). Difficulty in efficiently scheduling and running the lambdas The provider has little info about application characteristics to optimize scheduling In (Schleier-Smith et al. 2021) the authors propose that the developers themselves could add hints for the cloud provider to know which kind of communication patterns are more prevalent in that application. The cloud provider could develop technologies of static code analysis to infer the main communication patterns of the program. There are no general serverless platforms, against serverful classical platforms. (For some uses, serverless is too slow or inefficient). Providing FaaS There are three main challenges that are against securely hosting these services:\nFine-Grained functions -\u003e densely packaged functions Isolate functions from one to another Functions usually cannot communicate with each other. Fixed resources are allocated to the functions. We should be able to spin up the resources quickly (today on the order of hundreds of milliseconds) See next section for warm and cold starts. Warm and Cold starts 🟨– Lambdas cannot execute out of the blue:\nBoot function sandboxes Fetch function codes Application runtimes And then execute. The first three parts are the cold start where a lot of the stuff needs to be downloaded and configured. The hot start is just keeping around the sandboxes, and the required dependencies and then execute the lambdas. But it has the problem that this is consuming memory. Microsoft has seen that hot starts need on average 16x more memory compared to cold starts, over 100 function runs.\nFirecracker Firecracker ((Agache et al. 2020)) is a lightweight, open-source Virtual Machine Monitor (VMM) designed to run microVMs with minimal overhead. Developed by AWS for services like AWS Lambda and AWS Fargate, Firecracker is optimized for secure, fast-booting, and resource-efficient virtualization. It uses KVM (Kernel-based Virtual Machine) and provides strong isolation while maintaining near-native performance. Alternatives at the time excluded security with minimal overhead. It has been in production since 2018.\nKey features of Firecracker 🟨+ It offers memory overhead of less than 5MB per container, boots to application code in less than 125ms, and allows creation of up to 150 MicroVMs per second per host.\nMicroVMs: Lightweight VMs with a minimal memory and CPU footprint (efficient) 5MB per vm. They removed known things that are usually not useful for the cloud computing parts: VM migration, BIOS, cpu emulation, devices handling are some examples of what was removed. Fast Boot Times Can start microVMs in around less than 125 milliseconds instead of seconds. They can create about 150 vms per host. Security: Implements strong isolation with seccomp filters (see Container Virtualization#Linux Containers) and a minimal attack surface. The security critical part is moved to the hardware. It’s a nice way to develop machines that have some properties of VMs (See Architettura software del OS) or Container Virtualization. They preferred to use VMs for security reasons.\nPrebooted pool Firecracker uses a prebooted pool of microVMs to minimize cold start times. This approach involves keeping a pool of pre-initialized microVMs ready to handle incoming requests, significantly reducing the time it takes to respond to events. This is particularly useful for workloads with unpredictable spikes in demand.\nPrebooted Pool: A set of pre-initialized microVMs that can be quickly activated to handle incoming requests, reducing cold start times. Warm Start: Reusing existing microVMs from the prebooted pool for subsequent requests, minimizing latency. Cold Start: The initial boot time of a microVM when no prebooted instances are available, leading to higher latency. Usages and Development Usages:\nAPI-Driven: Exposes a REST API for managing microVMs programmatically. Optimized for Serverless: Used in AWS Lambda and Fargate to run function-based workloads efficiently. Instead of using QEMU on top of KVM, they developed this lightweight version, see Architettura software del OS.\nOpen Questions for MicroVMs Latency overhead: boot time is still non-trivial (\u003e 100ms) Memory overhead: need a guest OS per MicroVM, keep around hot MicroVMs And it is still hard to optimize scheduling (charging price even if I’m blocked on I/O).\nDandelion 🟥++ Dandelion can be seen as an alternative approach compared to microVMs. It needs to use some specifically build software that separates the computation part with the communication part. For the computation they allow basically to execute everything, even untrusted code. While for communication they ask for some specific trusted code (API for communication). This separation enables a lightweight yet secure function execution system, making functions more amenable to hardware acceleration and facilitating dataflow-aware function orchestration. Knowing the communication patterns helps to optimize when you want to allocate it.\nResource allocation We have first explored some methods in Massive Parallel Processing. Cloud providers pack the requests together to run the functions, but this is not always efficient currently.\nWe need to take into consideration some important key factors:\nRequirements change quite often. Fewer configurations so that they are easier to manage. Constant power budget Uncorrelated Resource usages The difficult part to handle is that the usage of CPU and Disk are uncorrelated, at least their relation is not simply linear or inversely linear. The main implication of this is: it is difficult to have a balanced resource usage -\u003e sunk cost: we have resources that we are not using, but we are paying for.\n80% of servers have less than 20% of utilization, or similar numbers (most of computers have not so much utilization). Sometimes big events are present (see twitter crash in 2009), and in this case the resources are used, but these events are very very sparse. Another notable uncorrelation is the utilization and the power usage! This was quite not intuitive: old servers consumed 60% of the max power usage even at 0 utilization!\nDisaggregated resource pools Instead of having fixed allocation to various applications, we can have a logical layer that says that we have a specific pool of each kind of resource and then try to allocate them independently. The idea is that by decoupling the resources, it is easier to allocate them.\nSoftware We usually divide software in different tiers. Here’s a more structured, textbook-style version of your notes:\nMain Layers In modern software architecture, systems are commonly structured into three primary layers, closely resembling the architecture described by (Calder et al. 2011):\nPresentation Layer – This layer is responsible for the user interface and user experience. It handles input from users and displays the processed data in an understandable manner. Application Layer – Sometimes referred to as the business logic layer, this component processes data, executes operations, and enforces business rules. It serves as an intermediary between the presentation and data layers. Data Layer – This layer is dedicated to data storage and retrieval. It communicates with databases or other storage systems to ensure data persistence and integrity. These layers interact with each other in a structured manner to maintain modularity and separation of concerns. However, increasing the number of levels of indirection can help solve certain system design challenges, such as scalability or maintainability. On the other hand, excessive layering introduces overhead, making the system more complex to maintain and potentially reducing its performance.\nTypes of Tiers 🟥 Software architectures have evolved over time to address scalability, maintainability, and efficiency. The following outlines the major transitions in architectural paradigms:\n1-Tier (Monolithic Architecture) A single system that integrates all components into a single unit. Simple to develop and manage since there are no inter-process or network communication overheads. Lacks scalability, as increasing demand requires vertical scaling (adding more resources to a single server). 2-Tier Architecture (Client-Server Model) Introduced API-based communication through remote procedure calls (RPC). Standardized API interfaces, often implemented via REST APIs over HTTP. More complex than monolithic systems due to the need for synchronization between client and server. Prone to compatibility issues, as both client and server must adhere to the same API specifications. We need to have an interface, as we have a separation between client and server. There is no communication with one server and another (so difficult to coordinate and synchronize the servers). 3-Tier Architecture (Middleware-Based Systems) Introduced an intermediary middleware layer that processes business logic independently of the client and data layers. (level of indirection, this is also the root of microservice architecture) Enabled better scalability by distributing workload across multiple servers. Served as the foundation for micro-services architectures, where different services operate independently and communicate via lightweight protocols such as HTTP or message queues. Performance evaluation Understand why a system behaves in the way it does This is based on the paper (Ousterhout 2018). Common errors in performance evaluation Bugs in the benchmarking code (difficult to spot, as they just product erroneous measures, instead of faulting irrecoverably) Making educated guesses instead of actually measuring the performance that is object of the discourse. Often these results are simply not true. One easy way is checking for inconsistencies. Not measuring everything. This leads to superficial measurements. Another effect that this often leads is confimation bias of the original hypothesis, if we measure only that thing. One way to fix this is measuring at a lower level, or measuring in different manners. References [1] Calder et al. “Windows Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency” ACM 2011 [2] Ousterhout “Always Measure One Level Deeper” Vol. 61(7), pp. 74--83 2018 [3] Agache et al. “Firecracker: Lightweight Virtualization for Serverless Applications” 17th USENIX Symposium on Networked Systems Design and Implementation (NSDI 20) 2020 [4] Schleier-Smith et al. “What Serverless Computing Is and Should Become: The next Phase of Cloud Computing” Vol. 64(5), pp. 76--84 2021 ",
  "wordCount" : "2677",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang 'Angelo' Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/cloud-computing-services/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Cloud Computing Services
    </h1>
    <div class="post-meta">13 min&nbsp;·&nbsp;Xuanqiang &#39;Angelo&#39; Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#cloud-computing-an-overview" aria-label="Cloud Computing: An Overview">Cloud Computing: An Overview</a><ul>
                        <ul>
                        
                <li>
                    <a href="#key-players-in-the-cloud-industry-" aria-label="Key Players in the Cloud Industry 🟨">Key Players in the Cloud Industry 🟨</a></li></ul>
                    
                <li>
                    <a href="#capital-and-operational-expenses-in-the-cloud" aria-label="Capital and Operational Expenses in the Cloud">Capital and Operational Expenses in the Cloud</a><ul>
                        
                <li>
                    <a href="#definition-for-capex-and-opex-" aria-label="Definition for CapEx and OpEx 🟥">Definition for CapEx and OpEx 🟥</a></li>
                <li>
                    <a href="#total-cost-of-ownership" aria-label="Total cost of ownership">Total cost of ownership</a></li>
                <li>
                    <a href="#economic-advantages-of-the-cloud----" aria-label="Economic Advantages of the Cloud  🟨&ndash;">Economic Advantages of the Cloud  🟨&ndash;</a></li></ul>
                </li>
                <li>
                    <a href="#cloud-service-models" aria-label="Cloud Service Models">Cloud Service Models</a><ul>
                        
                <li>
                    <a href="#traditional-methods-" aria-label="Traditional methods 🟩">Traditional methods 🟩</a></li>
                <li>
                    <a href="#infrastructure-as-a-service-iaas---" aria-label="Infrastructure as a Service (IaaS)   🟩">Infrastructure as a Service (IaaS)   🟩</a></li>
                <li>
                    <a href="#platform-as-a-service-paas-" aria-label="Platform as a Service (PaaS) 🟨">Platform as a Service (PaaS) 🟨</a></li>
                <li>
                    <a href="#software-as-a-service-saas----" aria-label="Software as a Service (SaaS)  🟨&ndash;">Software as a Service (SaaS)  🟨&ndash;</a></li>
                <li>
                    <a href="#simple-comparison-of-service-models" aria-label="Simple comparison of Service Models">Simple comparison of Service Models</a></li></ul>
                </li>
                <li>
                    <a href="#serverless-computing" aria-label="Serverless computing">Serverless computing</a><ul>
                        
                <li>
                    <a href="#functions-as-a-service-faas--serverless-computing--" aria-label="Functions as a Service (FaaS) / Serverless Computing  🟩">Functions as a Service (FaaS) / Serverless Computing  🟩</a></li>
                <li>
                    <a href="#advantages-and-disadvantages-of-serverless-computing-" aria-label="Advantages and Disadvantages of Serverless Computing 🟨&#43;&#43;">Advantages and Disadvantages of Serverless Computing 🟨++</a></li>
                <li>
                    <a href="#providing-faas" aria-label="Providing FaaS">Providing FaaS</a></li>
                <li>
                    <a href="#warm-and-cold-starts---" aria-label="Warm and Cold starts 🟨&ndash;">Warm and Cold starts 🟨&ndash;</a></li></ul>
                </li>
                <li>
                    <a href="#firecracker" aria-label="Firecracker">Firecracker</a><ul>
                        
                <li>
                    <a href="#key-features-of-firecracker-" aria-label="Key features of Firecracker 🟨&#43;">Key features of Firecracker 🟨+</a></li>
                <li>
                    <a href="#prebooted-pool" aria-label="Prebooted pool">Prebooted pool</a></li>
                <li>
                    <a href="#usages-and-development" aria-label="Usages and Development">Usages and Development</a></li>
                <li>
                    <a href="#open-questions-for-microvms" aria-label="Open Questions for MicroVMs">Open Questions for MicroVMs</a></li>
                <li>
                    <a href="#dandelion-" aria-label="Dandelion 🟥&#43;&#43;">Dandelion 🟥++</a></li></ul>
                </li>
                <li>
                    <a href="#resource-allocation" aria-label="Resource allocation">Resource allocation</a><ul>
                        
                <li>
                    <a href="#uncorrelated-resource-usages" aria-label="Uncorrelated Resource usages">Uncorrelated Resource usages</a></li>
                <li>
                    <a href="#disaggregated-resource-pools" aria-label="Disaggregated resource pools">Disaggregated resource pools</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#software" aria-label="Software">Software</a><ul>
                        
                <li>
                    <a href="#main-layers" aria-label="Main Layers">Main Layers</a><ul>
                        
                <li>
                    <a href="#types-of-tiers-" aria-label="Types of Tiers 🟥">Types of Tiers 🟥</a></li></ul>
                </li>
                <li>
                    <a href="#performance-evaluation" aria-label="Performance evaluation">Performance evaluation</a><ul>
                        
                <li>
                    <a href="#common-errors-in-performance-evaluation" aria-label="Common errors in performance evaluation">Common errors in performance evaluation</a></li></ul>
                </li></ul>
                </li></ul>
                    
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="cloud-computing-an-overview">Cloud Computing: An Overview<a hidden class="anchor" aria-hidden="true" href="#cloud-computing-an-overview">#</a></h2>
<p>Cloud shifted the paradigm from owning hardware to renting computing resources on-demand. Hardware became a service.</p>
<h4 id="key-players-in-the-cloud-industry-">Key Players in the Cloud Industry 🟨<a hidden class="anchor" aria-hidden="true" href="#key-players-in-the-cloud-industry-">#</a></h4>
<p>The cloud computing market is dominated by several major providers, often referred to as the &ldquo;Big Seven&rdquo;, also called <strong>hyper-scalers</strong>. They are usually not interested in making it interoperable (they prefer the lock-in).</p>
<ol>
<li><strong>Amazon Web Services (AWS)</strong>: The largest provider, offering a comprehensive suite of cloud services.</li>
<li><strong>Microsoft Azure</strong>: Known for deep integration with enterprise systems and hybrid cloud solutions.</li>
<li><strong>Google Cloud Platform (GCP)</strong>: Excels in data analytics, AI/ML, and Kubernetes-based solutions.</li>
<li><strong>IBM Cloud</strong>: Focuses on hybrid cloud and enterprise-grade AI.</li>
<li><strong>Oracle Cloud</strong>: Specializes in database solutions and enterprise applications.</li>
<li><strong>Alibaba Cloud</strong>: The leading provider in Asia, offering services similar to AWS.</li>
<li><strong>Salesforce</strong>: A major player in SaaS, particularly for CRM and business applications.<br>
These providers collectively control the majority of the global cloud infrastructure market, enabling scalable and on-demand computing resources for businesses worldwide.</li>
</ol>
<h3 id="capital-and-operational-expenses-in-the-cloud">Capital and Operational Expenses in the Cloud<a hidden class="anchor" aria-hidden="true" href="#capital-and-operational-expenses-in-the-cloud">#</a></h3>
<h4 id="definition-for-capex-and-opex-">Definition for CapEx and OpEx 🟥<a hidden class="anchor" aria-hidden="true" href="#definition-for-capex-and-opex-">#</a></h4>
<p>Cloud computing transforms traditional IT cost structures by shifting expenses from <strong>capital expenditures (CapEx)</strong>, such as purchasing servers and data centers, to <strong>operational expenditures (OpEx)</strong>, where users pay only for the resources they consume.</p>
<p>Capital Expenses are usually depreciated (spread in time).
Operation Expenses are typically <em>tax-deductible</em>.</p>
<h4 id="total-cost-of-ownership">Total cost of ownership<a hidden class="anchor" aria-hidden="true" href="#total-cost-of-ownership">#</a></h4>
<p>Better using hardware, leads to better performance at the same cost! So this is important to solve to keep costs of operating datacenters low.
To compute the <strong>cost of ownership</strong> we need to take into account:</p>
<ul>
<li>Capital expense in buying hardware (big part 61%)</li>
<li>Energy and cooling to keep it going</li>
<li>Networking costs</li>
<li>Other (like maintenance, cost of capital, amortized cost of building etc.)</li>
<li>People that operate the building (security, technicians).</li>
</ul>
<h4 id="economic-advantages-of-the-cloud----">Economic Advantages of the Cloud  🟨&ndash;<a hidden class="anchor" aria-hidden="true" href="#economic-advantages-of-the-cloud----">#</a></h4>
<ul>
<li><strong>Increased Resource Utilization</strong>: Cloud providers optimize hardware usage by sharing resources across multiple users (multitenancy), reducing idle capacity.</li>
<li><strong>Pay-as-You-Go Model</strong>: Organizations avoid upfront investments, paying instead for compute power, storage, and services as needed.</li>
<li><strong>Scalability</strong>: Costs align dynamically with demand, eliminating over-provisioning.</li>
</ul>
<blockquote>
<p><strong>Key Insight</strong>:<br>
<em>The cloud improves <strong>efficiency</strong> by enabling <strong>resource sharing</strong>. From the provider’s perspective, resource utilization increases significantly. For users, costs are proportional to <strong>actual usage</strong>, fostering financial flexibility.</em></p></blockquote>
<p>Today&rsquo;s platforms are highly inefficient from this point of view. (most of the resources are not used!).</p>
<h3 id="cloud-service-models">Cloud Service Models<a hidden class="anchor" aria-hidden="true" href="#cloud-service-models">#</a></h3>
<p>Cloud offerings are categorized into four primary service models, each providing distinct levels of abstraction and management responsibility.</p>
<h4 id="traditional-methods-">Traditional methods 🟩<a hidden class="anchor" aria-hidden="true" href="#traditional-methods-">#</a></h4>
<ul>
<li><strong>On-premises</strong>: The traditional model where organizations own and manage their infrastructure.</li>
<li><strong>Colocation</strong>: Organizations rent space in a data center and manage their hardware.
<ul>
<li>Example Equinox that rents server <em>cages</em>.</li>
</ul>
</li>
<li><strong>Hosting</strong>.
Then cloud came and made the system administration part much more easier for administrators, who do not need to worry about the hardware anymore. This was also the beauty of abstractions.</li>
</ul>
<p>Now, in the second part of the cloud evolution, as described in <a href="https://dl.acm.org/doi/10.1145/3406011">(Schleier-Smith et al. 2021)</a>, is innovating how developers work: they don&rsquo;t need to care about scaling and managing the infrastructure anymore, they just need to care about the code.</p>
<h4 id="infrastructure-as-a-service-iaas---">Infrastructure as a Service (IaaS)   🟩<a hidden class="anchor" aria-hidden="true" href="#infrastructure-as-a-service-iaas---">#</a></h4>
<p><strong>Definition</strong>: IaaS provides virtualized computing resources over the internet, allowing users to rent fundamental infrastructure components.</p>
<p><strong>Features</strong>:</p>
<ul>
<li><strong>Virtual Machines (VMs)</strong>: Securely isolated partitions of physical servers, enabled by hypervisor-based virtualization.</li>
<li><strong>Deployment Options</strong>:
<ul>
<li><em>Shared VMs</em>: Cost-effective, multitenant environments.</li>
<li><em>Dedicated Servers</em>: Virtualized but not shared (single-tenant).</li>
<li><em>Bare Metal Servers</em>: Physical servers without virtualization.</li>
</ul>
</li>
<li><strong>Use Case</strong>: Ideal for organizations needing full control over their software stack but lacking physical hardware.</li>
<li>We pay by the minute.</li>
</ul>
<p><strong>Security Considerations</strong>:<br>
Users rely on the provider’s implementation of isolation, hardware security, and virtualization integrity. This aligns with the <strong>shared responsibility model</strong>, where providers secure the infrastructure, while users protect their data and applications.</p>
<p><strong>Examples</strong>:</p>
<ul>
<li>AWS EC2 (Elastic Compute Cloud)</li>
<li>Microsoft Azure Virtual Machines</li>
<li>Google Compute Engine</li>
</ul>
<h4 id="platform-as-a-service-paas-">Platform as a Service (PaaS) 🟨<a hidden class="anchor" aria-hidden="true" href="#platform-as-a-service-paas-">#</a></h4>
<p><strong>Definition</strong>: PaaS delivers a managed environment for developing, testing, and deploying applications, abstracting underlying infrastructure.</p>
<p><strong>Features</strong>:</p>
<ul>
<li>Preconfigured <strong>middleware</strong> (e.g., databases, load balancers, autoscalers).</li>
<li>Streamlined <strong>deployment</strong> pipelines and DevOps tools (distributed caches).</li>
<li><strong>Automatic scaling</strong> by the load (specify policies of scaling) and resource management.</li>
</ul>
<p><strong>Use Case</strong>: Reduces development overhead by handling infrastructure management, allowing teams to focus on coding and innovation, instead of managing infrastructure.</p>
<p><strong>Examples</strong>:</p>
<ul>
<li>AWS Elastic Beanstalk</li>
<li>Google App Engine</li>
<li>Heroku</li>
</ul>
<h4 id="software-as-a-service-saas----">Software as a Service (SaaS)  🟨&ndash;<a hidden class="anchor" aria-hidden="true" href="#software-as-a-service-saas----">#</a></h4>
<p><strong>Definition</strong>: SaaS delivers fully functional applications over the internet, managed entirely by the provider (classical software websites on the web, you have an application you just give them the data (dropbox, gmail, snowflake))</p>
<p><strong>Features</strong>:</p>
<ul>
<li>Users interact solely with the application interface.</li>
<li>No maintenance or infrastructure management required.</li>
<li>Often subscription-based.</li>
<li>The user just inputs the data, does not need to write software.</li>
</ul>
<p><strong>Examples</strong>:</p>
<ul>
<li>Microsoft Office 365</li>
<li>Google Workspace (Gmail, Drive)</li>
<li>Salesforce CRM</li>
<li>Snowflake (cloud data warehousing)</li>
</ul>
<h4 id="simple-comparison-of-service-models">Simple comparison of Service Models<a hidden class="anchor" aria-hidden="true" href="#simple-comparison-of-service-models">#</a></h4>
<table>
  <thead>
      <tr>
          <th><strong>Model</strong></th>
          <th><strong>Control</strong></th>
          <th><strong>Management</strong></th>
          <th><strong>Use Case</strong></th>
          <th></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>IaaS</strong></td>
          <td>High (OS &amp; apps)</td>
          <td>User-managed</td>
          <td>Custom infrastructure needs</td>
          <td></td>
      </tr>
      <tr>
          <td><strong>PaaS</strong></td>
          <td>Medium (apps)</td>
          <td>Provider-managed</td>
          <td>Streamlined app development</td>
          <td></td>
      </tr>
      <tr>
          <td><strong>SaaS</strong></td>
          <td>Low (configuration)</td>
          <td>Fully managed</td>
          <td>Ready-to-use software</td>
          <td></td>
      </tr>
      <tr>
          <td><strong>FaaS</strong></td>
          <td>Minimal (code)</td>
          <td>Fully automated</td>
          <td>Event-driven, short-lived tasks</td>
          <td></td>
      </tr>
  </tbody>
</table>
<h3 id="serverless-computing">Serverless computing<a hidden class="anchor" aria-hidden="true" href="#serverless-computing">#</a></h3>
<p>We hide the hardware, but we also hide the backend!</p>
<blockquote>
<p>The future evolution of serverless computing, and in our view of cloud computing, will be guided by efforts to provide abstractions that simplify cloud programming. <a href="https://dl.acm.org/doi/10.1145/3406011">(Schleier-Smith et al. 2021)</a>.</p></blockquote>
<h4 id="functions-as-a-service-faas--serverless-computing--">Functions as a Service (FaaS) / Serverless Computing  🟩<a hidden class="anchor" aria-hidden="true" href="#functions-as-a-service-faas--serverless-computing--">#</a></h4>
<p><strong>Definition</strong>: FaaS allows users to deploy event-driven, stateless functions without managing servers.</p>
<p><strong>Features</strong>:</p>
<ul>
<li><strong>Event Triggers</strong>: Functions execute in response to events (e.g., file uploads, API calls, scheduled by the cluster manager, but it is difficult to provide low latency scheduling, see <a href="/notes/cluster-resource-management#dirigent">Cluster Resource Management#Dirigent</a>).</li>
<li><strong>Millisecond Billing</strong>: Costs are based on execution time and memory used (fine grained billing!).</li>
<li><strong>Automatic Scaling</strong>: Instances spin up/down seamlessly with demand.</li>
</ul>
<p><strong>Advantages</strong>:</p>
<ul>
<li>Eliminates server provisioning and capacity planning from the developer/user.</li>
<li>Ideal for parallelizable tasks (e.g., video encoding, data processing).</li>
<li>Very fine granularity of billing.</li>
</ul>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Small highly parallelizable functions triggered by events.</li>
<li>Real-time data processing</li>
<li>Microservices architecture</li>
<li>Batch jobs (e.g., compiling code, running unit tests, compressing or decompressing videos).</li>
</ul>
<p><strong>Examples</strong>:</p>
<ul>
<li>AWS Lambda</li>
<li>Azure Functions</li>
<li>Google Cloud Functions</li>
<li>Sometimes we can see these as a <em>supercomputer on demand</em>.</li>
</ul>
<h4 id="advantages-and-disadvantages-of-serverless-computing-">Advantages and Disadvantages of Serverless Computing 🟨++<a hidden class="anchor" aria-hidden="true" href="#advantages-and-disadvantages-of-serverless-computing-">#</a></h4>
<p><strong>Advantages</strong>:</p>
<ul>
<li>Easy to use (just add a single function + trigger)</li>
<li>Scalable (automatic scaling, very robust to bursts)</li>
<li>Cost-effective (pay only for execution time)</li>
</ul>
<p><strong>Limitations</strong>:</p>
<ul>
<li>Stateless</li>
<li>No connection between each other or states between each other (we don&rsquo;t have IPs between each other)
<ul>
<li>E.g. if we need to use <a href="/notes/massive-parallel-processing">Massive Parallel Processing</a> frameworks, we write to a shared location.</li>
</ul>
</li>
<li>Limited resources (execution time, bandwidth, memory etc).</li>
<li>Difficulty in efficiently scheduling and running the lambdas
<ul>
<li>The provider has little info about application characteristics to optimize scheduling</li>
<li>In <a href="https://dl.acm.org/doi/10.1145/3406011">(Schleier-Smith et al. 2021)</a> the authors propose that the developers themselves could add <strong>hints</strong> for the cloud provider to know which kind of communication patterns are more prevalent in that application.</li>
<li>The cloud provider could develop technologies of static code analysis to infer the main communication patterns of the program.</li>
</ul>
</li>
<li>There are no general serverless platforms, against serverful classical platforms. (For some uses, serverless is too slow or inefficient).</li>
</ul>
<h4 id="providing-faas">Providing FaaS<a hidden class="anchor" aria-hidden="true" href="#providing-faas">#</a></h4>
<p>There are three main challenges that are against securely hosting these services:</p>
<ul>
<li>Fine-Grained functions -&gt; densely packaged functions</li>
<li>Isolate functions from one to another
<ul>
<li>Functions usually cannot communicate with each other.</li>
<li>Fixed resources are allocated to the functions.</li>
</ul>
</li>
<li>We should be able to spin up the resources quickly (today on the order of hundreds of milliseconds)
<ul>
<li>See next section for warm and cold starts.</li>
</ul>
</li>
</ul>
<h4 id="warm-and-cold-starts---">Warm and Cold starts 🟨&ndash;<a hidden class="anchor" aria-hidden="true" href="#warm-and-cold-starts---">#</a></h4>
<p>Lambdas cannot execute out of the blue:</p>
<ul>
<li>Boot function sandboxes</li>
<li>Fetch function codes</li>
<li>Application runtimes</li>
<li>And then execute.
The first three parts are the <strong>cold start</strong> where a lot of the stuff needs to be downloaded and configured.
The <strong>hot start</strong> is just keeping around the sandboxes, and the required dependencies and then execute the lambdas. But it has the problem that this is consuming memory.</li>
</ul>
<p>Microsoft has seen that hot starts need on average 16x more memory compared to cold starts, over 100 function runs.</p>
<h3 id="firecracker">Firecracker<a hidden class="anchor" aria-hidden="true" href="#firecracker">#</a></h3>
<p>Firecracker (<a href="https://www.usenix.org/conference/nsdi20/presentation/agache">(Agache et al. 2020)</a>) is a lightweight, open-source Virtual Machine Monitor (VMM) designed to run microVMs with minimal overhead. Developed by AWS for services like <strong>AWS Lambda</strong> and <strong>AWS Fargate</strong>, Firecracker is optimized for secure, fast-booting, and resource-efficient virtualization. It uses <strong>KVM</strong> (Kernel-based Virtual Machine) and provides strong isolation while maintaining near-native performance.
Alternatives at the time excluded security with minimal overhead.
It has been in production since 2018.</p>
<h4 id="key-features-of-firecracker-">Key features of Firecracker 🟨+<a hidden class="anchor" aria-hidden="true" href="#key-features-of-firecracker-">#</a></h4>
<blockquote>
<p>It offers memory overhead of less than 5MB per container, boots to application code in less than 125ms, and allows creation of up to 150 MicroVMs per second per host.</p></blockquote>
<ul>
<li><strong>MicroVMs</strong>: Lightweight VMs with a minimal memory and CPU footprint (efficient) <em>5MB</em> per vm.
<ul>
<li>They removed known things that are usually not useful for the cloud computing parts:</li>
<li>VM migration, BIOS, cpu emulation, devices handling are some examples of what was removed.</li>
</ul>
</li>
<li><strong>Fast Boot Times</strong>
<ul>
<li>Can start microVMs in around less than 125 milliseconds instead of seconds.</li>
<li>They can create about 150 vms per host.</li>
</ul>
</li>
<li><strong>Security</strong>: Implements strong isolation with seccomp filters (see <a href="/notes/container-virtualization#linux-containers">Container Virtualization#Linux Containers</a>) and a minimal attack surface.
<ul>
<li>The security critical part is moved to the hardware.</li>
</ul>
</li>
</ul>
<p>It&rsquo;s a nice way to develop machines that have some properties of VMs (See <a href="/notes/architettura-software-del-os">Architettura software del OS</a>) or <a href="/notes/container-virtualization">Container Virtualization</a>.
They preferred to use VMs for security reasons.</p>
<h4 id="prebooted-pool">Prebooted pool<a hidden class="anchor" aria-hidden="true" href="#prebooted-pool">#</a></h4>
<p>Firecracker uses a <strong>prebooted pool</strong> of microVMs to minimize cold start times. This approach involves keeping a pool of pre-initialized microVMs ready to handle incoming requests, significantly reducing the time it takes to respond to events. This is particularly useful for workloads with unpredictable spikes in demand.</p>
<ul>
<li><strong>Prebooted Pool</strong>: A set of pre-initialized microVMs that can be quickly activated to handle incoming requests, reducing cold start times.</li>
<li><strong>Warm Start</strong>: Reusing existing microVMs from the prebooted pool for subsequent requests, minimizing latency.</li>
<li><strong>Cold Start</strong>: The initial boot time of a microVM when no prebooted instances are available, leading to higher latency.</li>
</ul>
<h4 id="usages-and-development">Usages and Development<a hidden class="anchor" aria-hidden="true" href="#usages-and-development">#</a></h4>
<p>Usages:</p>
<ul>
<li><strong>API-Driven</strong>: Exposes a REST API for managing microVMs programmatically.</li>
<li><strong>Optimized for Serverless</strong>: Used in AWS Lambda and Fargate to run function-based workloads efficiently.</li>
</ul>
<p>Instead of using QEMU on top of KVM, they developed this lightweight version, see <a href="/notes/architettura-software-del-os">Architettura software del OS</a>.</p>
<h4 id="open-questions-for-microvms">Open Questions for MicroVMs<a hidden class="anchor" aria-hidden="true" href="#open-questions-for-microvms">#</a></h4>
<ul>
<li>Latency overhead: boot time is still non-trivial (&gt; 100ms)</li>
<li>Memory overhead: need a guest OS per MicroVM, keep around hot MicroVMs</li>
</ul>
<p>And it is still hard to optimize scheduling (charging price even if I&rsquo;m blocked on I/O).</p>
<h4 id="dandelion-">Dandelion 🟥++<a hidden class="anchor" aria-hidden="true" href="#dandelion-">#</a></h4>
<p>Dandelion can be seen as an alternative approach compared to microVMs.
It needs to use some specifically build software that separates <strong>the computation part with the communication part</strong>.
For the computation they allow basically to execute everything, even untrusted code.
While for communication they ask for some specific trusted code (<em>API</em> for communication).
This separation enables a lightweight yet secure function execution system, making functions more amenable to hardware acceleration and facilitating dataflow-aware function orchestration.
Knowing the communication patterns helps to optimize when you want to allocate it.</p>
<h3 id="resource-allocation">Resource allocation<a hidden class="anchor" aria-hidden="true" href="#resource-allocation">#</a></h3>
<p>We have first explored some methods in <a href="/notes/massive-parallel-processing">Massive Parallel Processing</a>. Cloud providers pack the requests together to run the functions, but this is not always efficient currently.</p>
<p>We need to take into consideration some important key factors:</p>
<ul>
<li>Requirements change quite often.</li>
<li>Fewer configurations so that they are easier to manage.</li>
<li>Constant <strong>power budget</strong></li>
</ul>
<h4 id="uncorrelated-resource-usages">Uncorrelated Resource usages<a hidden class="anchor" aria-hidden="true" href="#uncorrelated-resource-usages">#</a></h4>
<p>The difficult part to handle is that the usage of CPU and Disk are <strong>uncorrelated</strong>, at least their relation is not simply linear or inversely linear. The main implication of this is: it is difficult to have a balanced resource usage -&gt; <strong>sunk cost</strong>: we have resources that we are not using, but we are paying for.</p>
<ul>
<li>80% of servers have less than 20% of utilization, or similar numbers (most of computers have not so much utilization).</li>
<li>Sometimes big events are present (see twitter crash in 2009), and in this case the resources are used, but these events are very very sparse.</li>
</ul>
<p>Another notable uncorrelation is the utilization and the power usage! This was quite not intuitive: old servers consumed 60% of the max power usage even at 0 utilization!</p>
<h4 id="disaggregated-resource-pools">Disaggregated resource pools<a hidden class="anchor" aria-hidden="true" href="#disaggregated-resource-pools">#</a></h4>
<p>Instead of having fixed allocation to various applications, we can have a logical layer that says that we have a specific <strong>pool of each kind of resource</strong> and then try to allocate them independently. The idea is that by decoupling the resources, it is easier to allocate them.</p>
<h2 id="software">Software<a hidden class="anchor" aria-hidden="true" href="#software">#</a></h2>
<p>We usually divide software in different <strong>tiers</strong>.
Here’s a more structured, textbook-style version of your notes:</p>
<h3 id="main-layers">Main Layers<a hidden class="anchor" aria-hidden="true" href="#main-layers">#</a></h3>
<p>In modern software architecture, systems are commonly structured into three primary layers, closely resembling the architecture described by <a href="https://dl.acm.org/doi/10.1145/2043556.2043571">(Calder et al. 2011)</a>:</p>
<ol>
<li><strong>Presentation Layer</strong> – This layer is responsible for the user interface and user experience. It handles input from users and displays the processed data in an understandable manner.</li>
<li><strong>Application Layer</strong> – Sometimes referred to as the business logic layer, this component processes data, executes operations, and enforces business rules. It serves as an intermediary between the presentation and data layers.</li>
<li><strong>Data Layer</strong> – This layer is dedicated to data storage and retrieval. It communicates with databases or other storage systems to ensure data persistence and integrity.</li>
</ol>
<p>These layers interact with each other in a structured manner to maintain modularity and separation of concerns. However, increasing the number of <strong>levels of indirection</strong> can help solve certain system design challenges, such as scalability or maintainability. On the other hand, excessive layering introduces overhead, making the system more complex to maintain and potentially reducing its performance.</p>
<h4 id="types-of-tiers-">Types of Tiers 🟥<a hidden class="anchor" aria-hidden="true" href="#types-of-tiers-">#</a></h4>
<p>Software architectures have evolved over time to address scalability, maintainability, and efficiency. The following outlines the major transitions in architectural paradigms:</p>
<ul>
<li><strong>1-Tier (Monolithic Architecture)</strong>
<ul>
<li>A single system that integrates all components into a single unit.</li>
<li>Simple to develop and manage since there are no inter-process or network communication overheads.</li>
<li>Lacks scalability, as increasing demand requires vertical scaling (adding more resources to a single server).</li>
</ul>
</li>
<li><strong>2-Tier Architecture (Client-Server Model)</strong>
<ul>
<li>Introduced API-based communication through remote procedure calls (RPC).</li>
<li>Standardized API interfaces, often implemented via REST APIs over HTTP.</li>
<li>More complex than monolithic systems due to the need for synchronization between client and server.</li>
<li>Prone to compatibility issues, as both client and server must adhere to the same API specifications.</li>
<li>We need to have an interface, as we have a separation between client and server.</li>
<li>There is no communication with one server and another (so difficult to coordinate and synchronize the servers).</li>
</ul>
</li>
<li><strong>3-Tier Architecture (Middleware-Based Systems)</strong>
<ul>
<li>Introduced an intermediary middleware layer that processes business logic independently of the client and data layers. (<strong>level of indirection</strong>, this is also the root of microservice architecture)</li>
<li>Enabled better scalability by distributing workload across multiple servers.</li>
<li>Served as the foundation for <strong>micro-services architectures</strong>, where different services operate independently and communicate via lightweight protocols such as HTTP or message queues.</li>
</ul>
</li>
</ul>
<h3 id="performance-evaluation">Performance evaluation<a hidden class="anchor" aria-hidden="true" href="#performance-evaluation">#</a></h3>
<ul>
<li>Understand why a system behaves in the way it does
This is based on the paper <a href="https://dl.acm.org/doi/10.1145/3213770">(Ousterhout 2018)</a>.</li>
</ul>
<h4 id="common-errors-in-performance-evaluation">Common errors in performance evaluation<a hidden class="anchor" aria-hidden="true" href="#common-errors-in-performance-evaluation">#</a></h4>
<ul>
<li>Bugs in the benchmarking code (difficult to spot, as they just product erroneous measures, instead of faulting irrecoverably)</li>
<li>Making educated guesses instead of actually measuring the performance that is object of the discourse. Often these results are simply not true. One easy way is checking for inconsistencies.</li>
<li>Not measuring everything. This leads to <em>superficial measurements</em>. Another effect that this often leads is <strong>confimation bias</strong> of the original hypothesis, if we measure only that thing. One way to fix this is measuring at a lower level, or measuring in different manners.</li>
</ul>
<h1 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h1>
<p id=calderWindowsAzureStorage2011>[1] Calder et al. <a href="https://dl.acm.org/doi/10.1145/2043556.2043571">“Windows Azure Storage: A Highly Available Cloud Storage Service with Strong Consistency”</a> ACM  2011
 </p>
<p id=ousterhoutAlwaysMeasureOne2018>[2] Ousterhout <a href="https://dl.acm.org/doi/10.1145/3213770">“Always Measure One Level Deeper”</a>  Vol. 61(7), pp. 74--83 2018
 </p>
<p id=agacheFirecrackerLightweightVirtualization2020a>[3] Agache et al. <a href="https://www.usenix.org/conference/nsdi20/presentation/agache">“Firecracker: Lightweight Virtualization for Serverless Applications”</a> 17th USENIX Symposium on Networked Systems Design and Implementation (NSDI 20)  2020
 </p>
<p id=schleier-smithWhatServerlessComputing2021>[4] Schleier-Smith et al. <a href="https://dl.acm.org/doi/10.1145/3406011">“What Serverless Computing Is and Should Become: The next Phase of Cloud Computing”</a>  Vol. 64(5), pp. 76--84 2021
 </p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/cloud-computing/">☁Cloud-Computing</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on x"
            href="https://x.com/intent/tweet/?text=Cloud%20Computing%20Services&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f&amp;hashtags=%e2%98%81cloud-computing">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f&amp;title=Cloud%20Computing%20Services&amp;summary=Cloud%20Computing%20Services&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f&title=Cloud%20Computing%20Services">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on whatsapp"
            href="https://api.whatsapp.com/send?text=Cloud%20Computing%20Services%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on telegram"
            href="https://telegram.me/share/url?text=Cloud%20Computing%20Services&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Cloud Computing Services on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Cloud%20Computing%20Services&u=https%3a%2f%2fflecart.github.io%2fnotes%2fcloud-computing-services%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
