<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Filesystem | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="no-tags">
<meta name="description" content="PerchÃ© filesystem? Questa Ã¨ l&rsquo;idea presa dall&rsquo;archivio, come se fosse un ufficio che deve tenere delle pratiche ordinate in cartelle e cartelloni.
Lâ€™utilizzo principale Ã¨ dare un interfaccia comune di accesso ai dispositivi. perchÃ© dispositivi diversi hanno sotto modi di accedere diversi, questa interfaccia facilita molto l&rsquo;accesso.
Informazioni dei files (5&#43;) ðŸŸ¨ Il file Ã¨ lâ€™unitÃ  logica di memorizzazione. il formato che c&rsquo;Ã¨ dentro Ã¨ gestito dall&rsquo;applicazione, non dal file system!">
<meta name="author" content="Xuanqiang &#39;Angelo&#39; Huang">
<link rel="canonical" href="https://flecart.github.io/notes/filesystem/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/filesystem/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>




<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>





<script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-WW6NN2QGKF', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Filesystem" />
<meta property="og:description" content="PerchÃ© filesystem? Questa Ã¨ l&rsquo;idea presa dall&rsquo;archivio, come se fosse un ufficio che deve tenere delle pratiche ordinate in cartelle e cartelloni.
Lâ€™utilizzo principale Ã¨ dare un interfaccia comune di accesso ai dispositivi. perchÃ© dispositivi diversi hanno sotto modi di accedere diversi, questa interfaccia facilita molto l&rsquo;accesso.
Informazioni dei files (5&#43;) ðŸŸ¨ Il file Ã¨ lâ€™unitÃ  logica di memorizzazione. il formato che c&rsquo;Ã¨ dentro Ã¨ gestito dall&rsquo;applicazione, non dal file system!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://flecart.github.io/notes/filesystem/" />
<meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png" />
<meta property="article:section" content="notes" />



<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png" />
<meta name="twitter:title" content="Filesystem"/>
<meta name="twitter:description" content="PerchÃ© filesystem? Questa Ã¨ l&rsquo;idea presa dall&rsquo;archivio, come se fosse un ufficio che deve tenere delle pratiche ordinate in cartelle e cartelloni.
Lâ€™utilizzo principale Ã¨ dare un interfaccia comune di accesso ai dispositivi. perchÃ© dispositivi diversi hanno sotto modi di accedere diversi, questa interfaccia facilita molto l&rsquo;accesso.
Informazioni dei files (5&#43;) ðŸŸ¨ Il file Ã¨ lâ€™unitÃ  logica di memorizzazione. il formato che c&rsquo;Ã¨ dentro Ã¨ gestito dall&rsquo;applicazione, non dal file system!"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Filesystem",
      "item": "https://flecart.github.io/notes/filesystem/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Filesystem",
  "name": "Filesystem",
  "description": "PerchÃ© filesystem? Questa Ã¨ l\u0026rsquo;idea presa dall\u0026rsquo;archivio, come se fosse un ufficio che deve tenere delle pratiche ordinate in cartelle e cartelloni.\nLâ€™utilizzo principale Ã¨ dare un interfaccia comune di accesso ai dispositivi. perchÃ© dispositivi diversi hanno sotto modi di accedere diversi, questa interfaccia facilita molto l\u0026rsquo;accesso.\nInformazioni dei files (5+) ðŸŸ¨ Il file Ã¨ lâ€™unitÃ  logica di memorizzazione. il formato che c\u0026rsquo;Ã¨ dentro Ã¨ gestito dall\u0026rsquo;applicazione, non dal file system!",
  "keywords": [
    "no-tags"
  ],
  "articleBody": "PerchÃ© filesystem? Questa Ã¨ lâ€™idea presa dallâ€™archivio, come se fosse un ufficio che deve tenere delle pratiche ordinate in cartelle e cartelloni.\nLâ€™utilizzo principale Ã¨ dare un interfaccia comune di accesso ai dispositivi. perchÃ© dispositivi diversi hanno sotto modi di accedere diversi, questa interfaccia facilita molto lâ€™accesso.\nInformazioni dei files (5+) ðŸŸ¨ Il file Ã¨ lâ€™unitÃ  logica di memorizzazione. il formato che câ€™Ã¨ dentro Ã¨ gestito dallâ€™applicazione, non dal file system!\nLista degli attributi Ci sono un sacco di informazioni memorizzate nei file (un sacco di metadata anche)\nNome Data e ora di accesso o modifica Informazioni sullâ€™ownership e protezione di accesso. Dimensione del file TIpo del file Categorizzazione dei files (3) ðŸŸ©- Tipi di files\nPossiamo andare a distinguere i files a seconda del\nContenuto (se contiene codice oggetto, se contiene dati o informazioni) Struttura, se sono plain text sequenze di bytes, oppure dati strutturati come database., e possono anche essere un albero**.** UNIX: files speciali (blocchi o caratteri), pipes, oltre ai classici files e directories. NOTA: ci sono molte cose che sono viste come files, in unix tutto Ã¨ un file :D. Sono identificati da una coppia di numeri che identificano il device driver Files in sistemi operativi comuni ðŸŸ© I files sono nati con la metafora dellâ€™ufficio:\nArchivi di informazione, che vanno aperti e richiusi (messi nella loro collocazione corretta) Ãˆ utile conoscere il tipo di file per capire quale utilizzo andiamo a fare di essa.\nCâ€™Ã¨ un tradeoff, se ho tanti tipi di files, il sistema operativo diventa molto piÃ¹ complesso, se ho troppi pochi potrebbero essere troppo generali.\nSlide tradeoff tipologie di files\nTecniche di identificazione dei file (3) ðŸŸ© Generalmente ci sono 3 modi per riconoscere il tipo di files:\nMagic numbers Attributo tipo del filesystem estensione. Rispettivamente queste tecniche sono utilizzate in:\nWin (estensioni) Mac, informazioni aggiuntive sui files Unix, il magic number allâ€™inizio dei files Slide metodi di riconoscimento nei sistemi di riconoscimento\nUnix riconosce solamente gli eseguibili, in questo senso Ã¨ minimalista.\nCol magic number riesce anche a riconoscere lâ€™architettura target dellâ€™eseguibile.\nMac OS ha un codice identificativo per un programma che ha creato il file o la risorsa.\nWindows guarda lâ€™estensione. che solitamente sempre da 3 caratteri. (inizilamente il nome del file aveva solo 8 caratteri.\nMetodi di accesso comuni (3) Slide metodi di accesso\nseguenziale\ndiretto\nindicizzato\nUno di particolare interesse Ã¨ INDICIZZATO, che si usa spesso per i databases:\nSlide metodo di accesso ad indice\nOperazioni sui files ðŸŸ¨ Slide lista delle operazioni\nLâ€™apertura Ã¨ una operazione molto costosa, bisogna\nTrovare i files Capire se si hanno i permessi corretti per poter leggere, o scrivere sul file. Questo si collega molto bene con la metafora dellâ€™ufficio e con lâ€™archivio. Se ne ho bisogno vado a prendere dallâ€™archivio e la apro se mi serve. Una volta finito lo si rimette apposto.\nNote sullâ€™apertura e chiusura dei files\nDirectories Introduzione alle directories ðŸŸ¨ Ãˆ quindi un file speciale che contiene le informazioni di accesso per la gestione dei files al suo interno.\nA seconda dellâ€™implementazione possono essere degli array lineari oppure degli hashtable. (si pensi a quanto possano essere grandi le directories, se uso una lista diventa molto lento, se invece si sa giÃ  che sia piccola si perde del tempo a fare lâ€™hash).\nInformazioni nelle directories (2) ðŸŸ¨ Slide informazioni delle directories\nSono contenuti i-nodes, che sono degli indici per andare a comprendere la struttura dei files.\nMa puÃ² cambiare, questo Ã¨ un fatto implementativo, potrebbe benissimo anche essere messo nelle entries della directory.\nUNIX â†’ messe negli i-node\nMSDOS â†’ messe nelle dir entries.\nLunghezza dei nomi ðŸŸ¨ Introduzione al problema della lunghezza dei nomi Anche qui facciamo distinzione fra nomi a lunghezza variabile e nomi fissi, MSDOS al tempo utilizzava nomi fissi con necessariamente estensioni a tre caratteri.\nMetodi per nomi a lunghezza variabile Il metodo a Ã¨ preferita, perchÃ© nel secondo devo leggere in fondo per trovare il nome del file Directories a grafo aciclico I files, possono avere piÃ¹ nomi, in questo senso non ho piÃ¹ un albero ma un grafo.\nSlide struttura grafo aciclico Semantica di coerenza ðŸŸ¥ Dato che i sistemi moderni sono maggiormente tutti multitasking, vogliamo andare a specificare quando una modifica di un file puÃ² essere vista da un altro processo.\nimmediato: questa Ã¨ la semantica che viene utilizzata anche nei sistemi UNIX, una modifica Ã¨ subito vista da altri programmi. Bisogna chiedersi ora come si faccia ad implementare una cosa di questo genere.\nAFS: Ã¨ un esempio di file system interplanetario, in cui non era possibile fare una semantica imemdiata (i dati erano sparsi in mezzo al mondo). semantica di coerenza delle sessioni Ã¨ il nome di questo. ossia il file veniva modificato quando il file era chiuso. Questo era necessario perchÃ© ogni write dovevano rendere traffico sulla rete, era troppa questa sincronizzazione e troppo traffico direi.\nLa struttura Inode Allocazione Master Boot Record ðŸŸ¨+ Slide MBR\nQuesto Ã¨ il classico modo di fare partizioni, e si possono fare al massimo 4 partizioni.\nPraticamente Ã¨ una prima sezione del disco, che contiene una piccola tavola di partizioni, indice alla partizione attiva e informazioni per fare il boot, poi individua la sezione della partizione col boot, ed esegue quello per caricare il sistema operativo.\nÃˆ utile soprattutto per creare delle aree logiche diverse in cui possono esserci diverse informazioni.\n(altro Ã¨ global partitioning table anche GPT, che permette piÃ¹ partizioni)\nStruttura di una partizione (5) ðŸŸ©â€” Slide spiegazione sezioni logiche della partizione\nUn boot block che câ€™Ã¨ sempre Superblock contiene informazioni per mount, ad esempio Ã¨ qui che si accorge se Ã¨ stato unmounted o mounted correttamente Alcune cose per gestire spazio libero ed occupato Directory root e poi il filesystem Ã¨ gestito come pare a seconda dei filesystem Allocazione contiguaðŸŸ© Slide allocazione contigua Slide svantaggi allocazione contigua Contigua nel senso che lo metto nel blocco di memoria contiguo libero.\nQuesto Ã¨ lâ€™implementazione piÃ¹ veloce, facile da indicizzare.\nIl problema principale Ã¨ che Ã¨ statico, per esempio non posso allargare il file giallo, si dovrebbe andare a cercare un blocco abbastanza largo per storare questo. Questo Ã¨ il problema principale.\nInfatti se ho un filesystem si sola lettura viene utilizzato questa tipologia di allocazione ISO9660\nAllocazione concatenata ðŸŸ¨ Slide allocazione concatenata Slide vantaggi svantaggi\nIn pratica in ogni blocco di dati abbiamo un indice per il prossimo (perÃ² Ã¨ lento perchÃ© sono molto sparsi, perchÃ© devo fare seek e i file vanno in molti posti, per questo dovrei lanciare defrags molto spesso, ma almeno i file possono crescere ed essere modificati liberamente)\nSVANTAGGI:\nAccesso inefficiente (posso solo inziare dallâ€™inizio a scandire, non posso fare un offset) Ã¨ che i puntatori possono avere un grosso overhead per blocchi di dati piccoli. (e anche lâ€™assunzione che il blocco di dati non Ã¨ piÃ¹ una potenza di due). Seek di file, che vengono dispersi per utto il disco Per limitare la frammentazione dei file e lâ€™overhead posso utilizzare cluster\nSlide cluster blocchi\nAllocazione a File Allocation Table (FAT) ðŸŸ¨+ Slide FAT Slide svantaggi e vantaggi\nIn pratica ho una tabella apparte che mi dice in che modi i blocchi sono concatenati, in questo modo tolgo lâ€™overhead ai blocchi stessi e posso gestirmi apparte sti puntatori.\nSarebbe lento un accesso in piÃ¹ alla tabella fat, ma di solito questa viene caricata in RAM come se fosse una cache, quindi Ã¨ molto piÃ¹ veloce. (se poi il blocco Ã¨ grosso si dovrebbe perdere molto di meno).\nSarebbe lenta perchÃ© il disco dovrebbe andare avanti indietro ogni volta per accedere al blocco successivo.\nAllocazione indicizzata ðŸŸ¨++ Slide allocazione indicizzata\nIn pratica ho un blocco di dati che contiene solamente i blocchi di dati del file, questo permette un accesso diretto molto veloce. PerÃ² non posso avere una lunghezza a piacere del file, perchÃ© il numero di indici in un blocco di dati Ã¨ limitato (prima aveva dimensione a piacere).\nSlide svantaggi vantaggi2\nSOLUZIONE ALLA LIMITAZIONE INDICI:\nConcatenazione blocchi indici\nSlide soluzione concatenazione\nPerÃ² con questa soluzione torno ai problemi di accesso diretto lento e frammentazione delle allocazioni precedenti (â†’ prestazione degrada linearmente con i blocchi)\nMultilivello\nIndice multilivello\nQuesta cosa si puÃ² rendere ricorsiva, la prestazione degrada logaritmicamente, molto poco abbiamo una sorta di albero here.\nGestione dello spazio libero Bitmap Slide allocazione bitmap\nHo praticamente una bitmap con un bit per ogni cluster, per indicare se Ã¨ libero occupato, una soluzioen simile Ã¨ anche utilizzata in Bitmap ðŸŸ© parlando di allocazione di pagine in RAM.\nLista concatenata Slide lista concatenata\nProblemi di frammetazione grossi, dato che i blocchi libero possono praticamente stare ovunque.\nAnche questo metodo lâ€™abbiamo descritto in Paginazione e segmentazione, abbiamo anche una lista di bloccchi liberi per la FAT. ne abbiamo parlato anche in Gestione della memoria per la HEAP, gli algoritmi alla fine sono gli stessi.\nConfronto cluster dati e spazio utilizzato Notiamo che dopo un certo punto se abbiamo un blocco di dati troppo grosso il disco lo utilizziamo poco ma il rate dei dati Ã¨ molto bello. Quindi se ho dati grossi ho buona roba.\nIn UNIX Multi-livello in unix. Ci sono tanti file piccoli e pochi grandi, quelli grandi possono essere anche molto annidati con lâ€™allocazione indicizzata multilivello. I file piccoli sono molto veloci di accedere, sono praticamente subito accessibile\nLink hard e soft Per sistemi FAT questi non sono possibili solitamente. in unix Ã¨ identificato dallâ€™inode, se due cose indicano lo stesso inode ecco che posso creare un link, Ã¨ come se avessi due files per lo stesso inode.\nLa cancellazione logica Ã¨ proprio chiamata unlink, quando lâ€™ultimo nome del file Ã¨ tolto allora il file Ã¨ stato cancellato.\nIl soft link Ã¨ un file, il so capisce che Ã¨ un link, ma non si riferisce allo stesso inode.\nCurare e prevenireðŸŸ¥ Curare il filesystem significa riportare lo stato del filesystem in uno stato coerente, ma non abbiamo garanzie riguardo che i files siano stati tutti salvati correttamente\nil check Ã¨ uno scan completo di tutto il filesystem\nSlide curare fsck\nPraticamente lâ€™eseguibile fsck si va a ricostruire lâ€™albero degl inode, se non câ€™Ã¨ nessuna reference la mette nei lost and found, riporta tutti gli errori di block size e path names.\nPer filesystems che prevengono ,come ext3, prova a vedere tutto come una transazione, quindi va a registrare le operazioni riguardo il filesystem in un singolo file. Dopo ciÃ² si mette a farlo. Ã¨ idempotente.\nSlide transazioni\nConcatenata FAT\n",
  "wordCount" : "1750",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang 'Angelo' Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/filesystem/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Filesystem
    </h1>
    <div class="post-meta">9 min&nbsp;Â·&nbsp;Xuanqiang &#39;Angelo&#39; Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#perch%c3%a9-filesystem" aria-label="PerchÃ© filesystem?">PerchÃ© filesystem?</a></li>
                <li>
                    <a href="#informazioni-dei-files-5-" aria-label="Informazioni dei files (5&#43;) ðŸŸ¨">Informazioni dei files (5+) ðŸŸ¨</a><ul>
                        
                <li>
                    <a href="#lista-degli-attributi" aria-label="Lista degli attributi">Lista degli attributi</a></li></ul>
                </li>
                <li>
                    <a href="#categorizzazione-dei-files-3--" aria-label="Categorizzazione dei files (3) ðŸŸ©-">Categorizzazione dei files (3) ðŸŸ©-</a></li>
                <li>
                    <a href="#files-in-sistemi-operativi-comuni-" aria-label="Files in sistemi operativi comuni ðŸŸ©">Files in sistemi operativi comuni ðŸŸ©</a></li>
                <li>
                    <a href="#tecniche-di-identificazione-dei-file-3-" aria-label="Tecniche di identificazione dei file (3) ðŸŸ©">Tecniche di identificazione dei file (3) ðŸŸ©</a></li>
                <li>
                    <a href="#metodi-di-accesso-comuni-3" aria-label="Metodi di accesso comuni (3)">Metodi di accesso comuni (3)</a></li>
                <li>
                    <a href="#operazioni-sui-files-" aria-label="Operazioni sui files ðŸŸ¨">Operazioni sui files ðŸŸ¨</a></li></ul>
                    
                <li>
                    <a href="#directories" aria-label="Directories">Directories</a><ul>
                        
                <li>
                    <a href="#introduzione-alle-directories-" aria-label="Introduzione alle directories ðŸŸ¨">Introduzione alle directories ðŸŸ¨</a></li>
                <li>
                    <a href="#informazioni-nelle-directories-2-" aria-label="Informazioni nelle directories (2) ðŸŸ¨">Informazioni nelle directories (2) ðŸŸ¨</a></li>
                <li>
                    <a href="#lunghezza-dei-nomi-" aria-label="Lunghezza dei nomi ðŸŸ¨">Lunghezza dei nomi ðŸŸ¨</a></li>
                <li>
                    <a href="#directories-a-grafo-aciclico" aria-label="Directories a grafo aciclico">Directories a grafo aciclico</a></li>
                <li>
                    <a href="#semantica-di-coerenza-" aria-label="Semantica di coerenza ðŸŸ¥">Semantica di coerenza ðŸŸ¥</a></li>
                <li>
                    <a href="#la-struttura" aria-label="La struttura">La struttura</a></li>
                <li>
                    <a href="#inode" aria-label="Inode">Inode</a></li></ul>
                </li>
                <li>
                    <a href="#allocazione" aria-label="Allocazione">Allocazione</a><ul>
                        
                <li>
                    <a href="#master-boot-record-" aria-label="Master Boot Record ðŸŸ¨&#43;">Master Boot Record ðŸŸ¨+</a></li>
                <li>
                    <a href="#struttura-di-una-partizione-5-" aria-label="Struttura di una partizione (5) ðŸŸ©â€”">Struttura di una partizione (5) ðŸŸ©â€”</a></li>
                <li>
                    <a href="#allocazione-contigua" aria-label="Allocazione contiguaðŸŸ©">Allocazione contiguaðŸŸ©</a></li>
                <li>
                    <a href="#allocazione-concatenata-" aria-label="Allocazione concatenata ðŸŸ¨">Allocazione concatenata ðŸŸ¨</a></li>
                <li>
                    <a href="#allocazione-a-file-allocation-table-fat-" aria-label="Allocazione a File Allocation Table (FAT) ðŸŸ¨&#43;">Allocazione a File Allocation Table (FAT) ðŸŸ¨+</a></li>
                <li>
                    <a href="#allocazione-indicizzata-" aria-label="Allocazione indicizzata ðŸŸ¨&#43;&#43;">Allocazione indicizzata ðŸŸ¨++</a></li></ul>
                </li>
                <li>
                    <a href="#gestione-dello-spazio-libero" aria-label="Gestione dello spazio libero">Gestione dello spazio libero</a><ul>
                        
                <li>
                    <a href="#bitmap" aria-label="Bitmap">Bitmap</a></li>
                <li>
                    <a href="#lista-concatenata" aria-label="Lista concatenata">Lista concatenata</a></li>
                <li>
                    <a href="#confronto-cluster-dati-e-spazio-utilizzato" aria-label="Confronto cluster dati e spazio utilizzato">Confronto cluster dati e spazio utilizzato</a></li></ul>
                </li>
                <li>
                    <a href="#in-unix" aria-label="In UNIX">In UNIX</a><ul>
                        
                <li>
                    <a href="#multi-livello-in-unix" aria-label="Multi-livello in unix.">Multi-livello in unix.</a></li>
                <li>
                    <a href="#link-hard-e-soft" aria-label="Link hard e soft">Link hard e soft</a></li>
                <li>
                    <a href="#curare-e-prevenire" aria-label="Curare e prevenireðŸŸ¥">Curare e prevenireðŸŸ¥</a></li>
                <li>
                    <a href="#concatenata" aria-label="Concatenata">Concatenata</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="perchÃ©-filesystem">PerchÃ© filesystem?<a hidden class="anchor" aria-hidden="true" href="#perchÃ©-filesystem">#</a></h3>
<p>Questa Ã¨ l&rsquo;idea presa dall&rsquo;archivio, come se fosse un ufficio che deve tenere delle pratiche ordinate in cartelle e cartelloni.</p>
<p>Lâ€™utilizzo principale Ã¨ dare un <strong>interfaccia comune di accesso ai dispositivi.</strong> perchÃ© dispositivi diversi hanno sotto modi di accedere diversi, questa interfaccia facilita molto l&rsquo;accesso.</p>
<h3 id="informazioni-dei-files-5-">Informazioni dei files (5+) ðŸŸ¨<a hidden class="anchor" aria-hidden="true" href="#informazioni-dei-files-5-">#</a></h3>
<p>Il file Ã¨ <strong>lâ€™unitÃ  logica di memorizzazione</strong>. il formato che c&rsquo;Ã¨ dentro Ã¨ gestito dall&rsquo;applicazione, non dal file system!</p>
<h4 id="lista-degli-attributi">Lista degli attributi<a hidden class="anchor" aria-hidden="true" href="#lista-degli-attributi">#</a></h4>
<pre><code>&lt;img src=&quot;/images/notes/image/universita/ex-notion/Filesystem/Untitled.png&quot; alt=&quot;image/universita/ex-notion/Filesystem/Untitled&quot;&gt;

&lt;img src=&quot;/images/notes/image/universita/ex-notion/Filesystem/Untitled 1.png&quot; alt=&quot;image/universita/ex-notion/Filesystem/Untitled 1&quot;&gt;
</code></pre>
<p>Ci sono un sacco di informazioni memorizzate nei file (un sacco di metadata anche)</p>
<ol>
<li>Nome</li>
<li>Data e ora di accesso o modifica</li>
<li>Informazioni sull&rsquo;ownership e protezione di accesso.</li>
<li>Dimensione del file</li>
<li>TIpo del file</li>
</ol>
<h3 id="categorizzazione-dei-files-3--">Categorizzazione dei files (3) ðŸŸ©-<a hidden class="anchor" aria-hidden="true" href="#categorizzazione-dei-files-3--">#</a></h3>
<ul>
<li>
<p>Tipi di files</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 2.png" alt="image/universita/ex-notion/Filesystem/Untitled 2">
</li>
</ul>
<p>Possiamo andare a distinguere i files a seconda del</p>
<ul>
<li><strong>Contenuto</strong> (se contiene codice oggetto, se contiene dati o informazioni)</li>
<li><strong>Struttura</strong>, se sono plain text sequenze di bytes, oppure dati strutturati come database., e possono anche essere un albero**.**</li>
<li>UNIX: files speciali (blocchi o caratteri), pipes, oltre ai classici files e directories. NOTA: ci sono molte cose che sono viste come files, in unix tutto Ã¨ un file :D.
<ul>
<li>Sono identificati da una coppia di numeri che identificano il device driver</li>
</ul>
</li>
</ul>
<h3 id="files-in-sistemi-operativi-comuni-">Files in sistemi operativi comuni ðŸŸ©<a hidden class="anchor" aria-hidden="true" href="#files-in-sistemi-operativi-comuni-">#</a></h3>
<p>I files sono nati con la metafora dellâ€™ufficio:</p>
<ul>
<li>Archivi di informazione, che vanno aperti e richiusi (messi nella loro collocazione corretta)</li>
</ul>
<p>Ãˆ utile conoscere il tipo di file per capire quale utilizzo andiamo a fare di essa.</p>
<p>Câ€™Ã¨ un tradeoff, se ho tanti tipi di files, il sistema operativo diventa molto piÃ¹ complesso, se ho troppi pochi potrebbero essere troppo generali.</p>
<ul>
<li>
<p>Slide tradeoff tipologie di files</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 3.png" alt="image/universita/ex-notion/Filesystem/Untitled 3">
</li>
</ul>
<h3 id="tecniche-di-identificazione-dei-file-3-">Tecniche di identificazione dei file (3) ðŸŸ©<a hidden class="anchor" aria-hidden="true" href="#tecniche-di-identificazione-dei-file-3-">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 4.png" alt="image/universita/ex-notion/Filesystem/Untitled 4">
<p>Generalmente ci sono 3 modi per riconoscere il tipo di files:</p>
<ul>
<li>Magic numbers</li>
<li>Attributo tipo del filesystem</li>
<li>estensione.</li>
</ul>
<p>Rispettivamente queste tecniche sono utilizzate in:</p>
<ol>
<li>Win (estensioni)</li>
<li>Mac, informazioni aggiuntive sui files</li>
<li>Unix, il magic number allâ€™inizio dei files</li>
</ol>
<ul>
<li>
<p>Slide metodi di riconoscimento nei sistemi di riconoscimento</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 5.png" alt="image/universita/ex-notion/Filesystem/Untitled 5">
</li>
</ul>
<p>Unix riconosce solamente gli eseguibili, in questo senso Ã¨ minimalista.</p>
<p>Col magic number riesce anche a <strong>riconoscere lâ€™architettura target dellâ€™eseguibile</strong>.</p>
<p>Mac OS ha un codice identificativo per un programma che ha creato il file o la risorsa.</p>
<p>Windows guarda l&rsquo;estensione. che solitamente sempre da 3 caratteri. (inizilamente il nome del file aveva solo 8 caratteri.</p>
<h3 id="metodi-di-accesso-comuni-3">Metodi di accesso comuni (3)<a hidden class="anchor" aria-hidden="true" href="#metodi-di-accesso-comuni-3">#</a></h3>
<ul>
<li>
<p>Slide metodi di accesso</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 6.png" alt="image/universita/ex-notion/Filesystem/Untitled 6">
</li>
<li>
<p>seguenziale</p>
</li>
<li>
<p>diretto</p>
</li>
<li>
<p>indicizzato</p>
</li>
</ul>
<p>Uno di particolare interesse Ã¨ <strong>INDICIZZATO</strong>, che si usa spesso per i databases:</p>
<ul>
<li>
<p>Slide metodo di accesso ad indice</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 7.png" alt="image/universita/ex-notion/Filesystem/Untitled 7">
</li>
</ul>
<h3 id="operazioni-sui-files-">Operazioni sui files ðŸŸ¨<a hidden class="anchor" aria-hidden="true" href="#operazioni-sui-files-">#</a></h3>
<ul>
<li>
<p>Slide lista delle operazioni</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 8.png" alt="image/universita/ex-notion/Filesystem/Untitled 8">
</li>
</ul>
<p>Lâ€™apertura Ã¨ una operazione molto costosa, bisogna</p>
<ol>
<li>Trovare i files</li>
<li>Capire se si hanno i permessi corretti per poter leggere, o scrivere sul file.</li>
</ol>
<p>Questo si collega molto bene con la metafora dellâ€™ufficio e con lâ€™archivio. Se ne ho bisogno vado a prendere dallâ€™archivio e la apro se mi serve. Una volta finito lo si rimette apposto.</p>
<ul>
<li>
<p>Note sullâ€™apertura e chiusura dei files</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 9.png" alt="image/universita/ex-notion/Filesystem/Untitled 9">
</li>
</ul>
<h2 id="directories">Directories<a hidden class="anchor" aria-hidden="true" href="#directories">#</a></h2>
<h3 id="introduzione-alle-directories-">Introduzione alle directories ðŸŸ¨<a hidden class="anchor" aria-hidden="true" href="#introduzione-alle-directories-">#</a></h3>
<pre><code>&lt;img src=&quot;/images/notes/image/universita/ex-notion/Filesystem/Untitled 10.png&quot; alt=&quot;image/universita/ex-notion/Filesystem/Untitled 10&quot;&gt;
</code></pre>
<p>Ãˆ quindi un <strong>file speciale</strong> che contiene le informazioni di accesso per la gestione dei files al suo interno.</p>
<p>A seconda dellâ€™implementazione possono essere degli array lineari oppure degli hashtable. (si pensi a quanto possano essere grandi le directories, se uso una lista diventa molto lento, se invece si sa giÃ  che sia piccola si perde del tempo a fare lâ€™hash).</p>
<h3 id="informazioni-nelle-directories-2-">Informazioni nelle directories (2) ðŸŸ¨<a hidden class="anchor" aria-hidden="true" href="#informazioni-nelle-directories-2-">#</a></h3>
<ul>
<li>
<p>Slide informazioni delle directories</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 11.png" alt="image/universita/ex-notion/Filesystem/Untitled 11">
</li>
</ul>
<p>Sono contenuti i-nodes, che sono degli indici per andare a comprendere la struttura dei files.</p>
<p>Ma puÃ² cambiare, questo Ã¨ un fatto implementativo, potrebbe benissimo anche essere messo nelle entries della directory.</p>
<p>UNIX â†’ messe negli i-node</p>
<p>MSDOS â†’ messe nelle dir entries.</p>
<h3 id="lunghezza-dei-nomi-">Lunghezza dei nomi ðŸŸ¨<a hidden class="anchor" aria-hidden="true" href="#lunghezza-dei-nomi-">#</a></h3>
<ul>
<li>Introduzione al problema della lunghezza dei nomi
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 12.png" alt="image/universita/ex-notion/Filesystem/Untitled 12"></li>
</ul>
<p>Anche qui facciamo distinzione fra nomi a lunghezza variabile e nomi fissi, MSDOS al tempo utilizzava nomi fissi con necessariamente estensioni a tre caratteri.</p>
<ul>
<li>Metodi per nomi a lunghezza variabile
Il metodo a Ã¨ preferita, perchÃ© nel secondo devo leggere in fondo per trovare il nome del file
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 13.png" alt="image/universita/ex-notion/Filesystem/Untitled 13"></li>
</ul>
<h3 id="directories-a-grafo-aciclico">Directories a grafo aciclico<a hidden class="anchor" aria-hidden="true" href="#directories-a-grafo-aciclico">#</a></h3>
<p>I files, possono avere piÃ¹ nomi, in questo senso non ho piÃ¹ un albero ma un grafo.</p>
<ul>
<li>Slide struttura grafo aciclico
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 14.png" alt="image/universita/ex-notion/Filesystem/Untitled 14"></li>
</ul>
<h3 id="semantica-di-coerenza-">Semantica di coerenza ðŸŸ¥<a hidden class="anchor" aria-hidden="true" href="#semantica-di-coerenza-">#</a></h3>
<p>Dato che i sistemi moderni sono maggiormente tutti multitasking, vogliamo andare a specificare quando una modifica di un file puÃ² essere vista da un altro processo.</p>
<p><strong>immediato:</strong> questa Ã¨ la semantica che viene utilizzata anche nei sistemi UNIX, una modifica Ã¨ subito vista da altri programmi. Bisogna chiedersi ora come si faccia ad implementare una cosa di  questo genere.</p>
<p><strong>AFS</strong>: Ã¨ un esempio di file system interplanetario, in cui non era possibile fare una semantica imemdiata (i dati erano sparsi in mezzo al mondo). <strong>semantica di coerenza delle sessioni</strong> Ã¨ il nome di questo. ossia il file veniva modificato quando il file era chiuso. Questo era necessario perchÃ© ogni write dovevano rendere traffico sulla rete, era troppa questa sincronizzazione e troppo traffico direi.</p>
<h3 id="la-struttura">La struttura<a hidden class="anchor" aria-hidden="true" href="#la-struttura">#</a></h3>
<h3 id="inode">Inode<a hidden class="anchor" aria-hidden="true" href="#inode">#</a></h3>
<h2 id="allocazione">Allocazione<a hidden class="anchor" aria-hidden="true" href="#allocazione">#</a></h2>
<h3 id="master-boot-record-">Master Boot Record ðŸŸ¨+<a hidden class="anchor" aria-hidden="true" href="#master-boot-record-">#</a></h3>
<ul>
<li>
<p>Slide MBR</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 15.png" alt="image/universita/ex-notion/Filesystem/Untitled 15">
</li>
</ul>
<p>Questo Ã¨ il classico modo di fare partizioni, e si possono fare al massimo 4 partizioni.</p>
<p>Praticamente Ã¨ una prima sezione del disco, che contiene una piccola tavola di partizioni, indice alla partizione attiva e informazioni per fare il boot, poi individua la sezione della partizione col boot, ed esegue quello per caricare il sistema operativo.</p>
<p>Ãˆ utile soprattutto per creare delle aree logiche diverse in cui possono esserci diverse informazioni.</p>
<p>(altro Ã¨ global partitioning table anche GPT, che permette piÃ¹ partizioni)</p>
<h3 id="struttura-di-una-partizione-5-">Struttura di una partizione (5) ðŸŸ©â€”<a hidden class="anchor" aria-hidden="true" href="#struttura-di-una-partizione-5-">#</a></h3>
<pre><code>&lt;img src=&quot;/images/notes/image/universita/ex-notion/Filesystem/Untitled 16.png&quot; alt=&quot;image/universita/ex-notion/Filesystem/Untitled 16&quot;&gt;
</code></pre>
<ul>
<li>
<p>Slide spiegazione sezioni logiche della partizione</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 17.png" alt="image/universita/ex-notion/Filesystem/Untitled 17">
</li>
</ul>
<ol>
<li>Un boot block che c&rsquo;Ã¨ sempre</li>
<li>Superblock contiene informazioni per mount, ad esempio Ã¨ qui che si accorge se Ã¨ stato unmounted o mounted correttamente</li>
<li>Alcune cose per gestire spazio libero ed occupato</li>
<li>Directory root</li>
<li>e poi il filesystem Ã¨ gestito come pare a seconda dei filesystem</li>
</ol>
<h3 id="allocazione-contigua">Allocazione contiguaðŸŸ©<a hidden class="anchor" aria-hidden="true" href="#allocazione-contigua">#</a></h3>
<ul>
<li>
<p>Slide allocazione contigua
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 18.png" alt="image/universita/ex-notion/Filesystem/Untitled 18"></p>
</li>
<li>
<p>Slide svantaggi allocazione contigua
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 19.png" alt="image/universita/ex-notion/Filesystem/Untitled 19"></p>
</li>
</ul>
<p>Contigua nel senso che lo metto nel <strong>blocco di memoria contiguo libero</strong>.</p>
<p>Questo Ã¨ lâ€™implementazione piÃ¹ veloce, facile da indicizzare.</p>
<p>Il problema principale Ã¨ che Ã¨ statico, per esempio non posso allargare il file giallo, si dovrebbe andare a cercare un blocco abbastanza largo per storare questo. Questo Ã¨ il problema principale.</p>
<p>Infatti se ho un filesystem si sola lettura viene utilizzato questa tipologia di allocazione ISO9660</p>
<h3 id="allocazione-concatenata-">Allocazione concatenata ðŸŸ¨<a hidden class="anchor" aria-hidden="true" href="#allocazione-concatenata-">#</a></h3>
<ul>
<li>
<p>Slide allocazione concatenata
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 20.png" alt="image/universita/ex-notion/Filesystem/Untitled 20"></p>
</li>
<li>
<p>Slide vantaggi svantaggi</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 21.png" alt="image/universita/ex-notion/Filesystem/Untitled 21">
</li>
</ul>
<p>In pratica in ogni blocco di dati abbiamo un indice per il prossimo (perÃ² Ã¨ lento perchÃ© sono molto sparsi, perchÃ© devo fare seek e i file vanno in molti posti, per questo dovrei lanciare defrags molto spesso, ma almeno i file possono crescere ed essere modificati liberamente)</p>
<p>SVANTAGGI:</p>
<ul>
<li>Accesso inefficiente (posso solo inziare dall&rsquo;inizio a scandire, non posso fare un offset)</li>
<li>Ã¨ che i puntatori possono avere un grosso overhead per blocchi di dati piccoli. (e anche l&rsquo;assunzione che il blocco di dati non Ã¨ piÃ¹ una potenza di due).</li>
<li>Seek di file, che vengono dispersi per utto il disco</li>
</ul>
<p>Per limitare la frammentazione dei file e l&rsquo;overhead posso utilizzare <strong>cluster</strong></p>
<ul>
<li>
<p>Slide cluster blocchi</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 22.png" alt="image/universita/ex-notion/Filesystem/Untitled 22">
</li>
</ul>
<h3 id="allocazione-a-file-allocation-table-fat-">Allocazione a File Allocation Table (FAT) ðŸŸ¨+<a hidden class="anchor" aria-hidden="true" href="#allocazione-a-file-allocation-table-fat-">#</a></h3>
<ul>
<li>
<p>Slide FAT
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 23.png" alt="image/universita/ex-notion/Filesystem/Untitled 23"></p>
</li>
<li>
<p>Slide svantaggi e vantaggi</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 24.png" alt="image/universita/ex-notion/Filesystem/Untitled 24">
</li>
</ul>
<p>In pratica ho una tabella apparte che mi dice in che modi i blocchi sono concatenati, in questo modo tolgo lâ€™overhead ai blocchi stessi e posso gestirmi apparte sti puntatori.</p>
<p>Sarebbe lento un accesso in piÃ¹ alla tabella fat, ma di solito questa viene caricata in RAM come se fosse una cache, quindi Ã¨ molto piÃ¹ veloce. (se poi il blocco Ã¨ grosso si dovrebbe perdere molto di meno).</p>
<p>Sarebbe lenta perchÃ© il disco dovrebbe andare avanti indietro ogni volta per accedere al blocco successivo.</p>
<h3 id="allocazione-indicizzata-">Allocazione indicizzata ðŸŸ¨++<a hidden class="anchor" aria-hidden="true" href="#allocazione-indicizzata-">#</a></h3>
<ul>
<li>
<p>Slide allocazione indicizzata</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 25.png" alt="image/universita/ex-notion/Filesystem/Untitled 25">
</li>
</ul>
<p>In pratica ho un blocco di dati che contiene solamente i blocchi di dati del file, questo permette un accesso diretto molto veloce. PerÃ² non posso avere una lunghezza a piacere del file, perchÃ© il numero di indici in un blocco di dati Ã¨ limitato (prima aveva dimensione a piacere).</p>
<ul>
<li>
<p>Slide svantaggi vantaggi2</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 26.png" alt="image/universita/ex-notion/Filesystem/Untitled 26">
</li>
</ul>
<p>SOLUZIONE ALLA LIMITAZIONE INDICI:</p>
<ul>
<li>
<p>Concatenazione blocchi indici</p>
<ul>
<li>
<p>Slide soluzione concatenazione</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 27.png" alt="image/universita/ex-notion/Filesystem/Untitled 27">
</li>
</ul>
<p>PerÃ² con questa soluzione torno ai problemi di accesso diretto lento e frammentazione delle allocazioni precedenti (â†’ prestazione degrada linearmente con i blocchi)</p>
</li>
<li>
<p>Multilivello</p>
<ul>
<li>
<p>Indice multilivello</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 28.png" alt="image/universita/ex-notion/Filesystem/Untitled 28">
</li>
</ul>
<p>Questa cosa si puÃ² rendere ricorsiva, la prestazione degrada logaritmicamente, molto poco abbiamo una sorta di albero here.</p>
</li>
</ul>
<h2 id="gestione-dello-spazio-libero">Gestione dello spazio libero<a hidden class="anchor" aria-hidden="true" href="#gestione-dello-spazio-libero">#</a></h2>
<h3 id="bitmap">Bitmap<a hidden class="anchor" aria-hidden="true" href="#bitmap">#</a></h3>
<ul>
<li>
<p>Slide allocazione bitmap</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 29.png" alt="image/universita/ex-notion/Filesystem/Untitled 29">
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 30.png" alt="image/universita/ex-notion/Filesystem/Untitled 30">
</li>
</ul>
<p>Ho praticamente una bitmap con un bit per ogni cluster, per indicare se Ã¨ libero occupato, una soluzioen simile Ã¨ anche utilizzata in Bitmap ðŸŸ© parlando di allocazione di pagine in RAM.</p>
<h3 id="lista-concatenata">Lista concatenata<a hidden class="anchor" aria-hidden="true" href="#lista-concatenata">#</a></h3>
<ul>
<li>
<p>Slide lista concatenata</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 31.png" alt="image/universita/ex-notion/Filesystem/Untitled 31">
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 32.png" alt="image/universita/ex-notion/Filesystem/Untitled 32">
<p>Problemi di frammetazione grossi, dato che i blocchi libero possono praticamente stare ovunque.</p>
</li>
</ul>
<p>Anche questo metodo l&rsquo;abbiamo descritto in <a href="/notes/paginazione-e-segmentazione/">Paginazione e segmentazione</a>, abbiamo anche una lista di bloccchi liberi per la FAT. ne abbiamo parlato anche in <a href="/notes/gestione-della-memoria/">Gestione della memoria</a> per la HEAP, gli algoritmi alla fine sono gli stessi.</p>
<h3 id="confronto-cluster-dati-e-spazio-utilizzato">Confronto cluster dati e spazio utilizzato<a hidden class="anchor" aria-hidden="true" href="#confronto-cluster-dati-e-spazio-utilizzato">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 33.png" alt="image/universita/ex-notion/Filesystem/Untitled 33">
<p>Notiamo che dopo un certo punto se abbiamo un blocco di dati troppo grosso il disco lo utilizziamo poco ma il rate dei dati Ã¨ molto bello. Quindi se ho dati grossi ho buona roba.</p>
<h2 id="in-unix">In UNIX<a hidden class="anchor" aria-hidden="true" href="#in-unix">#</a></h2>
<h3 id="multi-livello-in-unix">Multi-livello in unix.<a hidden class="anchor" aria-hidden="true" href="#multi-livello-in-unix">#</a></h3>
<p>Ci sono tanti file piccoli e pochi grandi, quelli grandi possono essere anche molto annidati con lâ€™allocazione indicizzata multilivello. I file piccoli sono molto veloci di accedere, sono praticamente subito accessibile</p>
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 34.png" alt="image/universita/ex-notion/Filesystem/Untitled 34">
<h3 id="link-hard-e-soft">Link hard e soft<a hidden class="anchor" aria-hidden="true" href="#link-hard-e-soft">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 35.png" alt="image/universita/ex-notion/Filesystem/Untitled 35">
<p>Per sistemi FAT questi non sono possibili solitamente. in unix Ã¨ identificato dallâ€™inode, se due cose indicano lo stesso inode ecco che posso creare un link, Ã¨ come se avessi due files per lo stesso inode.</p>
<p>La cancellazione logica Ã¨ proprio chiamata <strong>unlink</strong>, quando lâ€™ultimo nome del file Ã¨ tolto allora il file Ã¨ stato cancellato.</p>
<p>Il soft link Ã¨ un file, il so capisce che Ã¨ un link, ma non si riferisce allo stesso inode.</p>
<h3 id="curare-e-prevenire">Curare e prevenireðŸŸ¥<a hidden class="anchor" aria-hidden="true" href="#curare-e-prevenire">#</a></h3>
<p>Curare il filesystem significa riportare lo stato del filesystem in uno stato coerente, ma non abbiamo garanzie riguardo che i files siano stati tutti salvati correttamente</p>
<p>il check Ã¨ uno scan completo di tutto il filesystem</p>
<ul>
<li>
<p>Slide curare fsck</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 36.png" alt="image/universita/ex-notion/Filesystem/Untitled 36">
</li>
</ul>
<p>Praticamente l&rsquo;eseguibile fsck si va a ricostruire lâ€™albero degl inode, se non c&rsquo;Ã¨ nessuna reference la mette nei lost and found, riporta tutti gli errori di block size e path names.</p>
<p>Per filesystems che prevengono ,come ext3, prova a vedere tutto come una transazione, quindi va a registrare le operazioni riguardo il filesystem in un singolo file. Dopo ciÃ² si mette a farlo. Ã¨ <strong>idempotente</strong>.</p>
<ul>
<li>
<p>Slide transazioni</p>
  <img src="/images/notes/image/universita/ex-notion/Filesystem/Untitled 37.png" alt="image/universita/ex-notion/Filesystem/Untitled 37">
</li>
</ul>
<h3 id="concatenata">Concatenata<a hidden class="anchor" aria-hidden="true" href="#concatenata">#</a></h3>
<p>FAT</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/no-tags/">No-Tags</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on x"
            href="https://x.com/intent/tweet/?text=Filesystem&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f&amp;hashtags=no-tags">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f&amp;title=Filesystem&amp;summary=Filesystem&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f&title=Filesystem">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on whatsapp"
            href="https://api.whatsapp.com/send?text=Filesystem%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on telegram"
            href="https://telegram.me/share/url?text=Filesystem&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Filesystem on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Filesystem&u=https%3a%2f%2fflecart.github.io%2fnotes%2ffilesystem%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
