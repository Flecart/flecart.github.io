<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Sezioni Critiche | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="no-tags">
<meta name="description" content="Ripasso Prox: 80
Ripasso: May 21, 2023
Ultima modifica: March 12, 2023 10:00 AM
Primo Abbozzo: October 8, 2022 11:30 AM
Stato: ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ‘
Studi Personali: No
Elementi di ripasso
2 Sezioni Critiche
Introduzione

La parte di un programma che utilizza una o piÃ¹ risorse
condivise viene detta sezione critica (critical section, o CS)
Andiamo in questa altra parte a valutare certe soluzioni:
Programma dâ€™esempio

Vorremmo garantire che a = b invariante. (espressione logica verificata nell&rsquo;esecuzione di questo programma). quindi una coerenza di uno prima dell&rsquo;altro vogliamo.">
<meta name="author" content="Xuanqiang &#39;Angelo&#39; Huang">
<link rel="canonical" href="https://flecart.github.io/notes/sezioni-critiche/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/sezioni-critiche/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>






      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WW6NN2QGKF');
        }
      </script><meta property="og:url" content="https://flecart.github.io/notes/sezioni-critiche/">
  <meta property="og:site_name" content="X. Angelo Huang&#39;s Blog">
  <meta property="og:title" content="Sezioni Critiche">
  <meta property="og:description" content="Ripasso Prox: 80 Ripasso: May 21, 2023 Ultima modifica: March 12, 2023 10:00 AM Primo Abbozzo: October 8, 2022 11:30 AM Stato: ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ‘ Studi Personali: No
Elementi di ripasso 2 Sezioni Critiche Introduzione La parte di un programma che utilizza una o piÃ¹ risorse condivise viene detta sezione critica (critical section, o CS)
Andiamo in questa altra parte a valutare certe soluzioni:
Programma dâ€™esempio Vorremmo garantire che a = b invariante. (espressione logica verificata nellâ€™esecuzione di questo programma). quindi una coerenza di uno prima dellâ€™altro vogliamo.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:tag" content="No-Tags">
      <meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="Sezioni Critiche">
<meta name="twitter:description" content="Ripasso Prox: 80
Ripasso: May 21, 2023
Ultima modifica: March 12, 2023 10:00 AM
Primo Abbozzo: October 8, 2022 11:30 AM
Stato: ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ‘
Studi Personali: No
Elementi di ripasso
2 Sezioni Critiche
Introduzione

La parte di un programma che utilizza una o piÃ¹ risorse
condivise viene detta sezione critica (critical section, o CS)
Andiamo in questa altra parte a valutare certe soluzioni:
Programma dâ€™esempio

Vorremmo garantire che a = b invariante. (espressione logica verificata nell&rsquo;esecuzione di questo programma). quindi una coerenza di uno prima dell&rsquo;altro vogliamo.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Sezioni Critiche",
      "item": "https://flecart.github.io/notes/sezioni-critiche/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Sezioni Critiche",
  "name": "Sezioni Critiche",
  "description": "Ripasso Prox: 80 Ripasso: May 21, 2023 Ultima modifica: March 12, 2023 10:00 AM Primo Abbozzo: October 8, 2022 11:30 AM Stato: ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ‘ Studi Personali: No\nElementi di ripasso 2 Sezioni Critiche Introduzione La parte di un programma che utilizza una o piÃ¹ risorse condivise viene detta sezione critica (critical section, o CS)\nAndiamo in questa altra parte a valutare certe soluzioni:\nProgramma dâ€™esempio Vorremmo garantire che a = b invariante. (espressione logica verificata nell\u0026rsquo;esecuzione di questo programma). quindi una coerenza di uno prima dell\u0026rsquo;altro vogliamo.\n",
  "keywords": [
    "no-tags"
  ],
  "articleBody": "Ripasso Prox: 80 Ripasso: May 21, 2023 Ultima modifica: March 12, 2023 10:00 AM Primo Abbozzo: October 8, 2022 11:30 AM Stato: ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ‘ Studi Personali: No\nElementi di ripasso 2 Sezioni Critiche Introduzione La parte di un programma che utilizza una o piÃ¹ risorse condivise viene detta sezione critica (critical section, o CS)\nAndiamo in questa altra parte a valutare certe soluzioni:\nProgramma dâ€™esempio Vorremmo garantire che a = b invariante. (espressione logica verificata nellâ€™esecuzione di questo programma). quindi una coerenza di uno prima dellâ€™altro vogliamo.\nNon funziona lasciare la gestione dellâ€™invarianza al sistema operativo o al compilatore perchÃ© manca questa informazione (quindi non abbiamo potere per la gestione dellâ€™ordine in questo caso.\nRequisiti per le CS (5) Vogliamo ora cercare di listare le proprietÃ  delle critical sections in modo teorico, per implementare un programma che riesca ad implementare la critical section.\nSlide requisiti\nSafety:\nMutua esclusione, solo uno allâ€™interno della CS No deadlocks Liveness:\nUn processo fuori dalla CS non dovrebbe ritardare lâ€™entrata di un altro programma Un processo eventualmente deve entrarci Altro:\nNessun processo puÃ² terminare in una critical section (secondo me perchÃ© si porterebbe la risorsa critica con sÃ©, nel senso che nessun altro programam puÃ² utilizzarlo, suppongo. Questo si puÃ² associare al principio 4 di Liveness. Algoritmo di Dekker Listo qua in breve le idee principali che daranno vita allâ€™algoritmo\nTurni per disambiguare chi puÃ² entrare e chi vuole entrare Booleani per esprimere il concetto di voler entrare. Dare la precedenza allâ€™altro. Soluzioni provate e non funzionanti Soluzione 1 (busy waiting esterno con i turni)\nNon Ã¨ buona perchÃ© viola il principio 3 del non rallentamento. PuÃ² succedere che nessuno Ã¨ dentro la sezione critica, ma uno non ci puÃ² entrare finchÃ© lâ€™altro non ci entra ed esce (ma puÃ² essere che lâ€™altro sia molto piÃ¹ lento!)\nSoluzione 2 (busy waiting esterno con 2 booleani)\nIl problema Ã¨ che possono entrambi entrare nella soluzione critica, quindi non Ã¨ mutex e quindi non Ã¨ una soluzione\nSoluzione 3 (2 booleani, assegnamento prima)\nPuÃ² accadere un deadlock, viola principio 4\nSoluzione 4 (livelook, assegnamenti nel busy waiting)\nPuÃ² accadere starvation in questo problema nel requisito 4, ossia uno non entra mai.\nlâ€™algoritmo Questo Ã¨ un algoritmo che funziona per implementare le sezioni critiche.\nAndremo in questa parte a considerare moltissime soluzioni che non soddisfano i requisiti esplicitati precedentemente, fino a raggiungere lâ€™algoritmo di dekker. (Questo Ã¨ proprio il processo seguito da Dijkstra nel raggiungimento della soluzione!)\nAlgoritmo di Dekker\nDimostrazione correttezza di Dekker Mutua esclusione\nMutua esclusione\nIn pratica si riduce che in un certo momento deve esserci un momenti in cui uno Ã¨ nella critical section, e il valore di need associato deve essere falso. CiÃ² Ã¨ impossibile, devo essere eseguite entrambe le istruzioni di uscita!\nAssenza di deadlock\nSlide\nAssenza di ritardi\nSlide\nAssenza di starvation\nSlide\nAlgoritmo di Peterson Descrizione dellâ€™algoritmo Slide\nAlgortitmo generalizzato Slide peterson generalizzato (non so perchÃ© funzioni, comunque il prof. lo ha saltato).\nTODO: se vuoi fare bene questo pezzo sarebbe anche Peterson\nÃˆ una cosa molto piÃ¹ compatta rispetto Dekker, e lâ€™idea principale Ã¨ che il turno Ã¨ stabilito prima di entrare nel while\nDimostrazione correttezza di Peterson Mutua esclusione\nSlide\nAssenza deadlock\nSlide\nÃˆ quasi ovvio perchÃ© turn non puÃ² avere due variabili diverse\nAssenza di ritardi\nSlide\nAssenza di starvation\nSlide\nSoluzioni hardware PerchÃ© Ã¨ meglio di software (3) Si preferirebbero delle soluzioni hardware perchÃ© tutte le soluzioni software fanno utilizzo di busy waiting che Ã¨ molto dispendioso.\nDispendioso dal punto di vista della CPU per il busy waiting Difficile da implementare senza bug (difficile da testare) Gestione delle responsabilitÃ  a livello software (cosa che non si vuole) Disabilitazione interrupt (2) CosÃ¬ non posso passare ad un altro processo allâ€™inizio di una sezione critica. (ma câ€™Ã¨ il problema dei multicore perchÃ© dovrei disabilitarlo per tutti!).\nCi sono altri motivi per cui questa Ã¨ una brutta soluzione:\nLasciare la gestione degli interrupt ai programmi perchÃ© agisce sullâ€™intera macchina, ma non dovrebbe avere questo diritto. Multicore dovrebbero essere sincronizzati su questo aspetto (quindi difficoltÃ  di parallelizzazione). Quindi non posso essere interrotto Non funziona su multicore perchÃ© anche se li disabilito su entrambi, puÃ² esser che due processi lavorano sempre con la stessa sezione critica Test \u0026 set (spin lock) Lâ€™hardware ha delle istruzioni in piÃ¹ che aiutano a creare lâ€™implementazione per le sezioni critiche.\nProgramma con test e set\nDimostrazione di correttezza (senza starvation)\nOltre a questo si puÃ² implementare con altre istruzioni atomiche come fetch and set, compare and swap.\nCS con swap e divisione Protocollo entrata con swap\nlock = 0; do { v = 1; swap(v, lock); } while(v); Chiaramente posso entrare quando lock Ã¨ 0, altrimenti lock Ã¨ sempre 1.\nProtocollo entrata con divisione\nlock = 2 do v = \u003c lock /= 2 \u003e while (v != 1) Con questo abbiamo raggiunto una notevole semplificazione nella programmazione (ed anche della generalizzazione di questa soluzione), ma non sono risolti i problemi di starvation nÃ© busy waiting, ancora fortemente inefficiente.\n",
  "wordCount" : "833",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang 'Angelo' Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/sezioni-critiche/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Sezioni Critiche
    </h1>
    <div class="post-meta">4 min&nbsp;Â·&nbsp;Xuanqiang &#39;Angelo&#39; Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#elementi-di-ripasso" aria-label="Elementi di ripasso">Elementi di ripasso</a></li>
                <li>
                    <a href="#2-sezioni-critiche" aria-label="2 Sezioni Critiche">2 Sezioni Critiche</a><ul>
                        
                <li>
                    <a href="#introduzione" aria-label="Introduzione">Introduzione</a><ul>
                        
                <li>
                    <a href="#programma-desempio" aria-label="Programma dâ€™esempio">Programma dâ€™esempio</a></li>
                <li>
                    <a href="#requisiti-per-le-cs-5" aria-label="Requisiti per le CS (5)">Requisiti per le CS (5)</a></li></ul>
                </li>
                <li>
                    <a href="#algoritmo-di-dekker" aria-label="Algoritmo di Dekker">Algoritmo di Dekker</a><ul>
                        
                <li>
                    <a href="#soluzioni-provate-e-non-funzionanti" aria-label="Soluzioni provate e non funzionanti">Soluzioni provate e non funzionanti</a></li>
                <li>
                    <a href="#lalgoritmo" aria-label="lâ€™algoritmo">lâ€™algoritmo</a></li>
                <li>
                    <a href="#dimostrazione-correttezza-di-dekker" aria-label="Dimostrazione correttezza di Dekker">Dimostrazione correttezza di Dekker</a></li></ul>
                </li>
                <li>
                    <a href="#algoritmo-di-peterson" aria-label="Algoritmo di Peterson">Algoritmo di Peterson</a><ul>
                        
                <li>
                    <a href="#descrizione-dellalgoritmo" aria-label="Descrizione dellâ€™algoritmo">Descrizione dellâ€™algoritmo</a></li>
                <li>
                    <a href="#algortitmo-generalizzato" aria-label="Algortitmo generalizzato">Algortitmo generalizzato</a></li>
                <li>
                    <a href="#dimostrazione-correttezza-di-peterson" aria-label="Dimostrazione correttezza di Peterson">Dimostrazione correttezza di Peterson</a></li></ul>
                </li>
                <li>
                    <a href="#soluzioni-hardware" aria-label="Soluzioni hardware">Soluzioni hardware</a><ul>
                        
                <li>
                    <a href="#perch%c3%a9-%c3%a8-meglio-di-software-3" aria-label="PerchÃ© Ã¨ meglio di software (3)">PerchÃ© Ã¨ meglio di software (3)</a></li>
                <li>
                    <a href="#disabilitazione-interrupt-2" aria-label="Disabilitazione interrupt (2)">Disabilitazione interrupt (2)</a></li>
                <li>
                    <a href="#test--set-spin-lock" aria-label="Test &amp; set (spin lock)">Test &amp; set (spin lock)</a></li>
                <li>
                    <a href="#cs-con-swap-e-divisione" aria-label="CS con swap e divisione">CS con swap e divisione</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Ripasso Prox: 80
Ripasso: May 21, 2023
Ultima modifica: March 12, 2023 10:00 AM
Primo Abbozzo: October 8, 2022 11:30 AM
Stato: ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ•ðŸŒ‘
Studi Personali: No</p>
<h1 id="elementi-di-ripasso">Elementi di ripasso<a hidden class="anchor" aria-hidden="true" href="#elementi-di-ripasso">#</a></h1>
<h1 id="2-sezioni-critiche">2 Sezioni Critiche<a hidden class="anchor" aria-hidden="true" href="#2-sezioni-critiche">#</a></h1>
<h2 id="introduzione">Introduzione<a hidden class="anchor" aria-hidden="true" href="#introduzione">#</a></h2>
<blockquote>
<p>La parte di un programma che utilizza una o piÃ¹ risorse
condivise viene detta sezione critica (critical section, o CS)</p></blockquote>
<p>Andiamo in questa altra parte a valutare certe soluzioni:</p>
<h3 id="programma-desempio">Programma dâ€™esempio<a hidden class="anchor" aria-hidden="true" href="#programma-desempio">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled">
<p>Vorremmo garantire che <strong>a = b invariante.</strong> (espressione logica verificata nell&rsquo;esecuzione di questo programma). quindi una coerenza di uno prima dell&rsquo;altro vogliamo.</p>
<p>Non funziona lasciare la gestione dell&rsquo;invarianza al sistema operativo o al compilatore perchÃ© manca questa informazione (quindi non abbiamo potere per la gestione dellâ€™ordine in questo caso.</p>
<h3 id="requisiti-per-le-cs-5">Requisiti per le CS (5)<a hidden class="anchor" aria-hidden="true" href="#requisiti-per-le-cs-5">#</a></h3>
<p>Vogliamo ora cercare di listare le proprietÃ  delle critical sections in modo teorico, per implementare un programma che riesca ad implementare la critical section.</p>
<ul>
<li>
<p>Slide requisiti</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 1.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 1">
</li>
</ul>
<p><strong>Safety</strong>:</p>
<ol>
<li>Mutua esclusione, solo uno all&rsquo;interno della CS</li>
<li>No deadlocks</li>
</ol>
<p><strong>Liveness</strong>:</p>
<ol>
<li>Un processo fuori dalla CS non dovrebbe ritardare lâ€™entrata di un altro programma</li>
<li>Un processo eventualmente deve entrarci</li>
</ol>
<p>Altro:</p>
<ol>
<li>Nessun processo puÃ² terminare in una critical section (secondo me perchÃ© si porterebbe la risorsa critica con sÃ©, nel senso che nessun altro programam puÃ² utilizzarlo, suppongo. Questo si puÃ² associare al principio 4 di Liveness.</li>
</ol>
<h2 id="algoritmo-di-dekker">Algoritmo di Dekker<a hidden class="anchor" aria-hidden="true" href="#algoritmo-di-dekker">#</a></h2>
<p>Listo qua in breve le idee principali che daranno vita allâ€™algoritmo</p>
<ol>
<li>Turni per disambiguare chi puÃ² entrare e chi vuole entrare</li>
<li>Booleani per esprimere il concetto di voler entrare.</li>
<li>Dare la precedenza allâ€™altro.</li>
</ol>
<h3 id="soluzioni-provate-e-non-funzionanti">Soluzioni provate e non funzionanti<a hidden class="anchor" aria-hidden="true" href="#soluzioni-provate-e-non-funzionanti">#</a></h3>
<ul>
<li>
<p>Soluzione 1 (busy waiting esterno con i turni)</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 2.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 2">
<p>Non Ã¨ buona perchÃ© <strong>viola il principio 3</strong> del non rallentamento. PuÃ² succedere che nessuno Ã¨ dentro la sezione critica, ma uno non ci puÃ² entrare finchÃ© lâ€™altro non ci entra ed esce (ma puÃ² essere che lâ€™altro sia molto piÃ¹ lento!)</p>
</li>
<li>
<p>Soluzione 2 (busy waiting esterno con 2 booleani)</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 3.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 3">
<p>Il problema Ã¨ che possono entrambi entrare nella soluzione critica, quindi <strong>non Ã¨ mutex</strong> e quindi non Ã¨ una soluzione</p>
</li>
<li>
<p>Soluzione 3 (2 booleani, assegnamento prima)</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 4.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 4">
<p>PuÃ² accadere un deadlock, <strong>viola principio 4</strong></p>
</li>
<li>
<p>Soluzione 4 (livelook, assegnamenti nel busy waiting)</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 5.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 5">
<p>PuÃ² accadere <strong>starvation</strong> in questo problema nel requisito 4, ossia uno non entra mai.</p>
</li>
</ul>
<h3 id="lalgoritmo">lâ€™algoritmo<a hidden class="anchor" aria-hidden="true" href="#lalgoritmo">#</a></h3>
<p>Questo Ã¨ un algoritmo che funziona per implementare le sezioni critiche.</p>
<p>Andremo in questa parte a considerare moltissime soluzioni che non soddisfano i requisiti esplicitati precedentemente, fino a raggiungere lâ€™algoritmo di dekker. (Questo Ã¨ proprio il processo seguito da Dijkstra nel raggiungimento della soluzione!)</p>
<ul>
<li>
<p>Algoritmo di Dekker</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 6.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 6">
</li>
</ul>
<h3 id="dimostrazione-correttezza-di-dekker">Dimostrazione correttezza di Dekker<a hidden class="anchor" aria-hidden="true" href="#dimostrazione-correttezza-di-dekker">#</a></h3>
<p><strong>Mutua esclusione</strong></p>
<ul>
<li>
<p>Mutua esclusione</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 7.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 7">
</li>
</ul>
<p>In pratica si riduce che in un certo momento deve esserci un momenti in cui uno Ã¨ nella critical section, e il valore di need associato deve essere falso. CiÃ² Ã¨ impossibile, devo essere eseguite entrambe le istruzioni di uscita!</p>
<p><strong>Assenza di deadlock</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 8.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 8">
</li>
</ul>
<p><strong>Assenza di ritardi</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 9.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 9">
</li>
</ul>
<p><strong>Assenza di starvation</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 10.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 10">
</li>
</ul>
<h2 id="algoritmo-di-peterson">Algoritmo di Peterson<a hidden class="anchor" aria-hidden="true" href="#algoritmo-di-peterson">#</a></h2>
<h3 id="descrizione-dellalgoritmo">Descrizione dellâ€™algoritmo<a hidden class="anchor" aria-hidden="true" href="#descrizione-dellalgoritmo">#</a></h3>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 11.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 11">
</li>
</ul>
<h3 id="algortitmo-generalizzato">Algortitmo generalizzato<a hidden class="anchor" aria-hidden="true" href="#algortitmo-generalizzato">#</a></h3>
<ul>
<li>
<p>Slide peterson generalizzato (non so perchÃ© funzioni, comunque il prof. lo ha saltato).</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 12.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 12">
</li>
</ul>
<p>TODO: se vuoi fare bene questo pezzo sarebbe anche Peterson</p>
<p>Ãˆ una cosa molto piÃ¹ compatta rispetto Dekker, e l&rsquo;idea principale Ã¨ che il turno Ã¨ stabilito prima di entrare nel while</p>
<h3 id="dimostrazione-correttezza-di-peterson">Dimostrazione correttezza di Peterson<a hidden class="anchor" aria-hidden="true" href="#dimostrazione-correttezza-di-peterson">#</a></h3>
<p><strong>Mutua esclusione</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 13.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 13">
</li>
</ul>
<p><strong>Assenza deadlock</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 14.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 14">
</li>
</ul>
<p>Ãˆ quasi ovvio perchÃ© <strong>turn non puÃ² avere due variabili diverse</strong></p>
<p><strong>Assenza di ritardi</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 15.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 15">
</li>
</ul>
<p><strong>Assenza di starvation</strong></p>
<ul>
<li>
<p>Slide</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 16.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 16">
</li>
</ul>
<h2 id="soluzioni-hardware">Soluzioni hardware<a hidden class="anchor" aria-hidden="true" href="#soluzioni-hardware">#</a></h2>
<h3 id="perchÃ©-Ã¨-meglio-di-software-3">PerchÃ© Ã¨ meglio di software (3)<a hidden class="anchor" aria-hidden="true" href="#perchÃ©-Ã¨-meglio-di-software-3">#</a></h3>
<p>Si preferirebbero delle soluzioni hardware perchÃ© tutte le soluzioni software fanno utilizzo di busy waiting che Ã¨ molto dispendioso.</p>
<ul>
<li>Dispendioso dal punto di vista della CPU per il busy waiting</li>
<li>Difficile da implementare senza bug (difficile da testare)</li>
<li>Gestione delle responsabilitÃ  a livello software (cosa che non si vuole)</li>
</ul>
<h3 id="disabilitazione-interrupt-2">Disabilitazione interrupt (2)<a hidden class="anchor" aria-hidden="true" href="#disabilitazione-interrupt-2">#</a></h3>
<p>CosÃ¬ non posso passare ad un altro processo all&rsquo;inizio di una sezione critica. (ma c&rsquo;Ã¨ il problema dei multicore perchÃ© dovrei disabilitarlo per tutti!).</p>
<p>Ci sono altri motivi per cui questa Ã¨ una brutta soluzione:</p>
<ul>
<li>Lasciare la gestione degli interrupt ai programmi perchÃ© agisce sull&rsquo;intera macchina, ma non dovrebbe avere questo diritto.</li>
<li>Multicore dovrebbero essere sincronizzati su questo aspetto (quindi <strong>difficoltÃ  di parallelizzazione</strong>). Quindi non posso essere interrotto</li>
<li>Non funziona su multicore perchÃ© anche se li disabilito su entrambi, puÃ² esser che due processi lavorano sempre con la stessa sezione critica</li>
</ul>
<h3 id="test--set-spin-lock">Test &amp; set (spin lock)<a hidden class="anchor" aria-hidden="true" href="#test--set-spin-lock">#</a></h3>
<p>Lâ€™hardware ha delle istruzioni in piÃ¹ che aiutano a creare lâ€™implementazione per le sezioni critiche.</p>
<img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 17.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 17">
<ul>
<li>
<p>Programma con test e set</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 18.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 18">
</li>
<li>
<p>Dimostrazione di correttezza (senza starvation)</p>
  <img src="/images/notes/image/universita/ex-notion/Sezioni Critiche/Untitled 19.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Sezioni Critiche/Untitled 19">
</li>
</ul>
<p>Oltre a questo si puÃ² implementare con altre istruzioni atomiche come  fetch and set, compare and swap.</p>
<h3 id="cs-con-swap-e-divisione">CS con swap e divisione<a hidden class="anchor" aria-hidden="true" href="#cs-con-swap-e-divisione">#</a></h3>
<ul>
<li>
<p>Protocollo entrata con swap</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">lock</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">v</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">	<span class="n">swap</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">lock</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">while</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
</span></span></code></pre></div><p>Chiaramente posso entrare quando lock Ã¨ 0, altrimenti lock Ã¨ sempre 1.</p>
</li>
<li>
<p>Protocollo entrata con divisione</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="n">lock</span> <span class="o">=</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="k">do</span>
</span></span><span class="line"><span class="cl">	<span class="n">v</span> <span class="o">=</span> <span class="o">&lt;</span> <span class="n">lock</span> <span class="o">/=</span> <span class="mi">2</span> <span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="n">v</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span>
</span></span></code></pre></div></li>
</ul>
<p>Con questo abbiamo raggiunto una notevole semplificazione nella programmazione (ed anche della generalizzazione di questa soluzione), ma non sono risolti i problemi di starvation nÃ© busy waiting, ancora fortemente inefficiente.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/no-tags/">No-Tags</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on x"
            href="https://x.com/intent/tweet/?text=Sezioni%20Critiche&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f&amp;hashtags=no-tags">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f&amp;title=Sezioni%20Critiche&amp;summary=Sezioni%20Critiche&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f&title=Sezioni%20Critiche">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on whatsapp"
            href="https://api.whatsapp.com/send?text=Sezioni%20Critiche%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on telegram"
            href="https://telegram.me/share/url?text=Sezioni%20Critiche&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Sezioni Critiche on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Sezioni%20Critiche&u=https%3a%2f%2fflecart.github.io%2fnotes%2fsezioni-critiche%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
