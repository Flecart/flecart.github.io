<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Confidential Computing | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="☁cloud-computing">
<meta name="description" content="With confidential computing we want to guarantee confidentiality and integrity of a user’s computation
running on a remote (cloud) system, including:

The program
Its inputs and outputs
Intermediate state, control flow, etc.
Even if do not trust the cloud provider!

Introduction to Confidential Computing
The Treat model
Trust relationships

Everyone trusts the hardware
Users do not trust each other
Users DO NOT trust the cloud provider (and its software)
Cloud provider does not trust users

Who has access to what?">
<meta name="author" content="Xuanqiang &#39;Angelo&#39; Huang">
<link rel="canonical" href="https://flecart.github.io/notes/confidential-computing/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css" integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/confidential-computing/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>






      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WW6NN2QGKF');
        }
      </script><meta property="og:url" content="https://flecart.github.io/notes/confidential-computing/">
  <meta property="og:site_name" content="X. Angelo Huang&#39;s Blog">
  <meta property="og:title" content="Confidential Computing">
  <meta property="og:description" content="With confidential computing we want to guarantee confidentiality and integrity of a user’s computation running on a remote (cloud) system, including:
The program Its inputs and outputs Intermediate state, control flow, etc. Even if do not trust the cloud provider! Introduction to Confidential Computing The Treat model Trust relationships
Everyone trusts the hardware Users do not trust each other Users DO NOT trust the cloud provider (and its software) Cloud provider does not trust users Who has access to what?">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:tag" content="☁Cloud-Computing">
      <meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="Confidential Computing">
<meta name="twitter:description" content="With confidential computing we want to guarantee confidentiality and integrity of a user’s computation
running on a remote (cloud) system, including:

The program
Its inputs and outputs
Intermediate state, control flow, etc.
Even if do not trust the cloud provider!

Introduction to Confidential Computing
The Treat model
Trust relationships

Everyone trusts the hardware
Users do not trust each other
Users DO NOT trust the cloud provider (and its software)
Cloud provider does not trust users

Who has access to what?">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Confidential Computing",
      "item": "https://flecart.github.io/notes/confidential-computing/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Confidential Computing",
  "name": "Confidential Computing",
  "description": "With confidential computing we want to guarantee confidentiality and integrity of a user’s computation running on a remote (cloud) system, including:\nThe program Its inputs and outputs Intermediate state, control flow, etc. Even if do not trust the cloud provider! Introduction to Confidential Computing The Treat model Trust relationships\nEveryone trusts the hardware Users do not trust each other Users DO NOT trust the cloud provider (and its software) Cloud provider does not trust users Who has access to what?\n",
  "keywords": [
    "☁cloud-computing"
  ],
  "articleBody": "With confidential computing we want to guarantee confidentiality and integrity of a user’s computation running on a remote (cloud) system, including:\nThe program Its inputs and outputs Intermediate state, control flow, etc. Even if do not trust the cloud provider! Introduction to Confidential Computing The Treat model Trust relationships\nEveryone trusts the hardware Users do not trust each other Users DO NOT trust the cloud provider (and its software) Cloud provider does not trust users Who has access to what?\nUsers do not have physical access to hardware Cloud provider has physical access How can you protect memory and CPU while it is running on an untrusted machine? If it was only data or transmission, then encryption would have been a solution, but in this case, we do not trust this.\nWe use trusted computing environments or homomorphic encryption, which means computing on encrypted data, but this is still not scalable, other is automatic verification of software and hardware isolation.\nSee Notions of Security for other treat models for cloud and enterprise systems\nWhy isolation? Workloads must be isolated both for security (so one workload cannot access, or infer, data belonging to another workload), and for operational concerns (so the noisy neighbor effect of one workload cannot cause other workloads to run more slowly). ~(Agache et al. 2020)\nTrusted Platform modules Trusted Execution Environments Trust some (hopefully small) remote hardware and software\nTrusted hardware element (e.g., TPM chip) Measures (≈hashes) privileged software Attests (≈signs hash) to a remote user Incorrect attestation → compromised software Allows the user to detect if TCB is tampered, and act accordingly. Here the prevention is relies on the user, but it does not prevents these kinds of attacks. Secure Boot Secure boot: check system integrity before running software\nCertify system to external user TPM is a specialized chip that stores encryption keys specific to the host system for hardware authentication\nGoals: secure attestation and key management Measure \u0026 examine state, send signed certification Example: measure BIOS sha256 to match the expected signature (detect tampers). In google, this chip is called titan. Before running any code, we want to have a trusted system, this chip allows to check for this.\nConfidential Computing key ingredients CPU root of trust Cryptographic keys and secure boot Attestation infrastructure Privileged execution environment Can be implemented with different forms, e.g.: Extended microcode (e.g., Intel SGX enclaves) Legacy applications can run only if you change the code. Platform security processor (e.g., AMD SEV confidential VM) Trusted firmware New CPU protection mode (e.g., Intel TXT confidential VM, Arm CCA confidential VM) Trusted software (“monitor”) runs below a de-privileged hypervisor Memory encryption Protects against physical attacks on DRAM Varying degrees of integrity protection Hardware security If some software is implemented on bare metal, and it’s secure it reduces the trusted code base, so we have lesser attack vectors, and we have faster runtime, since it is usually faster in hardware. But not everything is implementable in a scalable manner in hardware, we need to take into account also other factors.\nCHERI Memory Capabilities CHERI stands for Capability Hardware Enhanced RISC Instructions, first chip that implements capabilities in hardware, for fat pointers, i.e. they know where is it possible to read and write.\nOne problem is\nSoftware compability often you need to rewrite parts of your code Revoking: it is still difficult to revoke and reissue all the capabilities. More cache pressure, since memory is larger. But now we can check every read, it is like a sandboxed environment.\nNitro System AWS has AWS Nitro, which is a hardware assisted hypervisor, see document.\nSlide from CCA 2025 ETHz course.\nNitro Cards Custom silicon implementing data encryption for networking and storage Use hardware offload engines with secure key storage integrated in the SoC Encryption keys are only present in plaintext in the protected volatile memory of the Nitro Cards Keys are inaccessible to AWS operators or customer code running on host CPUs A Nitro Card can be sub-divided into multiple virtual functions with SR-IOV (see Virtual Machines and Datacenter Hardware) Nitro Security Chip The Nitro Security Chip is a custom hardware component that provides a secure environment for the Nitro System.\nDevice integrated into the server’s system main board During system boot/reset, controls physical reset pins Ensures Nitro controller completes its secure boot and verifies integrity of the BIOS and system firmware before any processing on CPU can begin To support bare-metal EC2 VMs, Nitro Security chip ensures the host CPU cannot update firmware in bare-metal mode Nitro Hypervisor Nitro Hypervisor code is a cryptographically signed firmware-like component stored on encrypted local storage:\nBy design, the hypervisor is not a general-purpose system: it has no network stack, no file system, no interactive shell → relies instead on physically isolated Nitro cards for I/O → eliminates entire classes of bugs, such as remote networking attacks → even in the unlikely case of a bug, the lack of standard features like interactive shells and file systems makes it a difficult environment for attackers to exploit (not very nice environment). Intel SGX The primary goal of SGX is to protect code and data at runtime, shielding it from:\nMalicious OS/hypervisor (e.g., rootkits). Physical attacks (to some extent, like memory sniffing). Rogue privileged processes. Enclaves An enclave is a protected area of memory that is isolated from the rest of the system. It can only be accessed by the code running inside it, and it is protected from other processes, including the operating system and hypervisor.\nMemory Encryption Engine The Memory Encryption Engine (MEE) is a hardware component that encrypts memory pages before they are written to DRAM and decrypts them when they are read back into the CPU. This helps protect against physical attacks on memory. It also maintains a memory integrity tree similar to Merkle Trees.\nEnclave Page Cache The Enclave Page Cache (EPC) is a protected area of memory that is used to store the code and data of an SGX enclave. The EPC is encrypted and can only be accessed by the CPU. Usually it has a size of about 128MB\nReferences [1] Agache et al. “Firecracker: Lightweight Virtualization for Serverless Applications” 17th USENIX Symposium on Networked Systems Design and Implementation (NSDI 20) 2020 ",
  "wordCount" : "1038",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang 'Angelo' Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/confidential-computing/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Confidential Computing
    </h1>
    <div class="post-meta">5 min&nbsp;·&nbsp;Xuanqiang &#39;Angelo&#39; Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul><ul>
                <li>
                    <a href="#introduction-to-confidential-computing" aria-label="Introduction to Confidential Computing">Introduction to Confidential Computing</a><ul>
                        
                <li>
                    <a href="#the-treat-model" aria-label="The Treat model">The Treat model</a></li>
                <li>
                    <a href="#why-isolation" aria-label="Why isolation?">Why isolation?</a></li></ul>
                </li>
                <li>
                    <a href="#trusted-platform-modules" aria-label="Trusted Platform modules">Trusted Platform modules</a><ul>
                        
                <li>
                    <a href="#trusted-execution-environments" aria-label="Trusted Execution Environments">Trusted Execution Environments</a></li>
                <li>
                    <a href="#secure-boot" aria-label="Secure Boot">Secure Boot</a></li>
                <li>
                    <a href="#confidential-computing-key-ingredients" aria-label="Confidential Computing key ingredients">Confidential Computing key ingredients</a></li>
                <li>
                    <a href="#hardware-security" aria-label="Hardware security">Hardware security</a></li>
                <li>
                    <a href="#cheri-memory-capabilities" aria-label="CHERI Memory Capabilities">CHERI Memory Capabilities</a></li></ul>
                </li>
                <li>
                    <a href="#nitro-system" aria-label="Nitro System">Nitro System</a><ul>
                        
                <li>
                    <a href="#nitro-cards" aria-label="Nitro Cards">Nitro Cards</a></li>
                <li>
                    <a href="#nitro-security-chip" aria-label="Nitro Security Chip">Nitro Security Chip</a></li>
                <li>
                    <a href="#nitro-hypervisor" aria-label="Nitro Hypervisor">Nitro Hypervisor</a></li></ul>
                </li>
                <li>
                    <a href="#intel-sgx" aria-label="Intel SGX">Intel SGX</a><ul>
                        
                <li>
                    <a href="#enclaves" aria-label="Enclaves">Enclaves</a></li>
                <li>
                    <a href="#memory-encryption-engine" aria-label="Memory Encryption Engine">Memory Encryption Engine</a></li>
                <li>
                    <a href="#enclave-page-cache" aria-label="Enclave Page Cache">Enclave Page Cache</a></li></ul>
                </li></ul>
                    </ul>
                    
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>With confidential computing we want to guarantee confidentiality and integrity of a user’s computation
running on a remote (cloud) system, including:</p>
<ul>
<li>The program</li>
<li>Its inputs and outputs</li>
<li>Intermediate state, control flow, etc.
Even <strong>if do not trust the cloud provider</strong>!</li>
</ul>
<h3 id="introduction-to-confidential-computing">Introduction to Confidential Computing<a hidden class="anchor" aria-hidden="true" href="#introduction-to-confidential-computing">#</a></h3>
<h4 id="the-treat-model">The Treat model<a hidden class="anchor" aria-hidden="true" href="#the-treat-model">#</a></h4>
<p><strong>Trust relationships</strong></p>
<ul>
<li>Everyone trusts the hardware</li>
<li>Users do not trust each other</li>
<li>Users <strong>DO NOT</strong> trust the cloud provider (and its software)</li>
<li>Cloud provider does not trust users</li>
</ul>
<p>Who has access to what?</p>
<ul>
<li>Users do not have physical access to hardware</li>
<li>Cloud provider has physical access</li>
</ul>
<p>How can you protect memory and CPU while it is running on an untrusted machine? If it was only data or transmission, then encryption would have been a solution, but in this case, we do not trust this.</p>
<p>We use <strong>trusted computing environments</strong> or <strong>homomorphic encryption</strong>, which means computing on encrypted data, but this is still not scalable, other is automatic verification of software and hardware isolation.</p>
<p>See <a href="/notes/notions-of-security">Notions of Security</a> for other treat models for cloud and enterprise systems</p>
<h4 id="why-isolation">Why isolation?<a hidden class="anchor" aria-hidden="true" href="#why-isolation">#</a></h4>
<blockquote>
<p>Workloads must be isolated both for security (so one workload
cannot access, or infer, data belonging to another workload),
and for operational concerns (so the noisy neighbor effect
of one workload cannot cause other workloads to run more
slowly). ~<a href="https://www.usenix.org/conference/nsdi20/presentation/agache">(Agache et al. 2020)</a></p></blockquote>
<h3 id="trusted-platform-modules">Trusted Platform modules<a hidden class="anchor" aria-hidden="true" href="#trusted-platform-modules">#</a></h3>
<h4 id="trusted-execution-environments">Trusted Execution Environments<a hidden class="anchor" aria-hidden="true" href="#trusted-execution-environments">#</a></h4>
<p>Trust some (hopefully small) remote hardware and software</p>
<ul>
<li>Trusted hardware element (e.g., TPM chip)
<ol>
<li>Measures (≈hashes) privileged software</li>
<li>Attests (≈signs hash) to a remote user
Incorrect attestation → compromised software
Allows the user to <strong>detect</strong> if TCB is tampered, and act accordingly. Here the prevention is relies on the user, but it does not prevents these kinds of attacks.</li>
</ol>
</li>
</ul>
<h4 id="secure-boot">Secure Boot<a hidden class="anchor" aria-hidden="true" href="#secure-boot">#</a></h4>
<p>Secure boot: check system integrity before running software</p>
<ul>
<li>Certify system to <strong>external user</strong></li>
</ul>
<p>TPM is a specialized chip that stores encryption keys specific to the <em>host system</em> for hardware authentication</p>
<ul>
<li>Goals: <strong>secure attestation</strong> and <strong>key management</strong></li>
<li>Measure &amp; examine state, send signed certification</li>
<li>Example: measure BIOS sha256 to match the expected signature (<strong>detect tampers</strong>).</li>
</ul>
<p>In google, this chip is called <strong>titan</strong>.
Before running any code, we want to have a trusted system, this chip allows to check for this.</p>
<h4 id="confidential-computing-key-ingredients">Confidential Computing key ingredients<a hidden class="anchor" aria-hidden="true" href="#confidential-computing-key-ingredients">#</a></h4>
<ol>
<li>CPU root of trust
<ul>
<li>Cryptographic keys and secure boot</li>
</ul>
</li>
<li>Attestation infrastructure</li>
<li>Privileged execution environment
Can be implemented with different forms, e.g.:
<ul>
<li>Extended microcode (e.g., Intel SGX enclaves)
<ul>
<li>Legacy applications can run only if you change the code.</li>
</ul>
</li>
<li>Platform security processor (e.g., AMD SEV confidential VM)
<ul>
<li>Trusted firmware</li>
</ul>
</li>
<li>New CPU protection mode (e.g., Intel TXT confidential VM, Arm CCA confidential VM)
<ul>
<li>Trusted software (“monitor”) runs below a de-privileged hypervisor</li>
</ul>
</li>
</ul>
</li>
<li>Memory encryption
<ul>
<li>Protects against physical attacks on DRAM</li>
<li>Varying degrees of integrity protection</li>
</ul>
</li>
</ol>
<h4 id="hardware-security">Hardware security<a hidden class="anchor" aria-hidden="true" href="#hardware-security">#</a></h4>
<p>If some software is implemented on bare metal, and it&rsquo;s secure it <strong>reduces the trusted code base</strong>, so we have lesser attack vectors, and we have <strong>faster runtime</strong>, since it is usually faster in hardware.
But not everything is implementable in a scalable manner in hardware, we need to take into account also other factors.</p>
<h4 id="cheri-memory-capabilities">CHERI Memory Capabilities<a hidden class="anchor" aria-hidden="true" href="#cheri-memory-capabilities">#</a></h4>
<p>CHERI stands for Capability Hardware Enhanced RISC Instructions, first chip that implements <a href="/notes/sicurezza-os">capabilities</a> in hardware, for <strong>fat pointers</strong>, i.e. they know where is it possible to read and write.</p>
<img src="/images/notes/Confidential Computing-20250528102008999.webp" style="width: 100%" class="center" alt="Confidential Computing-20250528102008999">
<p>One problem is</p>
<ul>
<li><strong>Software compability</strong> often you need to rewrite parts of your code</li>
<li><strong>Revoking</strong>: it is still difficult to revoke and reissue all the capabilities.</li>
<li><strong>More cache pressure</strong>, since memory is larger.</li>
</ul>
<p>But now we can check every read, it is like a <strong>sandboxed environment</strong>.</p>
<h3 id="nitro-system">Nitro System<a hidden class="anchor" aria-hidden="true" href="#nitro-system">#</a></h3>
<p>AWS has <strong>AWS Nitro</strong>, which is a <strong>hardware assisted hypervisor</strong>, see <a href="https://docs.aws.amazon.com/pdfs/whitepapers/latest/security-design-of-aws-nitro-system/security-design-of-aws-nitro-system.pdf">document</a>.</p>
<figure class="center">
<img src="/images/notes/Confidential Computing-20250528100515607.webp" style="width: 100%"   alt="Confidential Computing-20250528100515607" title="Confidential Computing-20250528100515607"/>
<figcaption><p style="text-align:center;">Slide from CCA 2025 ETHz course.</p></figcaption>
</figure>
<h4 id="nitro-cards">Nitro Cards<a hidden class="anchor" aria-hidden="true" href="#nitro-cards">#</a></h4>
<ul>
<li>Custom silicon implementing data encryption for networking and storage
<ul>
<li>Use hardware offload engines with secure key storage integrated in the SoC</li>
<li>Encryption keys are only present in plaintext in the protected <strong>volatile memory</strong> of the Nitro Cards</li>
</ul>
</li>
<li>Keys are inaccessible to AWS operators or customer code running on host CPUs</li>
<li>A Nitro Card can be sub-divided into multiple virtual functions with SR-IOV (see <a href="/notes/virtual-machines">Virtual Machines</a> and <a href="/notes/datacenter-hardware">Datacenter Hardware</a>)</li>
</ul>
<h4 id="nitro-security-chip">Nitro Security Chip<a hidden class="anchor" aria-hidden="true" href="#nitro-security-chip">#</a></h4>
<p>The Nitro Security Chip is a custom hardware component that provides a secure environment for the Nitro System.</p>
<ul>
<li>Device integrated into the server’s system main board</li>
<li>During system boot/reset, controls physical reset pins</li>
<li>Ensures Nitro controller completes its secure boot and verifies integrity of the BIOS
and system firmware before any processing on CPU can begin</li>
<li>To support bare-metal EC2 VMs, Nitro Security chip ensures the host CPU
cannot update firmware in bare-metal mode</li>
</ul>
<h4 id="nitro-hypervisor">Nitro Hypervisor<a hidden class="anchor" aria-hidden="true" href="#nitro-hypervisor">#</a></h4>
<p>Nitro Hypervisor code is a cryptographically signed firmware-like component stored on encrypted local storage:</p>
<ul>
<li>By design, the hypervisor is not a general-purpose system: it has no network stack, no file system, no interactive shell
→ relies instead on physically isolated Nitro cards for I/O
→ eliminates entire classes of bugs, such as remote networking attacks
→ even in the unlikely case of a bug, the lack of standard features like interactive shells and file systems makes it a difficult environment for attackers to exploit (not very nice environment).</li>
</ul>
<h3 id="intel-sgx">Intel SGX<a hidden class="anchor" aria-hidden="true" href="#intel-sgx">#</a></h3>
<p>The primary goal of SGX is to protect code and data at runtime, shielding it from:</p>
<ul>
<li>Malicious OS/hypervisor (e.g., rootkits).</li>
<li>Physical attacks (to some extent, like memory sniffing).</li>
<li>Rogue privileged processes.</li>
</ul>
<h4 id="enclaves">Enclaves<a hidden class="anchor" aria-hidden="true" href="#enclaves">#</a></h4>
<p>An <strong>enclave</strong> is a protected area of memory that is isolated from the rest of the system. It can only be accessed by the code running inside it, and it is protected from other processes, including the operating system and hypervisor.</p>
<h4 id="memory-encryption-engine">Memory Encryption Engine<a hidden class="anchor" aria-hidden="true" href="#memory-encryption-engine">#</a></h4>
<p>The Memory Encryption Engine (MEE) is a hardware component that encrypts memory pages before they are written to DRAM and decrypts them when they are read back into the CPU. This helps protect against physical attacks on memory.
It also maintains a <strong>memory integrity tree</strong> similar to <a href="/notes/merkle-trees">Merkle Trees</a>.</p>
<h4 id="enclave-page-cache">Enclave Page Cache<a hidden class="anchor" aria-hidden="true" href="#enclave-page-cache">#</a></h4>
<p>The Enclave Page Cache (EPC) is a protected area of memory that is used to store the code and data of an SGX enclave. The EPC is encrypted and can only be accessed by the CPU.
Usually it has a size of about 128MB</p>
<h1 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h1>
<p id=agacheFirecrackerLightweightVirtualization2020a>[1] Agache et al. <a href="https://www.usenix.org/conference/nsdi20/presentation/agache">“Firecracker: Lightweight Virtualization for Serverless Applications”</a> 17th USENIX Symposium on Networked Systems Design and Implementation (NSDI 20)  2020
 </p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/cloud-computing/">☁Cloud-Computing</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on x"
            href="https://x.com/intent/tweet/?text=Confidential%20Computing&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f&amp;hashtags=%e2%98%81cloud-computing">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f&amp;title=Confidential%20Computing&amp;summary=Confidential%20Computing&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f&title=Confidential%20Computing">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on whatsapp"
            href="https://api.whatsapp.com/send?text=Confidential%20Computing%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on telegram"
            href="https://telegram.me/share/url?text=Confidential%20Computing&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Confidential Computing on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Confidential%20Computing&u=https%3a%2f%2fflecart.github.io%2fnotes%2fconfidential-computing%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
