<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Inheritance | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="programming-languages">
<meta name="description" content="Introduction to Inheritance
Difference between Inheritance and Subtyping
We say that a subclass is inheritance and subtyping.
We have studied subtyping in Typing and Subtyping and it entails mainly two things:

Liskov Substitution
Polymorphism of the types

While inheritance is just the code reuse and specialization.
Another example of code reuse can be the “has-a” relation composition, which couples two objects together.
With aggregations, we can also see delegation calls, when you have a class, and call a method of that class.
">
<meta name="author" content="
By Xuanqiang Angelo Huang">
<link rel="canonical" href="https://flecart.github.io/notes/inheritance/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f790d9af969c56c079c1ce2d5972a04486bf3d6144295d5fba319830e1e55a7a.css" integrity="sha256-95DZr5acVsB5wc4tWXKgRIa/PWFEKV1fujGYMOHlWno=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/inheritance/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>






      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WW6NN2QGKF');
        }
      </script><meta property="og:url" content="https://flecart.github.io/notes/inheritance/">
  <meta property="og:site_name" content="X. Angelo Huang&#39;s Blog">
  <meta property="og:title" content="Inheritance">
  <meta property="og:description" content="Introduction to Inheritance Difference between Inheritance and Subtyping We say that a subclass is inheritance and subtyping. We have studied subtyping in Typing and Subtyping and it entails mainly two things:
Liskov Substitution Polymorphism of the types While inheritance is just the code reuse and specialization. Another example of code reuse can be the “has-a” relation composition, which couples two objects together. With aggregations, we can also see delegation calls, when you have a class, and call a method of that class. ">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2025-10-09T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-10-09T00:00:00+00:00">
    <meta property="article:tag" content="Programming-Languages">
      <meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="Inheritance">
<meta name="twitter:description" content="Introduction to Inheritance
Difference between Inheritance and Subtyping
We say that a subclass is inheritance and subtyping.
We have studied subtyping in Typing and Subtyping and it entails mainly two things:

Liskov Substitution
Polymorphism of the types

While inheritance is just the code reuse and specialization.
Another example of code reuse can be the “has-a” relation composition, which couples two objects together.
With aggregations, we can also see delegation calls, when you have a class, and call a method of that class.
">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Inheritance",
      "item": "https://flecart.github.io/notes/inheritance/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Inheritance",
  "name": "Inheritance",
  "description": "Introduction to Inheritance Difference between Inheritance and Subtyping We say that a subclass is inheritance and subtyping. We have studied subtyping in Typing and Subtyping and it entails mainly two things:\nLiskov Substitution Polymorphism of the types While inheritance is just the code reuse and specialization. Another example of code reuse can be the “has-a” relation composition, which couples two objects together. With aggregations, we can also see delegation calls, when you have a class, and call a method of that class. ",
  "keywords": [
    "programming-languages"
  ],
  "articleBody": "Introduction to Inheritance Difference between Inheritance and Subtyping We say that a subclass is inheritance and subtyping. We have studied subtyping in Typing and Subtyping and it entails mainly two things:\nLiskov Substitution Polymorphism of the types While inheritance is just the code reuse and specialization. Another example of code reuse can be the “has-a” relation composition, which couples two objects together. With aggregations, we can also see delegation calls, when you have a class, and call a method of that class. Type relations between Mutable and Immutable The cleanest solution between these two methods is just to separate the interfaces since:\nIf Mutable \u003c Immutable, we violate behavioural subtyping. If Immutable \u003c Mutable, we violate the syntactic subtyping, since mutable is wider interface usually (not always!). Java has a bad design because Immutable \u003c Mutable.\nSeparation can be done in two ways usually:\nAggregation with delegation (this is not a bad idea actually). This solution might lead to lots of boilerplate code. Access methods for local methods. Common superclass. We can also inherit without subtyping (like C++ does support that with private or protected inheritance, but not safely, also Eiffel). Inheritance might be sometimes unnecessary. Suggestions for good code We should not change to dynamically-bound methods, this can lead to many kinds of unexpected behaviours. We should not inherit from classes that change often. Use subclassing only if there is an “is-a” relation: Focus on Syntactic and behavioral subtypes. Do not rely on implementation details: Use precise documentation (contracts where possible). When evolving superclasses, do not mess around with dynamically-bound methods: Do not add or remove calls, or change the order of calls. Do not specialize superclasses that are expected to change often. Method Resolution Languages differ in method resolution in classes, you need to be able to resolve them correctly yourself, the main difference between the methods we explored are the following:\nJava:\nChooses most type specific method among the hierarchy\nThis means method declaration in all possible overloads.\nFirst looks at the static declaration of the function, if it’s not present, then you can already return the error\nCheck if the function is accessible at that level.\nDynamic binding, that is the standard in Java, but you could also have static methods. This is enough to generate the bytecode.\nAt run time we:\nCompute receiver reference, then we can look at the class of the receiver (going up in the class hierarchy, and finding the most specific type). C#\nThis is bound statically. Chooses the most specific method in the class of the receiver. Impotant to control the override if we want methods to behave effectively.\nBinary Methods For standard binary methods like equal to, we would like the subtype to have the same parameter of itself, but we know that this is not typesafe. We now want some methods to resolve these.\nType Tests We could make explicit type tests, and get the more general value, for example: boolean equals(Object o) { if (o instanceof Circle) { Circle c = (Circle) o; // check equality } else return false; } But this is very very tedious to write, and check everytime. Luckily nowadays we have copilots.\nProblems- Tedious to write- Code is not extensible- Requires type cast\nVisitor Patterns Double invocation, also called the visitor patter, see Design patterns. class Shape { Shape intersect( Shape s ){ return s.intersectShape( this ); } Shape intersectShape( Shape s ){ // general code for all shapes } Shape intersectRectangle( Rectangle r ){ return intersectShape( r ); } } We call more specialized methods.\nOverloading Overloading and Dynamic resolution of the method, but we are not solving the typesafety problem. class Shape { Shape intersect( Shape s ) { // general code for all shapes } } class Rectangle : Shape { Rectangle intersect( Rectangle r ) { // efficient code for two rectangles } } static Shape intersect( Shape s1, Shape s2 ) { return( s1 as dynamic ).intersect( s2 as dynamic ); } In this case, the method is resolved to the Rectangle only if both methods are Rectangle, if any of them, or if I remove the dynamic resolution of any of the methods then, it will call the Shape method.\nMultiple Dispatch This is relatively a new method to handle the dispatch of the methods. It is implemented in languages like, CLU, Cecil, Fortress, MultiJava, not any that I know of.\nProblems Performance overhead of method look-up at run time Extra requirements are needed to ensure there is a“unique best method” for every call I would also personally add that it would be difficult and expensive to implement everything. This has a drawback.\nInformation Hiding Basic Principles Hide implementation details Reduce dependencies between modules Classes can be understood, reused,and modified in isolation. One classical principle is having interfaces and their implementations, in this manner you expose only the contract, or interface in front of it.\nClient Interface Check out here for a discussion. But the rough idea is everything that you need to define the public methods.\nClass name is the unique identifier for a class. Think of it as the title of a blueprint. A class is a template for creating objects, and the class name is how you refer to that template. Type parameters and their bounds This concept relates to generics, which allow you to write classes and methods that can work with any data type. Super-class (also called a parent class or base class) is a class from which another class inherits. This is the core of the “is-a” relationship in inheritance. Super-interfaces is an interface that a class implements or that another interface extends. An interface is like a contract that specifies what a class must do (i.e., what methods it must have) but not how it must do them. Signatures of exported methods and fields This refers to the declarations of the methods and variables (fields) that are accessible from outside the class. “Exported” typically means public, protected, or (in some languages) package-private. anything that isn’t private. Client interface of direct superclass is the set of all public (and protected) methods and fields of the one class it directly inherits from. Subclass Interface This topic describes the special implementation-level relationship between a superclass (parent) and a subclass (child).\nThis “subclass interface” is a special set of tools given only to the subclasses to help them build upon the parent’s functionality. This is most often managed using the protected keyword. It’s the collection of fields and methods that a superclass exposes only to its subclasses, but not to the general public.\nFriend Interface The main idea is that with friends I can access all the private and protected methods of another class.\nThis set of concepts describes a pattern for managing tightly coupled classes—classes that must work together very closely to function.\nThis pattern is about breaking the normal rules of encapsulation (private, public) in a controlled, explicit way, usually for performance or to hide complex internal details.\nJava and Eiffel Access Modifiers Mostly three types of access modifiers that we list here. Also remember that overrides can only be about more visible methods, not less visible ones. The default access level in Java is package-private.\npublic: Client interface\nprotected: Subclass + friend interface (within the same package)\n(Default/Package-Private): Friend interface (within the same package)\nprivate: Implementation\nThis means we can access any variable within the same class only. Eiffel: clients clause in feature declarations\nfeature { ANY }: Client interface (accessible to all classes) feature { T }: Friend interface for class T (accessible only to class T and its descendants) feature { NONE }: Implementation (accessible only by the object itself, using this, and only using the this keyword, and not other keywords, most languages cannot express this) Note: All exports inherently include subclasses (descendants). Overriding or Hiding? class Super {...private void m( ){ System.out.println(“Super”); }public void test( Super v ){ v.m( ); }} class Sub extends Super {public void m( ){ System.out.println(“Sub”); }} Super v = new Sub( );v.test( v ); Private methods cannot be overidden, just hidden. We say override if the method was accessible from the subclass. Fragile Base Class Problem When we change the base class, we might break the subclasses. This makes modification of badly done abstractions very costly, for this reason it would be also suggested to have as few abstaction chains as possible. Here is an example of such a problem:\nclass C {int x;public void inc1( ){ this.inc2( ); }private void inc2( ){ x++; }} class CS extends C {public void inc2( ) { inc1( ); }} CS cs = new CS( 5 );cs.inc2( );System.out.println( cs.x ); If you change from private to protected or public, then you would see the problems!\nMultiple Inheritance The main idea here is when a single type can have several supertypes, which forms a DAG. This allows also for code re-use.\nSimulating Multiple Inheritance Languages like Java or C# do not allow for multiple inheritance. If that is needed, then it is simulated with aggregation.\nImage from the course slides\nProblems with Multiple Inheritance Diamond Problem: The classic problem where a class inherits from two classes that both inherit from a common superclass. This can lead to ambiguity about which inherited properties or methods to use. The main problem here is how to solve the ambiguity. Resolving Ambiguities In C++ the ambiguities are resolved by the client (but its bad since the client needs to know the implementation details, which is not always granted). We can also override both methods, but this is ok only if we are specializing something similar, if their usage is different, then it’s not sure if this is the correct behaviour. Or we can Rename as Eiffel does. But when we have a diamond it’s really difficult. How many fields should we instantiate? Should they be different for the two we have?\nVirtual and Non-Virtual Inheritance Non-Virtual means we will have two copies of the superclass, while virtual means we will have only one copy of the superclass. C++ supports both virtual and non-virtual inheritance. By default it uses non-virtual inheritance, but you can specify virtual inheritance using the virtual keyword, but this adds some runtime overhead (we need to add the virtual keyword in the inheritance part). When virtual is used, the baseclass is called only once, by the smallest subclass.\ngraph TD A --\u003e B A --\u003e C B --\u003e D B --\u003e A2[\"Stack: A/B\"] C --\u003e A3[\"Stack: A/C\"] D --\u003e A4[\"Stack: A/B/C/D\"] graph TD A --\u003e B A --\u003e C B --\u003e D B --\u003e A2[\"Stack: A (p)/B\"] C --\u003e A3[\"Stack: A(p)/C\"] D --\u003e A4[\"Stack: A, pointed by both C/D /B\"] Pros and Cons for Multiple-Inheritance Pros Cons Increases expressiveness Ambiguity resolution - Explicit selection - Merging - Renaming Avoids overhead of delegation pattern Repeated inheritance - Complex semantics - Initialization Complicated! Linearization Mixins and traits provide a form of reuse Methods and state that can be mixed into various classes\nExample: Functionality to persist an object. Python, Ruby, Scala, Squeak Smalltalk. So it’s a different way to add functionality to classes.\nTraits Traits defines a collection of fields and methods (behavior) that can be mixed into classes. It’s a modular building block of functionality, not a concrete “thing” by itself.\nWe have single-inheritance, and bound only to a single class.\nTraints can extend exactly one superclass. They solve the diamond problem with linearization, we will analyze this phenomenon later.\nTraits are very dynamic,which complicates staticreasoning Traits do not know how their superclasses getinitialized Traits do not know which methods they override Traits do not know where super-calls are bound to trait Backup extends Cell { var backup: Int = 0 override def put( v: Int ) = { // Save the old value before calling the next put (super.put) backup = value super.put( v ) } def undo = { super.put( backup ) } } class Cell { var value: Int = 0 def put( v: Int ) = { value = v } def get: Int = value } object Main1 { def main( args: Array[ String ] ) = { val a = new Cell with Backup a.put( 5 ) // value=5, backup=0 a.put( 3 ) // value=3, backup=5 (value before put(3) was 5) a.undo // value is set back to backup (5) println( a.get ) // Output: 5 } } Mathematical Model for Linearization The key concept to understanding the semantics of Scala traits: bring types in a linear order\nDefine overriding and super-calls according to this order (so easy resolution). For a class or trait C extends C’ with C₁ … with Cₙ the linearization L(C) is C, L(Cₙ) • … • L(C₁) • L(C')\n$$ \\epsilon • B = B $$$$ (a, A) • B = \\begin{cases} a, (A • B) \u0026 \\text{if } a \\neq B \\\\ A • B \u0026 \\text{otherwise} \\end{cases} $$Initialization Order Classes and traits are initialized in the reverse linear order\nMeaning that the supertype is initialized before the base class value. The only thing you need to keep in mind is that it is initialized by the preceding class, so if it’s two linearizations behind, you don’t direct control over which parameter will be used there. This order along with the overrides leads to a nice specialization ability of mixing functions.\nMethod Selection with Linearization Slide from Course Slides\nProblems with Traits We don’t know which concrete methods is it overriding, neither which one.\nWe cannot check behavioural subtyping, depends on which one is mixed in. I can only check this subtyping after it has been mixed in. If we mix in in different ways, the type system still thinks they are the same, but they behave differently. ",
  "wordCount" : "2293",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "2025-10-09T00:00:00Z",
  "dateModified": "2025-10-09T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang Angelo Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/inheritance/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Inheritance
    </h1>
    <div class="post-meta"><span title='2025-10-09 00:00:00 +0000 UTC'>October 9, 2025</span>&nbsp;·&nbsp;Reading Time: 11 minutes&nbsp;·&nbsp;
By Xuanqiang Angelo Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#introduction-to-inheritance" aria-label="Introduction to Inheritance">Introduction to Inheritance</a><ul>
                        
                <li>
                    <a href="#difference-between-inheritance-and-subtyping" aria-label="Difference between Inheritance and Subtyping">Difference between Inheritance and Subtyping</a></li>
                <li>
                    <a href="#type-relations-between-mutable-and-immutable" aria-label="Type relations between Mutable and Immutable">Type relations between Mutable and Immutable</a></li>
                <li>
                    <a href="#suggestions-for-good-code" aria-label="Suggestions for good code">Suggestions for good code</a></li>
                <li>
                    <a href="#method-resolution" aria-label="Method Resolution">Method Resolution</a></li></ul>
                </li>
                <li>
                    <a href="#binary-methods" aria-label="Binary Methods">Binary Methods</a><ul>
                        
                <li>
                    <a href="#type-tests" aria-label="Type Tests">Type Tests</a></li>
                <li>
                    <a href="#visitor-patterns" aria-label="Visitor Patterns">Visitor Patterns</a></li>
                <li>
                    <a href="#overloading" aria-label="Overloading">Overloading</a></li>
                <li>
                    <a href="#multiple-dispatch" aria-label="Multiple Dispatch">Multiple Dispatch</a></li></ul>
                </li></ul>
                    
                <li>
                    <a href="#information-hiding" aria-label="Information Hiding">Information Hiding</a><ul>
                        <ul>
                        
                <li>
                    <a href="#basic-principles" aria-label="Basic Principles">Basic Principles</a></li>
                <li>
                    <a href="#client-interface" aria-label="Client Interface">Client Interface</a></li>
                <li>
                    <a href="#subclass-interface" aria-label="Subclass Interface">Subclass Interface</a></li>
                <li>
                    <a href="#friend-interface" aria-label="Friend Interface">Friend Interface</a></li>
                <li>
                    <a href="#java-and-eiffel-access-modifiers" aria-label="Java and Eiffel Access Modifiers">Java and Eiffel Access Modifiers</a></li>
                <li>
                    <a href="#overriding-or-hiding" aria-label="Overriding or Hiding?">Overriding or Hiding?</a></li>
                <li>
                    <a href="#fragile-base-class-problem" aria-label="Fragile Base Class Problem">Fragile Base Class Problem</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#multiple-inheritance" aria-label="Multiple Inheritance">Multiple Inheritance</a><ul>
                        <ul>
                        
                <li>
                    <a href="#simulating-multiple-inheritance" aria-label="Simulating Multiple Inheritance">Simulating Multiple Inheritance</a></li>
                <li>
                    <a href="#problems-with-multiple-inheritance" aria-label="Problems with Multiple Inheritance">Problems with Multiple Inheritance</a></li>
                <li>
                    <a href="#resolving-ambiguities" aria-label="Resolving Ambiguities">Resolving Ambiguities</a></li>
                <li>
                    <a href="#virtual-and-non-virtual-inheritance" aria-label="Virtual and Non-Virtual Inheritance">Virtual and Non-Virtual Inheritance</a></li>
                <li>
                    <a href="#pros-and-cons-for-multiple-inheritance" aria-label="Pros and Cons for Multiple-Inheritance">Pros and Cons for Multiple-Inheritance</a></li></ul>
                    </ul>
                </li>
                <li>
                    <a href="#linearization" aria-label="Linearization">Linearization</a><ul>
                        <ul>
                        
                <li>
                    <a href="#traits" aria-label="Traits">Traits</a></li>
                <li>
                    <a href="#mathematical-model-for-linearization" aria-label="Mathematical Model for Linearization">Mathematical Model for Linearization</a></li>
                <li>
                    <a href="#initialization-order" aria-label="Initialization Order">Initialization Order</a></li>
                <li>
                    <a href="#method-selection-with-linearization" aria-label="Method Selection with Linearization">Method Selection with Linearization</a></li>
                <li>
                    <a href="#problems-with-traits" aria-label="Problems with Traits">Problems with Traits</a>
                </li>
            </ul>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="introduction-to-inheritance">Introduction to Inheritance<a hidden class="anchor" aria-hidden="true" href="#introduction-to-inheritance">#</a></h3>
<h4 id="difference-between-inheritance-and-subtyping">Difference between Inheritance and Subtyping<a hidden class="anchor" aria-hidden="true" href="#difference-between-inheritance-and-subtyping">#</a></h4>
<p>We say that a subclass is inheritance and subtyping.
We have studied subtyping in <a href="/notes/typing-and-subtyping">Typing and Subtyping</a> and it entails mainly two things:</p>
<ul>
<li>Liskov Substitution</li>
<li>Polymorphism of the types</li>
</ul>
<p>While inheritance is just the <strong>code reuse</strong> and specialization.
Another example of code reuse can be the “has-a” relation composition, which couples two objects together.
With aggregations, we can also see <strong>delegation</strong> calls, when you have a class, and call a method of that class.
<img src="/images/notes/Inheritance-20251009104450885.webp" style="width: 100%" class="center" alt="Inheritance-20251009104450885"></p>
<h4 id="type-relations-between-mutable-and-immutable">Type relations between Mutable and Immutable<a hidden class="anchor" aria-hidden="true" href="#type-relations-between-mutable-and-immutable">#</a></h4>
<p>The cleanest solution between these two methods is just to <strong>separate the interfaces</strong> since:</p>
<ul>
<li>If Mutable &lt; Immutable, we violate behavioural subtyping.</li>
<li>If Immutable &lt; Mutable, we violate the syntactic subtyping, since mutable is wider interface usually (not always!).</li>
</ul>
<p>Java has a bad design because Immutable &lt; Mutable.</p>
<p>Separation can be done in two ways usually:</p>
<ol>
<li>Aggregation with delegation (this is not a bad idea actually).
<ol>
<li>This solution might lead to lots of boilerplate code.</li>
<li>Access methods for local methods.</li>
</ol>
</li>
<li>Common superclass.</li>
<li>We can also <em>inherit without subtyping</em> (like C++ does support that with private or protected inheritance, but not safely, also Eiffel).
<ol>
<li>Inheritance might be sometimes unnecessary.</li>
</ol>
</li>
</ol>
<h4 id="suggestions-for-good-code">Suggestions for good code<a hidden class="anchor" aria-hidden="true" href="#suggestions-for-good-code">#</a></h4>
<ul>
<li>We should not change to dynamically-bound methods, this can lead to many kinds of unexpected behaviours.</li>
<li>We should not inherit from classes that change often.</li>
</ul>
<ul>
<li>Use subclassing only if there is an “is-a” relation:
<ul>
<li>Focus on Syntactic and behavioral subtypes.</li>
</ul>
</li>
<li>Do not rely on implementation details:
<ul>
<li>Use precise documentation (contracts where possible).</li>
</ul>
</li>
<li>When evolving superclasses, do not mess around with dynamically-bound methods:
<ul>
<li>Do not add or remove calls, or change the order of calls.</li>
</ul>
</li>
<li>Do not specialize superclasses that are expected to change often.</li>
</ul>
<h4 id="method-resolution">Method Resolution<a hidden class="anchor" aria-hidden="true" href="#method-resolution">#</a></h4>
<p>Languages differ in method resolution in classes, you need to be able to resolve them correctly yourself, the main difference between the methods we explored are the following:</p>
<p><strong>Java</strong>:</p>
<ul>
<li>
<p>Chooses most type specific method among the hierarchy</p>
</li>
<li>
<p>This means method declaration in all possible overloads.</p>
</li>
<li>
<p>First looks at the static declaration of the function, if it&rsquo;s not present, then you can already return the error</p>
</li>
<li>
<p>Check if the function is accessible at that level.</p>
</li>
<li>
<p><strong>Dynamic binding</strong>, that is the standard in Java, but you could also have static methods. This is enough to generate the bytecode.</p>
</li>
</ul>
<p>At run time we:</p>
<ul>
<li>Compute receiver reference, then we can look at the class of the receiver (going up in the class hierarchy, and finding the most specific type).</li>
</ul>
<p><strong>C#</strong></p>
<ul>
<li>This is bound statically.</li>
<li>Chooses the most specific method in the class of the receiver.</li>
</ul>
<p>Impotant to control the override if we want methods to behave effectively.</p>
<h3 id="binary-methods">Binary Methods<a hidden class="anchor" aria-hidden="true" href="#binary-methods">#</a></h3>
<p>For standard binary methods like equal to, we would like the subtype to have the same parameter of itself, but we know that this is not typesafe.
We now want some methods to resolve these.</p>
<h4 id="type-tests">Type Tests<a hidden class="anchor" aria-hidden="true" href="#type-tests">#</a></h4>
<ul>
<li>We could make explicit type tests, and get the more general value, for example:</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kt">boolean</span><span class="w"> </span><span class="nf">equals</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">o</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">Circle</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">Circle</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Circle</span><span class="p">)</span><span class="w"> </span><span class="n">o</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// check equality</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>But this is very very tedious to write, and check everytime. Luckily nowadays we have copilots.</p>
<p>Problems- Tedious to write- Code is not extensible- Requires type cast</p>
<h4 id="visitor-patterns">Visitor Patterns<a hidden class="anchor" aria-hidden="true" href="#visitor-patterns">#</a></h4>
<ul>
<li>Double invocation, also called the <strong>visitor patter</strong>, see <a href="/notes/design-patterns">Design patterns</a>.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Shape</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Shape</span><span class="w"> </span><span class="nf">intersect</span><span class="p">(</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">intersectShape</span><span class="p">(</span><span class="w"> </span><span class="k">this</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Shape</span><span class="w"> </span><span class="nf">intersectShape</span><span class="p">(</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">// general code for all shapes</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Shape</span><span class="w"> </span><span class="nf">intersectRectangle</span><span class="p">(</span><span class="w"> </span><span class="n">Rectangle</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">intersectShape</span><span class="p">(</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>We call more specialized methods.</p>
<h4 id="overloading">Overloading<a hidden class="anchor" aria-hidden="true" href="#overloading">#</a></h4>
<ul>
<li>Overloading and  Dynamic resolution of the method, but we are not solving the typesafety problem.</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c#" data-lang="c#"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Shape</span> <span class="n">intersect</span><span class="p">(</span> <span class="n">Shape</span> <span class="n">s</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// general code for all shapes</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Rectangle</span> <span class="p">:</span> <span class="n">Shape</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Rectangle</span> <span class="n">intersect</span><span class="p">(</span> <span class="n">Rectangle</span> <span class="n">r</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// efficient code for two rectangles</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">static</span> <span class="n">Shape</span> <span class="n">intersect</span><span class="p">(</span> <span class="n">Shape</span> <span class="n">s1</span><span class="p">,</span> <span class="n">Shape</span> <span class="n">s2</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span><span class="p">(</span> <span class="n">s1</span> <span class="k">as</span> <span class="kt">dynamic</span> <span class="p">).</span><span class="n">intersect</span><span class="p">(</span> <span class="n">s2</span> <span class="k">as</span> <span class="kt">dynamic</span> <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>In this case, the method is resolved to the Rectangle only if both methods are Rectangle, if any of them, or if I remove the dynamic resolution of any of the methods then, it will call the Shape method.</p>
<h4 id="multiple-dispatch">Multiple Dispatch<a hidden class="anchor" aria-hidden="true" href="#multiple-dispatch">#</a></h4>
<p>This is relatively a new method to handle the dispatch of the methods. It is implemented in languages like, CLU, Cecil, Fortress, MultiJava, not any that I know of.</p>
<ul>
<li>Problems</li>
<li>Performance overhead of method look-up at run time</li>
<li>Extra requirements are needed to ensure there is a“unique best method” for every call</li>
<li>I would also personally add that it would be difficult and expensive to implement everything.</li>
</ul>
<p>This has a drawback.</p>
<h2 id="information-hiding">Information Hiding<a hidden class="anchor" aria-hidden="true" href="#information-hiding">#</a></h2>
<h4 id="basic-principles">Basic Principles<a hidden class="anchor" aria-hidden="true" href="#basic-principles">#</a></h4>
<ul>
<li>Hide implementation details</li>
<li>Reduce dependencies between modules</li>
<li>Classes can be understood, reused,and modified in isolation.</li>
</ul>
<p>One classical principle is having interfaces and their implementations, in this manner you expose only the contract, or interface in front of it.</p>
<h4 id="client-interface">Client Interface<a hidden class="anchor" aria-hidden="true" href="#client-interface">#</a></h4>
<p>Check out <a href="https://gemini.google.com/share/56d51d9e8752">here</a> for a discussion. But the rough idea is everything that you need to define the public methods.</p>
<ul>
<li>Class name
<ul>
<li>is the unique identifier for a class. Think of it as the title of a blueprint. A class is a template for creating objects, and the class name is how you refer to that template.</li>
</ul>
</li>
<li>Type parameters and their bounds
<ul>
<li>This concept relates to <strong>generics</strong>, which allow you to write classes and methods that can work with any data type.</li>
</ul>
</li>
<li>Super-class
<ul>
<li>(also called a parent class or base class) is a class from which another class <em>inherits</em>. This is the core of the &ldquo;is-a&rdquo; relationship in inheritance.</li>
</ul>
</li>
<li>Super-interfaces
<ul>
<li>is an interface that a class <em>implements</em> or that another interface <em>extends</em>. An interface is like a contract that specifies <em>what</em> a class must do (i.e., what methods it must have) but not <em>how</em> it must do them.</li>
</ul>
</li>
<li>Signatures of exported methods and fields
<ul>
<li>This refers to the <em>declarations</em> of the methods and variables (fields) that are accessible from <em>outside</em> the class. &ldquo;Exported&rdquo; typically means <code>public</code>, <code>protected</code>, or (in some languages) package-private. anything that isn&rsquo;t <code>private</code>.</li>
</ul>
</li>
<li>Client interface of direct superclass
<ul>
<li>is the set of all <code>public</code> (and <code>protected</code>) methods and fields of the one class it directly inherits from.</li>
</ul>
</li>
</ul>
<h4 id="subclass-interface">Subclass Interface<a hidden class="anchor" aria-hidden="true" href="#subclass-interface">#</a></h4>
<p>This topic describes the special implementation-level relationship between a <strong>superclass</strong> (parent) and a <strong>subclass</strong> (child).</p>
<p>This &ldquo;subclass interface&rdquo; is a special set of tools given <em>only</em> to the subclasses to help them build upon the parent&rsquo;s functionality. This is most often managed using the <code>protected</code> keyword.
It&rsquo;s the collection of fields and methods that a superclass exposes <em>only</em> to its subclasses, but <em>not</em> to the general public.</p>
<h4 id="friend-interface">Friend Interface<a hidden class="anchor" aria-hidden="true" href="#friend-interface">#</a></h4>
<p>The main idea is that with friends I can access all the private and protected methods of another class.</p>
<p>This set of concepts describes a pattern for managing <strong>tightly coupled classes</strong>—classes that must work together very closely to function.</p>
<p>This pattern is about breaking the normal rules of encapsulation (<code>private</code>, <code>public</code>) in a controlled, explicit way, usually for performance or to hide complex internal details.</p>
<h4 id="java-and-eiffel-access-modifiers">Java and Eiffel Access Modifiers<a hidden class="anchor" aria-hidden="true" href="#java-and-eiffel-access-modifiers">#</a></h4>
<p>Mostly three types of access modifiers that we list here.
Also remember that overrides can only be about more visible methods, not less visible ones.
The default access level in Java is package-private.</p>
<ul>
<li>
<p><code>public</code>: <strong>Client interface</strong></p>
</li>
<li>
<p><code>protected</code>: <strong>Subclass</strong> + friend interface (within the same package)</p>
</li>
<li>
<p><em>(Default/Package-Private)</em>: <strong>Friend interface</strong> (within the same package)</p>
</li>
<li>
<p><code>private</code>: <strong>Implementation</strong></p>
<ul>
<li>This means we can access any variable within the same class only.</li>
</ul>
</li>
<li>
<p><strong>Eiffel: <code>clients</code> clause in feature declarations</strong></p>
<ul>
<li><code>feature { ANY }</code>: <strong>Client interface</strong> (accessible to all classes)</li>
<li><code>feature { T }</code>: <strong>Friend interface</strong> for class <code>T</code> (accessible only to class <code>T</code> and its descendants)</li>
<li><code>feature { NONE }</code>: <strong>Implementation</strong> (accessible only by the object itself, using <code>this</code>, and only using the this keyword, and not other keywords, most languages cannot express this)</li>
<li><strong>Note:</strong> All exports inherently include <strong>subclasses</strong> (descendants).</li>
</ul>
</li>
</ul>
<h4 id="overriding-or-hiding">Overriding or Hiding?<a hidden class="anchor" aria-hidden="true" href="#overriding-or-hiding">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Super</span><span class="w"> </span><span class="p">{...</span><span class="na">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">m</span><span class="p">(</span><span class="w"> </span><span class="p">){</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="err">“</span><span class="n">Super</span><span class="err">”</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(</span><span class="w"> </span><span class="n">Super</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">){</span><span class="w"> </span><span class="n">v</span><span class="p">.</span><span class="na">m</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="p">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Sub</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Super</span><span class="w"> </span><span class="p">{</span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">m</span><span class="p">(</span><span class="w"> </span><span class="p">){</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="err">“</span><span class="n">Sub</span><span class="err">”</span><span class="p">);</span><span class="w"> </span><span class="p">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Super</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Sub</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="n">v</span><span class="p">.</span><span class="na">test</span><span class="p">(</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>Private methods cannot be overidden, just <strong>hidden</strong>. We say override if the method was accessible from the subclass.</li>
</ul>
<h4 id="fragile-base-class-problem">Fragile Base Class Problem<a hidden class="anchor" aria-hidden="true" href="#fragile-base-class-problem">#</a></h4>
<p>When we change the base class, we might break the subclasses. This makes modification of badly done abstractions very costly, for this reason it would be also suggested to have as few abstaction chains as possible.
Here is an example of such a problem:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">class</span> <span class="n">C</span> <span class="p">{</span><span class="kt">int</span> <span class="n">x</span><span class="p">;</span><span class="n">public</span> <span class="kt">void</span> <span class="nf">inc1</span><span class="p">(</span> <span class="p">){</span> <span class="n">this</span><span class="p">.</span><span class="nf">inc2</span><span class="p">(</span> <span class="p">);</span> <span class="p">}</span><span class="n">private</span> <span class="kt">void</span> <span class="nf">inc2</span><span class="p">(</span> <span class="p">){</span> <span class="n">x</span><span class="o">++</span><span class="p">;</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="n">class</span> <span class="n">CS</span> <span class="n">extends</span> <span class="n">C</span> <span class="p">{</span><span class="n">public</span> <span class="kt">void</span> <span class="nf">inc2</span><span class="p">(</span> <span class="p">)</span> <span class="p">{</span> <span class="nf">inc1</span><span class="p">(</span> <span class="p">);</span> <span class="p">}}</span>
</span></span><span class="line"><span class="cl"><span class="n">CS</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">new</span> <span class="nf">CS</span><span class="p">(</span> <span class="mi">5</span> <span class="p">);</span><span class="n">cs</span><span class="p">.</span><span class="nf">inc2</span><span class="p">(</span> <span class="p">);</span><span class="n">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="nf">println</span><span class="p">(</span> <span class="n">cs</span><span class="p">.</span><span class="n">x</span> <span class="p">);</span>
</span></span></code></pre></div><p>If you change from private to protected or public, then you would see the problems!</p>
<h2 id="multiple-inheritance">Multiple Inheritance<a hidden class="anchor" aria-hidden="true" href="#multiple-inheritance">#</a></h2>
<p>The main idea here is when a single type can have <strong>several supertypes</strong>, which forms a DAG.
This allows also for code re-use.</p>
<h4 id="simulating-multiple-inheritance">Simulating Multiple Inheritance<a hidden class="anchor" aria-hidden="true" href="#simulating-multiple-inheritance">#</a></h4>
<p>Languages like Java or C# <strong>do not allow for multiple inheritance</strong>.
If that is needed, then it is simulated with <strong>aggregation</strong>.</p>
<figure class="center">
<img src="/images/notes/Inheritance-20251016124123668.webp" style="width: 100%"   alt="Inheritance-20251016124123668" title="Inheritance-20251016124123668"/>
<figcaption><p style="text-align:center;"> Image from the course slides</p></figcaption>
</figure>
<h4 id="problems-with-multiple-inheritance">Problems with Multiple Inheritance<a hidden class="anchor" aria-hidden="true" href="#problems-with-multiple-inheritance">#</a></h4>
<ul>
<li><strong>Diamond Problem</strong>: The classic problem where a class inherits from two classes that both inherit from a common superclass. This can lead to <em>ambiguity</em> about which inherited properties or methods to use. The main problem here is how to solve the ambiguity.</li>
</ul>
<h4 id="resolving-ambiguities">Resolving Ambiguities<a hidden class="anchor" aria-hidden="true" href="#resolving-ambiguities">#</a></h4>
<ol>
<li>In C++ the ambiguities are resolved <strong>by the client</strong> (but its bad since the client needs to know the implementation details, which is not always granted).</li>
<li>We can also <strong>override both method</strong>s, but this is ok only if we are specializing something similar, if their usage is different, then it&rsquo;s not sure if this is the correct behaviour.</li>
<li>Or we can Rename as Eiffel does.</li>
</ol>
<p>But when we have a diamond it&rsquo;s really difficult. How many fields should we instantiate? Should they be different for the two we have?</p>
<h4 id="virtual-and-non-virtual-inheritance">Virtual and Non-Virtual Inheritance<a hidden class="anchor" aria-hidden="true" href="#virtual-and-non-virtual-inheritance">#</a></h4>
<p>Non-Virtual means we will have two copies of the superclass, while virtual means we will have only one copy of the superclass.
C++ supports both virtual and non-virtual inheritance. By default it uses non-virtual inheritance, but you can specify virtual inheritance using the <code>virtual</code> keyword, but this adds some <strong>runtime overhead</strong> (we need to add the virtual keyword in the inheritance part).
When virtual is used, the baseclass is called only once, by the smallest subclass.</p>
<pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">graph TD
    A --&gt; B
    A --&gt; C
    B --&gt; D
    B --&gt; A2[&#34;Stack: A/B&#34;]
    C --&gt; A3[&#34;Stack: A/C&#34;]
    D --&gt; A4[&#34;Stack: A/B/C/D&#34;]
</code></pre><pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">graph TD
    A --&gt; B
    A --&gt; C
    B --&gt; D
    B --&gt; A2[&#34;Stack: A (p)/B&#34;]
    C --&gt; A3[&#34;Stack: A(p)/C&#34;]
    D --&gt; A4[&#34;Stack: A, pointed by both C/D /B&#34;]
</code></pre><h4 id="pros-and-cons-for-multiple-inheritance">Pros and Cons for Multiple-Inheritance<a hidden class="anchor" aria-hidden="true" href="#pros-and-cons-for-multiple-inheritance">#</a></h4>
<table>
  <thead>
      <tr>
          <th><strong>Pros</strong></th>
          <th><strong>Cons</strong></th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>Increases expressiveness</strong></td>
          <td><strong>Ambiguity resolution</strong></td>
      </tr>
      <tr>
          <td></td>
          <td>- Explicit selection</td>
      </tr>
      <tr>
          <td></td>
          <td>- Merging</td>
      </tr>
      <tr>
          <td></td>
          <td>- Renaming</td>
      </tr>
      <tr>
          <td><strong>Avoids overhead of delegation pattern</strong></td>
          <td><strong>Repeated inheritance</strong></td>
      </tr>
      <tr>
          <td></td>
          <td>- Complex semantics</td>
      </tr>
      <tr>
          <td></td>
          <td>- Initialization</td>
      </tr>
      <tr>
          <td></td>
          <td><strong>Complicated!</strong></td>
      </tr>
  </tbody>
</table>
<h2 id="linearization">Linearization<a hidden class="anchor" aria-hidden="true" href="#linearization">#</a></h2>
<p>Mixins and traits provide a form of reuse
Methods and state that can be mixed into various classes</p>
<p>Example: Functionality to persist an object. Python, Ruby, Scala, Squeak Smalltalk. So it&rsquo;s a different way to add functionality to classes.</p>
<h4 id="traits">Traits<a hidden class="anchor" aria-hidden="true" href="#traits">#</a></h4>
<blockquote>
<p>Traits defines <em>a collection of fields and methods</em> (behavior) that can be <em>mixed into classes</em>. It’s a modular building block of functionality, not a concrete “thing” by itself.</p></blockquote>
<p>We have <strong>single-inheritance</strong>, and bound only to a  single class.</p>
<p>Traints can extend exactly one superclass.
They solve the diamond problem with <strong>linearization</strong>, we will analyze this phenomenon later.</p>
<ul>
<li>Traits are very dynamic,which complicates staticreasoning</li>
<li>Traits do not know how their superclasses getinitialized</li>
<li>Traits do not know which methods they override</li>
<li>Traits do not know where super-calls are bound to</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scala" data-lang="scala"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">trait</span> <span class="nc">Backup</span> <span class="k">extends</span> <span class="nc">Cell</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">var</span> <span class="n">backup</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">override</span> <span class="k">def</span> <span class="n">put</span><span class="o">(</span> <span class="n">v</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Save the old value before calling the next put (super.put)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">backup</span> <span class="k">=</span> <span class="n">value</span>
</span></span><span class="line"><span class="cl">    <span class="k">super</span><span class="o">.</span><span class="n">put</span><span class="o">(</span> <span class="n">v</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="n">undo</span> <span class="k">=</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">super</span><span class="o">.</span><span class="n">put</span><span class="o">(</span> <span class="n">backup</span> <span class="o">)</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Cell</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">var</span> <span class="n">value</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="n">put</span><span class="o">(</span> <span class="n">v</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">value</span> <span class="k">=</span> <span class="n">v</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="n">get</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="n">value</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">object</span> <span class="nc">Main1</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">def</span> <span class="n">main</span><span class="o">(</span> <span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span> <span class="kt">String</span> <span class="o">]</span> <span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Cell</span> <span class="k">with</span> <span class="nc">Backup</span>
</span></span><span class="line"><span class="cl">    <span class="n">a</span><span class="o">.</span><span class="n">put</span><span class="o">(</span> <span class="mi">5</span> <span class="o">)</span>  <span class="c1">// value=5, backup=0
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">a</span><span class="o">.</span><span class="n">put</span><span class="o">(</span> <span class="mi">3</span> <span class="o">)</span>  <span class="c1">// value=3, backup=5 (value before put(3) was 5)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">a</span><span class="o">.</span><span class="n">undo</span>      <span class="c1">// value is set back to backup (5)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">println</span><span class="o">(</span> <span class="n">a</span><span class="o">.</span><span class="n">get</span> <span class="o">)</span> <span class="c1">// Output: 5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></div><h4 id="mathematical-model-for-linearization">Mathematical Model for Linearization<a hidden class="anchor" aria-hidden="true" href="#mathematical-model-for-linearization">#</a></h4>
<p>The key concept to understanding the semantics of Scala traits: bring <strong>types in a linear order</strong></p>
<ul>
<li>Define overriding and super-calls according to this order (so easy resolution).</li>
</ul>
<p>For a class or trait <strong>C extends C&rsquo; with C₁ &hellip; with Cₙ</strong>
the linearization L(C) is C, L(Cₙ) • &hellip; • L(C₁) • L(C')</p>
$$
\epsilon • B = B
$$$$
(a, A) • B = \begin{cases} a, (A • B) & \text{if } a \neq B \\ A • B & \text{otherwise} \end{cases}
$$<h4 id="initialization-order">Initialization Order<a hidden class="anchor" aria-hidden="true" href="#initialization-order">#</a></h4>
<blockquote>
<p>Classes and traits are initialized in the <strong>reverse linear order</strong></p></blockquote>
<p>Meaning that the supertype is initialized before the base class value.
The only thing you need to keep in mind is that it is initialized by the <strong>preceding class</strong>, so if it&rsquo;s two linearizations behind, you don&rsquo;t <em>direct</em> control over which parameter will be used there.
This order along with the overrides leads to a nice specialization ability of mixing functions.</p>
<h4 id="method-selection-with-linearization">Method Selection with Linearization<a hidden class="anchor" aria-hidden="true" href="#method-selection-with-linearization">#</a></h4>
<figure class="center">
<img src="/images/notes/Inheritance-20251023114640691.webp" style="width: 100%"   alt="Inheritance-20251023114640691" title="Inheritance-20251023114640691"/>
<figcaption><p style="text-align:center;">Slide from <a href="https://ethz.ch/content/dam/ethz/special-interest/infk/chair-program-method/pm/documents/Education/Courses/as2025/coop/lecture_03_inheritance_split.pdf">Course Slides</a></p></figcaption>
</figure>
<h4 id="problems-with-traits">Problems with Traits<a hidden class="anchor" aria-hidden="true" href="#problems-with-traits">#</a></h4>
<p>We don&rsquo;t know which concrete methods is it overriding, neither which one.</p>
<ul>
<li>We cannot check behavioural subtyping, depends on which one is mixed in. I can only check this subtyping after it has been mixed in.</li>
<li>If we mix in in different ways, the type system still thinks they are the same, but they behave differently.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/programming-languages/">Programming-Languages</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on x"
            href="https://x.com/intent/tweet/?text=Inheritance&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f&amp;hashtags=programming-languages">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f&amp;title=Inheritance&amp;summary=Inheritance&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f&title=Inheritance">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on whatsapp"
            href="https://api.whatsapp.com/send?text=Inheritance%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on telegram"
            href="https://telegram.me/share/url?text=Inheritance&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Inheritance on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Inheritance&u=https%3a%2f%2fflecart.github.io%2fnotes%2finheritance%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
