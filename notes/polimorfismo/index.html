<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Polimorfismo | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="programming-languages">
<meta name="description" content="Introduzione
Monoforfo
Quando non posso utilizzare un tipo come parametro. Ossia non possiamo definire una funzione generica.

Polimorfismo
Polimorfismo, come dice il nome, significa avere tante forme, in questo caso tanti tipi. Ma avere tanti tipi non è una cosa ambigua? Questa cosa si risolve solitamente a compile time (facendo checks di sottotipo, oppure dispatch della funzione corretta).

A program part is polymorphic if it can be used for objects of several classes">
<meta name="author" content="
By Xuanqiang Angelo Huang">
<link rel="canonical" href="https://flecart.github.io/notes/polimorfismo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f790d9af969c56c079c1ce2d5972a04486bf3d6144295d5fba319830e1e55a7a.css" integrity="sha256-95DZr5acVsB5wc4tWXKgRIa/PWFEKV1fujGYMOHlWno=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/polimorfismo/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>






      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WW6NN2QGKF');
        }
      </script><meta property="og:url" content="https://flecart.github.io/notes/polimorfismo/">
  <meta property="og:site_name" content="X. Angelo Huang&#39;s Blog">
  <meta property="og:title" content="Polimorfismo">
  <meta property="og:description" content="Introduzione Monoforfo Quando non posso utilizzare un tipo come parametro. Ossia non possiamo definire una funzione generica.
Polimorfismo Polimorfismo, come dice il nome, significa avere tante forme, in questo caso tanti tipi. Ma avere tanti tipi non è una cosa ambigua? Questa cosa si risolve solitamente a compile time (facendo checks di sottotipo, oppure dispatch della funzione corretta).
A program part is polymorphic if it can be used for objects of several classes">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:published_time" content="2024-08-28T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-08-28T00:00:00+00:00">
    <meta property="article:tag" content="Programming-Languages">
      <meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="Polimorfismo">
<meta name="twitter:description" content="Introduzione
Monoforfo
Quando non posso utilizzare un tipo come parametro. Ossia non possiamo definire una funzione generica.

Polimorfismo
Polimorfismo, come dice il nome, significa avere tante forme, in questo caso tanti tipi. Ma avere tanti tipi non è una cosa ambigua? Questa cosa si risolve solitamente a compile time (facendo checks di sottotipo, oppure dispatch della funzione corretta).

A program part is polymorphic if it can be used for objects of several classes">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Polimorfismo",
      "item": "https://flecart.github.io/notes/polimorfismo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Polimorfismo",
  "name": "Polimorfismo",
  "description": "Introduzione Monoforfo Quando non posso utilizzare un tipo come parametro. Ossia non possiamo definire una funzione generica.\nPolimorfismo Polimorfismo, come dice il nome, significa avere tante forme, in questo caso tanti tipi. Ma avere tanti tipi non è una cosa ambigua? Questa cosa si risolve solitamente a compile time (facendo checks di sottotipo, oppure dispatch della funzione corretta).\nA program part is polymorphic if it can be used for objects of several classes\n",
  "keywords": [
    "programming-languages"
  ],
  "articleBody": "Introduzione Monoforfo Quando non posso utilizzare un tipo come parametro. Ossia non possiamo definire una funzione generica.\nPolimorfismo Polimorfismo, come dice il nome, significa avere tante forme, in questo caso tanti tipi. Ma avere tanti tipi non è una cosa ambigua? Questa cosa si risolve solitamente a compile time (facendo checks di sottotipo, oppure dispatch della funzione corretta).\nA program part is polymorphic if it can be used for objects of several classes\nTipologie di Polimorfismo (3) ad-hoc polymorphism questo è anche chiamato overloading in cui vado a definire un nuova funzione (con lo stesso nome) che accetti il nuovo tipo di dato. subtype polymorphism parametric polymorphism Ad-hoc (3) Questo è molto simile al tipo somma, solamente fatto da un punto di vista funzionale (i domini devono essere separati).\nIn C sono molto conosciute questa tipologia di polimorfismo. Però ci sono anche forme comuni, come l’operatori aritmetici.\nL’invocazione è anche chiamato dispatch , quando abbiamo risolto l’overloading, ossia abbiamo fatto il dispatch dell’invocazione, allora l’overloading scompare e viene eseguita una specifica funzione. Questa funzione può essere fatta in modo statico oppure dinamico.\nRiassumendo:\nDefinisco stesso nome che prendono tipi diversi Avviene un dispatch statico o dinamico Una volta avvenuto il dispatch, la funzione eseguita è univocamente identificata. Statico o dinamico nel dispatch\nDispatch è il processo che va a decidere la funzione overloadata da chiamare, questo processo si può classificare come dinamico se avviene durante il runtime (come solitamente è per le interfacce) oppure statico quando avviene e a tempo di compilazione (come solitamente avviene per le funzioni overloaddate).\nDi sottotipo Possiamo andare a dire che un tipo S è sottotipo di un tipo T, indicato con $S \u003c: T$, quando S può essere utilizzato in qualunque occasione al posto di T. Questo è anche chiamato come principio di sostituzione di Liskov, vedi Classi OOP\nSetTheory per sottotipi Slide polimorfismo di sottotipo\nQuesto concetto l’abbiamo anche accennato in Algebra dei tipi quando abbiamo parlato di coercizione.\npraticamente quando abbiamo un tipo più specifico $S$ che andiamo ad indicare con $S \u003c: T$, allora quando ho S e devo utilizzare T, lo posso fare, questo perché S contiene tutte le caratteristiche di T.\nSolitamente questa è una relazione di preordine ossia riflessiva e transitiva, spesso anche antisimmetrica, quindi è spesso un ordine parziale.\nSi può dire che esiste un rapporto di specificazione (parola da utilizzare nell’orale per bella figura lel) perché S è più specifico di T, in questo senso possiamo utilizzare S in ogni posto in cui c’è T.\nTipologie di sottotipaggio (2) Per questa parte possiamo andare a definire un concetto di sottotipaggio per profondità o per larghezza.\nPer larghezza: basta che il sottotipo abbia molti più campi! in questo senso Dog \u003c Animal, perché anche dog posso utilizzarlo come un animal, dato che ha tutte le cose di animal. (l’unica differenza col duck typing è il fatto che T qui è esplicito, mentre nel duck typing non mi importa del tipo, solamente dello stesso utilizzo).\nDifferenza fra duck e width subtyping per chatGPT\nWidth subtyping is a form of subtype polymorphism where a type is considered a subtype of another type if it has at least the same properties and methods as the supertype. This means that a subtype can have more properties and methods than the supertype, but it must at least have all of the ones that are defined in the supertype. This is called “width” because it is based on the width of the type’s interface.\nDuck typing, on the other hand, is a more dynamic approach to type checking where the type of an object is determined by its behavior at runtime rather than its static type. In other words, if it walks like a duck and quacks like a duck, then it must be a duck. This means that two objects with different types can still be treated as if they have the same type if they share the same behavior.\nIn summary, width subtyping is based on the interface of a type and allows for subtype polymorphism, while duck typing is based on the behavior of an object at runtime and allows for more dynamic type checking.\nPer profondità: Quando un campo ha un tipo che sia un sottotipo di un altro. Questo è visto molte meno volte, però si può fare. Questa ha però delle particolarità, è importante introdurre il concetto di covariante per tipi quando le parti del record mantengono la stessa direzione di sottotipaggio. Quando abbiamo due tipi che sono covarianti, possiamo utilizzarli solo per le letture. In scrittura però potremmo avere dei campi non inizializzati, quindi non va molto bene. (nell’esempio avremmo un animale in output in scrittura, mentre gli abbiamo dato un dog e ci aspettavamo un dog in output). (queste nozioni di covarianza comunque sono sempre in funzione del contesto).\nIn pratica vado a rimpiazzare i campi del record con dei sottotipi, questo è buono per cose immutabili, for example, you can assign 1.5 to the ‘x’ field of a real point (a record with two real fields), but you can’t do the same to the ‘x’ field of an integer point (which, however, is a deep subtype of the real point type) because 1.5 is not an integer.\nCovariante e Controvariante e consumo (!!) Abbiamo trattato più recentemente di queste regole in Typing and Subtyping. È stato spiegato meglio.\nSlide covariante, controvariante e consumi e produzione Esempio strano\nQuesta nozione si basa sull’inversione fra produzione e consumazione.\nAvevamo detto che abbiamo una relazione di sottotipo, perché DogHouse \u003c AnimalHouse quindi sono covarianti rispetto a Dog \u003c Animal House. Ma nella fase di consumo, questo si inverte, quindi si può dire che siano controvarianti.\nIn breve:\nConsumo (input) → Controvariante Produzione (output) → Covariante Il motivo per cui succede è che Dog fn utilizza i campi di Dog, che sono più estesi, posso sostituire a questo consumo anche animal, che utilizza i campi di animal, quindi sono anche presenti in Dog, ecco che il rapporto si inverte\nPossiamo fare un parallelo fra le funzioni di consumo e quelle di produzione.\nSussunzione Con sussunzione andiamo a parlare di quando possiamo fare l’inferenza di sottotipaggio ossia se è vero o meno che un tipo è sottotipo di un altro (e quindi possibile utilizzare S al posto di T in qualunque luogo).\nPossiamo fare la sussunzione in modo estensionale o intensionale quindi o:\nCaratterizzando tutti gli elementi del sottotipo Parlare di predicati e domini. Teoria dei Tipi#Tipo estensionali o intensionali abbiamo parlato di estensionale o intensionale.\nEsempi di sussunzione Polimorfismo parametrico Il problema che il polimorfismo parametrico risolve rispetto a quello di sottotipo è il fatto che per ritrovare l’informazione iniziale, c’è bisogno di castin. Con il polimorfismo parametrico non avremo più bisogno di questo.\nTipi parametrici Quando abbiamo delle operazioni anche se non conosciamo esattamente cosa c’è sotto, però riguardo la struttura so bene cosa vanno a fare. (un esempio riguardo a questo è il sort).\nQuesta parametrizzazione ci permette di definire delle cose per tutti i tipi che possiedono quella funzione (ricorda i tratti di rust), ed è per questo che possiamo dire che sia un tipo universale. Questa cosa che vale per tutti ci permette di poter provare dei teoremi a gratis.\nUpper Bounds We can infer which methods are available by setting the upper bounds (methods that are present) with respect to a generic type.\nFor example, if a class extends from\ninterface Comparable\u003cT\u003e {int compareTo( T o );} Then we know that at least the method compareTo is implemented within this function. If not we cannot assume anything for the model.\nSubtyping with Generics Generic types aresubtypes of theirdeclared supertypes Type variables aresubtypes of their upperbounds But different instantiations are unrelated directly. They cannot neither be covariant parameter types, neither contravariant. Make sure you know some examples where this is valid.\nCovariance is unsafe when a generic type argument is used for variables that are written by clients- Mutable fields- Method arguments Contravariance isunsafe when a generictype argument is usedfor variables that areread by clients- Fields- Method results The standard solution in Java is non-variancy, which means the types are neither covariant or contravariant, they just are not compatible with each other. Sometimes this is over restrictive though. Covariant generics would need lots of runtime checks for every field update and argument passing, which is a lot.\nCovariance and Contravariance Annotations We can make generics support covariance or contravariance if that generic only uses the type parameter in covariant or contravariant settings. Scalla allows for these kinds of settings:\nclass Random[ +T ] { // +T indicates covariance def next: T = { ... } } // ---------------------------------------------------- // Subtyping Check: Covariance allows Random[String] to be treated as Random[AnyRef] // (i.e., Random[String] \u003c: Random[AnyRef]) val r: Random[ AnyRef ] = new Random\u003ca href=\"/notes\"\u003e String \u003c/a\u003e // Good. Covariance allows this assignment because String \u003c: AnyRef. // Usage Check: 'a' will be inferred as AnyRef because 'r's static type is Random[AnyRef] val a = r.next // Good. 'r.next' returns a T, which resolves to AnyRef here. // ---------------------------------------------------- class Random[ +T ] { // +T indicates covariance def next: T = { ... } // Error! A covariant type parameter [+T] cannot appear in a contravariant position, // such as a method argument position (input). def initialize( i: T ) = { ... } // Scalac: Error. Covariant type T appears in contravariant position. Doesn't even compile. } We can do a similar thing for contravariant generics.\nUsing Parametric Polimorphism Parametric polimorphis is the other way along side subtyping and overloading or overriding methods to provide ways to generalize code.\nAdding Type Parameters class Person { ... } class Student extends Person { ... } class PersonComp implements Comparator\u003cPerson\u003e {int compare( Person fst, Person snd ) { ... }} interface Comparator\u003cT\u003e {int compare( T fst, T snd );} class TreeSet\u003cF, E extends F\u003e {TreeSet( Comparator\u003cF\u003e c ) { ... }... } TreeSet\u003cPerson, Student\u003e s =new TreeSet\u003cPerson, Student\u003e( new PersonComp() ); We could not use personcomp without defining the F, because student does not implement that comparator, even if students are persons. The above is too low level to be useful.\nThe main drawbacks are:\nThe client needs to understand exactly what needs to go there. We need to understand how to use those. Type instantiation: after a type has been instantiated we cannot change it anymore, so it has some bad dynamicism. Allowing different comparisons class PersonComp\u003cT extends Person\u003e implements Comparator\u003cT\u003e {int compare( T fst, T snd ) { ... }} TreeSet\u003cStudent\u003e s =new TreeSet\u003cStudent\u003e( new PersonComp\u003cStudent\u003e() ); We can also define it in the above manner, and instantiate the correct comparisor. But:\nThe client still needs to understand how personComp works We need to have foresight to understand the cases we need to run that simple little thing. This is a bad way to implement it. Using Existential Types We now have a\n“There exists a type argument T such that c has typeCollection T\", and this is instantiated automatically by the type system. You can use it like this:\nstatic void printAll( Collection\u003c?\u003e c ) {for ( Object e : c ) { System.out.println( e ); }} Collection\u003cString\u003e c = new ArrayList\u003cString\u003e( ); ... printAll( c ); After that we can bound the wildcard types correctly when needed.\nstatic void printFormatted(Collection\u003c? extends Format\u003e c) { for (Format e : c) { String s = e.format(80); System.out.println(s); } } We basically can set up subtype or supertype relations between the bounds using the existential quantifier in java!\nThe existence of this flexible type system allows now to define the tree comparator as:\nclass TreeSet\u003cE\u003e {TreeSet( Comparator\u003c? super E\u003e c ) { ... }... } Which is really nice and concise.\nType Erasure For backwards compatibility all this generics system (which was introduced in Java 5) all the type generics annotation is erased at the bytecode level.\nSlide from ETHz COOP course\n. This means lots of information is lost (you cannot do instance of, you cannot do .class to check the correct type instantiation), and doesn't even allow for arrays of generic types.the underlying mechanism (erasure) sometimes _shows through_, forcing developers to think about how it works internally. For this reason it is called a **leaky abstraction**. Yet this is not the same for C#, which has this information!\nJava Generics are Turing Complete class T { } class N\u003cZ\u003e { } // A generic class C with type parameter X, // which extends the generic class N with a complex type argument class C\u003cX\u003e extends N\u003cN\u003c? super C\u003cC\u003cX\u003e\u003e\u003e\u003e { /** * A method that takes an argument of type C and returns * a generic type N with a lower-bounded wildcard. */ public N\u003c? super C\u003cT\u003e\u003e foo(C\u003cT\u003e c) { return c; } } The only thing that we need to check if whether the type C is a subtype of N\u003c? super C\u003e. This leads to a stack overflow in the compiler. This means we need to check if the class:N\u003c? super C",
  "wordCount" : "2633",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "2024-08-28T00:00:00Z",
  "dateModified": "2024-08-28T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang Angelo Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/polimorfismo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Polimorfismo
    </h1>
    <div class="post-meta"><span title='2024-08-28 00:00:00 +0000 UTC'>August 28, 2024</span>&nbsp;·&nbsp;Reading Time: 13 minutes&nbsp;·&nbsp;
By Xuanqiang Angelo Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#introduzione" aria-label="Introduzione">Introduzione</a><ul>
                        
                <li>
                    <a href="#monoforfo" aria-label="Monoforfo">Monoforfo</a></li></ul>
                </li>
                <li>
                    <a href="#polimorfismo" aria-label="Polimorfismo">Polimorfismo</a><ul>
                        
                <li>
                    <a href="#tipologie-di-polimorfismo-3" aria-label="Tipologie di Polimorfismo (3)">Tipologie di Polimorfismo (3)</a></li>
                <li>
                    <a href="#ad-hoc-3" aria-label="Ad-hoc (3)">Ad-hoc (3)</a></li></ul>
                </li>
                <li>
                    <a href="#di-sottotipo" aria-label="Di sottotipo">Di sottotipo</a><ul>
                        
                <li>
                    <a href="#settheory-per-sottotipi" aria-label="SetTheory per sottotipi">SetTheory per sottotipi</a></li>
                <li>
                    <a href="#tipologie-di-sottotipaggio-2" aria-label="Tipologie di sottotipaggio (2)">Tipologie di sottotipaggio (2)</a></li>
                <li>
                    <a href="#covariante-e-controvariante-e-consumo-" aria-label="Covariante e Controvariante e consumo (!!)">Covariante e Controvariante e consumo (!!)</a></li>
                <li>
                    <a href="#sussunzione" aria-label="Sussunzione">Sussunzione</a></li></ul>
                </li>
                <li>
                    <a href="#polimorfismo-parametrico" aria-label="Polimorfismo parametrico">Polimorfismo parametrico</a><ul>
                        
                <li>
                    <a href="#tipi-parametrici" aria-label="Tipi parametrici">Tipi parametrici</a><ul>
                        
                <li>
                    <a href="#upper-bounds" aria-label="Upper Bounds">Upper Bounds</a></li>
                <li>
                    <a href="#subtyping-with-generics" aria-label="Subtyping with Generics">Subtyping with Generics</a></li>
                <li>
                    <a href="#covariance-and-contravariance-annotations" aria-label="Covariance and Contravariance Annotations">Covariance and Contravariance Annotations</a></li></ul>
                </li>
                <li>
                    <a href="#using-parametric-polimorphism" aria-label="Using Parametric Polimorphism">Using Parametric Polimorphism</a><ul>
                        
                <li>
                    <a href="#adding-type-parameters" aria-label="Adding Type Parameters">Adding Type Parameters</a></li>
                <li>
                    <a href="#allowing-different-comparisons" aria-label="Allowing different comparisons">Allowing different comparisons</a></li>
                <li>
                    <a href="#using-existential-types" aria-label="Using Existential Types">Using Existential Types</a></li>
                <li>
                    <a href="#type-erasure" aria-label="Type Erasure">Type Erasure</a></li>
                <li>
                    <a href="#java-generics-are-turing-complete" aria-label="Java Generics are Turing Complete">Java Generics are Turing Complete</a></li></ul>
                </li>
                <li>
                    <a href="#c-landscape" aria-label="C&#43;&#43; Landscape">C++ Landscape</a><ul>
                        
                <li>
                    <a href="#templating-in-c" aria-label="Templating in C&#43;&#43;">Templating in C++</a></li>
                <li>
                    <a href="#concepts" aria-label="Concepts">Concepts</a></li>
                <li>
                    <a href="#template-metaprogramming" aria-label="Template Metaprogramming">Template Metaprogramming</a></li>
                <li>
                    <a href="#comparisons-with-parametric-polimorphism" aria-label="Comparisons with Parametric Polimorphism">Comparisons with Parametric Polimorphism</a></li></ul>
                </li>
                <li>
                    <a href="#ibridazione-con-polimorfismo-di-sottotipo" aria-label="Ibridazione con polimorfismo di sottotipo">Ibridazione con polimorfismo di sottotipo</a></li>
                <li>
                    <a href="#esempi-di-utilizzo-di-polimorfismo-parametrico-e-di-sottotipo" aria-label="Esempi di utilizzo di polimorfismo parametrico e di sottotipo">Esempi di utilizzo di polimorfismo parametrico e di sottotipo</a></li>
                <li>
                    <a href="#tipi-maybe-e-result" aria-label="Tipi maybe e result">Tipi maybe e result</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="introduzione">Introduzione<a hidden class="anchor" aria-hidden="true" href="#introduzione">#</a></h2>
<h3 id="monoforfo">Monoforfo<a hidden class="anchor" aria-hidden="true" href="#monoforfo">#</a></h3>
<p>Quando non posso utilizzare un tipo come parametro. Ossia non possiamo definire una funzione generica.</p>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled">
<h2 id="polimorfismo">Polimorfismo<a hidden class="anchor" aria-hidden="true" href="#polimorfismo">#</a></h2>
<p>Polimorfismo, come dice il nome, significa avere tante forme, in questo caso tanti tipi. Ma avere tanti tipi non è una cosa ambigua? Questa cosa si risolve solitamente a compile time (facendo checks di sottotipo, oppure dispatch della funzione corretta).</p>
<blockquote>
<p>A program part is polymorphic if it can be used for objects of several classes</p></blockquote>
<h3 id="tipologie-di-polimorfismo-3">Tipologie di Polimorfismo (3)<a hidden class="anchor" aria-hidden="true" href="#tipologie-di-polimorfismo-3">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 1.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 1">
<ul>
<li><strong>ad-hoc polymorphism</strong> questo è anche chiamato overloading in cui vado a definire un nuova funzione (con lo stesso nome) che accetti il nuovo tipo di dato.</li>
<li><strong>subtype polymorphism</strong></li>
<li><strong>parametric polymorphism</strong></li>
</ul>
<h3 id="ad-hoc-3">Ad-hoc (3)<a hidden class="anchor" aria-hidden="true" href="#ad-hoc-3">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 2.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 2">
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 3.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 3">
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 4.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 4">
<p>Questo è molto simile al tipo somma, solamente fatto da un punto di vista funzionale (<strong>i domini devono essere separati</strong>).</p>
<p>In C sono molto conosciute questa tipologia di polimorfismo. Però ci sono anche forme comuni, come l&rsquo;operatori aritmetici.</p>
<p>L&rsquo;invocazione è anche chiamato <strong>dispatch</strong> , quando abbiamo risolto l&rsquo;overloading, ossia abbiamo fatto il dispatch dell&rsquo;invocazione, allora l&rsquo;overloading scompare e viene eseguita una specifica funzione. Questa funzione può essere fatta in modo statico oppure dinamico.</p>
<p>Riassumendo:</p>
<ul>
<li>Definisco stesso nome che prendono tipi diversi</li>
<li>Avviene un dispatch statico o dinamico</li>
<li>Una volta avvenuto il dispatch, la funzione eseguita è univocamente identificata.</li>
</ul>
<p><em>Statico o dinamico nel dispatch</em></p>
<p>Dispatch è il processo che va a decidere la funzione overloadata da chiamare, questo processo si può classificare come <strong>dinamico</strong> se avviene durante il runtime (come solitamente è per le interfacce) oppure <strong>statico</strong> quando avviene e a tempo di compilazione (come solitamente avviene per le funzioni overloaddate).</p>
<h2 id="di-sottotipo">Di sottotipo<a hidden class="anchor" aria-hidden="true" href="#di-sottotipo">#</a></h2>
<p>Possiamo andare a dire che un tipo S è sottotipo di un tipo T, indicato con $S <: T$, quando S può essere utilizzato in qualunque occasione al posto di T. Questo è anche chiamato come <strong>principio di sostituzione di Liskov</strong>, vedi <a href="/notes/classi-oop">Classi OOP</a></p>
<h3 id="settheory-per-sottotipi">SetTheory per sottotipi<a hidden class="anchor" aria-hidden="true" href="#settheory-per-sottotipi">#</a></h3>
<ul>
<li>
<p>Slide polimorfismo di sottotipo</p>
  <img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 5.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 5">
  <img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 6.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 6">
</li>
</ul>
<p>Questo concetto l&rsquo;abbiamo anche accennato in <a href="/notes/algebra-dei-tipi">Algebra dei tipi</a> quando abbiamo parlato di coercizione.</p>
<p>praticamente quando abbiamo un tipo più specifico $S$ che andiamo ad indicare con $S <: T$, allora quando ho S e devo utilizzare T, lo posso fare, questo perché S contiene tutte le caratteristiche di T.</p>
<p>Solitamente questa è una relazione di <strong>preordine</strong> ossia riflessiva e transitiva, spesso anche antisimmetrica, quindi è spesso un <strong>ordine parziale</strong>.</p>
<p>Si può dire che esiste un <strong>rapporto di specificazione</strong> (parola da utilizzare nell&rsquo;orale per bella figura lel) perché S è più specifico di T, in questo senso possiamo utilizzare S in ogni posto in cui c&rsquo;è T.</p>
<h3 id="tipologie-di-sottotipaggio-2">Tipologie di sottotipaggio (2)<a hidden class="anchor" aria-hidden="true" href="#tipologie-di-sottotipaggio-2">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 7.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 7">
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 8.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 8">
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 9.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 9">
<p>Per questa parte possiamo andare a definire un concetto di <strong>sottotipaggio per profondità o per larghezza</strong>.</p>
<p><em>Per larghezza</em>: basta che il sottotipo abbia molti più campi! in questo senso Dog &lt; Animal, perché anche dog posso utilizzarlo come un animal, dato che ha tutte le cose di animal. (l&rsquo;unica differenza col duck typing è il fatto che T qui è esplicito, mentre nel duck typing non mi importa del tipo, solamente dello stesso utilizzo).</p>
<ul>
<li>
<p>Differenza fra duck e width subtyping per chatGPT</p>
<p>Width subtyping is a form of subtype polymorphism where a type is considered a subtype of another type if it has at least the same properties and methods as the supertype. This means that a subtype can have more properties and methods than the supertype, but it must at least have all of the ones that are defined in the supertype. This is called &ldquo;width&rdquo; because it is based on the width of the type&rsquo;s interface.</p>
<p>Duck typing, on the other hand, is a more dynamic approach to type checking where the type of an object is determined by its behavior at runtime rather than its static type. In other words, if it walks like a duck and quacks like a duck, then it must be a duck. This means that two objects with different types can still be treated as if they have the same type if they share the same behavior.</p>
<p>In summary, width subtyping is based on the interface of a type and allows for subtype polymorphism, while duck typing is based on the behavior of an object at runtime and allows for more dynamic type checking.</p>
</li>
</ul>
<p><em>Per profondità</em>: Quando un campo ha un tipo che sia un sottotipo di un altro. Questo è visto molte meno volte, però si può fare. Questa ha però delle particolarità, è importante introdurre il concetto di <strong>covariante</strong> per tipi quando le parti del record mantengono la stessa direzione di sottotipaggio. Quando abbiamo due tipi che sono covarianti, possiamo utilizzarli solo per le <strong>letture</strong>. In scrittura però potremmo avere dei campi non inizializzati, quindi non va molto bene. (nell&rsquo;esempio avremmo un animale in output in scrittura, mentre gli abbiamo dato un dog e ci aspettavamo un dog in output). (queste nozioni di covarianza comunque sono sempre in funzione del contesto).</p>
<p>In pratica vado a rimpiazzare i campi del record con dei sottotipi, questo è buono per cose immutabili, for example, you can assign 1.5 to the &lsquo;x&rsquo; field of a real point (a record with two real fields), but you can&rsquo;t do the same to the &lsquo;x&rsquo; field of an integer point (which, however, is a deep subtype of the real point type) because 1.5 is not an integer.</p>
<h3 id="covariante-e-controvariante-e-consumo-">Covariante e Controvariante e consumo (!!)<a hidden class="anchor" aria-hidden="true" href="#covariante-e-controvariante-e-consumo-">#</a></h3>
<p>Abbiamo trattato più recentemente di queste regole in <a href="/notes/typing-and-subtyping">Typing and Subtyping</a>.
È stato spiegato meglio.</p>
<ul>
<li>
<p>Slide covariante, controvariante e consumi e produzione
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 10.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 10"></p>
  <img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 11.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 11">
</li>
<li>
<p>Esempio strano</p>
  <img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 12.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 12">
</li>
</ul>
<p>Questa nozione si basa sull&rsquo;inversione fra produzione e consumazione.</p>
<p>Avevamo detto che abbiamo una relazione di sottotipo, perché DogHouse &lt; AnimalHouse quindi sono covarianti rispetto a Dog &lt; Animal House. Ma nella fase di consumo, questo si inverte, quindi si può dire che siano controvarianti.</p>
<p>In breve:</p>
<ol>
<li>Consumo (input) → Controvariante</li>
<li>Produzione (output) → Covariante</li>
</ol>
<p>Il motivo per cui succede è che Dog fn utilizza i campi di Dog, che sono più estesi, posso sostituire a questo consumo anche animal, che utilizza i campi di animal, quindi sono anche presenti in Dog, ecco che il rapporto si inverte</p>
<p>Possiamo fare un parallelo fra le funzioni di consumo e quelle di produzione.</p>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 13.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 13">
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 14.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 14">
<h3 id="sussunzione">Sussunzione<a hidden class="anchor" aria-hidden="true" href="#sussunzione">#</a></h3>
<p>Con sussunzione andiamo a parlare di quando possiamo fare <strong>l&rsquo;inferenza di sottotipaggio</strong> ossia se è vero o meno che un tipo è sottotipo di un altro (e quindi possibile utilizzare S al posto di T in qualunque luogo).</p>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 15.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 15">
<p>Possiamo fare la sussunzione in modo estensionale o intensionale quindi o:</p>
<ol>
<li>Caratterizzando tutti gli elementi del sottotipo</li>
<li>Parlare di predicati e domini.</li>
</ol>
<p><a href="/notes/teoria-dei-tipi#tipo-estensionali-o-intensionali">Teoria dei Tipi#Tipo estensionali o intensionali</a>  abbiamo parlato di estensionale o intensionale.</p>
<ul>
<li>
<p>Esempi di <strong>sussunzione</strong>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 16.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 16"></p>
  <img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 17.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 17">
</li>
</ul>
<h2 id="polimorfismo-parametrico">Polimorfismo parametrico<a hidden class="anchor" aria-hidden="true" href="#polimorfismo-parametrico">#</a></h2>
<p>Il problema che il polimorfismo parametrico risolve rispetto a quello di sottotipo è il fatto che per ritrovare l&rsquo;informazione iniziale, c&rsquo;è bisogno di castin.
Con il polimorfismo parametrico non avremo più bisogno di questo.</p>
<h3 id="tipi-parametrici">Tipi parametrici<a hidden class="anchor" aria-hidden="true" href="#tipi-parametrici">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 18.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 18">
<p>Quando abbiamo delle operazioni anche se non conosciamo esattamente cosa c&rsquo;è sotto, però riguardo la struttura so bene cosa vanno a fare. (un esempio riguardo a questo è il sort).</p>
<p>Questa parametrizzazione ci permette di definire delle cose per tutti i tipi che possiedono quella funzione (ricorda i tratti di rust), ed è per questo che possiamo dire che sia un <strong>tipo universale</strong>. Questa cosa che vale per tutti ci permette di poter provare dei teoremi a gratis.</p>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 19.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 19">
<h4 id="upper-bounds">Upper Bounds<a hidden class="anchor" aria-hidden="true" href="#upper-bounds">#</a></h4>
<p>We can infer which methods are available by setting the upper bounds (methods that are present) with respect to a generic type.</p>
<p>For example, if a class extends from</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">interface</span> <span class="nc">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="kt">int</span><span class="w"> </span><span class="nf">compareTo</span><span class="p">(</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">o</span><span class="w"> </span><span class="p">);}</span><span class="w">
</span></span></span></code></pre></div><p>Then we know that at least the method compareTo is implemented within this function. If not we cannot assume anything for the model.</p>
<h4 id="subtyping-with-generics">Subtyping with Generics<a hidden class="anchor" aria-hidden="true" href="#subtyping-with-generics">#</a></h4>
<ul>
<li>Generic types aresubtypes of theirdeclared supertypes</li>
<li>Type variables aresubtypes of their upperbounds</li>
</ul>
<p>But <strong>different instantiations are unrelated directly</strong>.
They cannot neither be covariant parameter types, neither contravariant. Make sure you know some examples where this is valid.</p>
<ul>
<li>Covariance is unsafe when a generic type argument is used for variables that are written by clients- Mutable fields- Method arguments</li>
<li>Contravariance isunsafe when a generictype argument is usedfor variables that areread by clients- Fields- Method results</li>
</ul>
<p>The standard solution in Java is <strong>non-variancy</strong>, which means the types are neither covariant or contravariant, they just are not compatible with each other. Sometimes this is over restrictive though.
Covariant generics would need lots of runtime checks for every field update and argument passing, which is a lot.</p>
<h4 id="covariance-and-contravariance-annotations">Covariance and Contravariance Annotations<a hidden class="anchor" aria-hidden="true" href="#covariance-and-contravariance-annotations">#</a></h4>
<p>We can make generics support covariance or contravariance if that generic only uses the type parameter in covariant or contravariant settings.
Scalla allows for these kinds of settings:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-scala" data-lang="scala"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Random</span><span class="o">[</span> <span class="kt">+T</span> <span class="o">]</span> <span class="o">{</span> <span class="c1">// +T indicates covariance
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">def</span> <span class="n">next</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ----------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1">// Subtyping Check: Covariance allows Random[String] to be treated as Random[AnyRef]
</span></span></span><span class="line"><span class="cl"><span class="c1">// (i.e., Random[String] &lt;: Random[AnyRef])
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">val</span> <span class="n">r</span><span class="k">:</span> <span class="kt">Random</span><span class="o">[</span> <span class="kt">AnyRef</span> <span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&#34;/notes&#34;</span><span class="o">&gt;</span> <span class="nc">String</span> <span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span> <span class="c1">// Good. Covariance allows this assignment because String &lt;: AnyRef.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// Usage Check: &#39;a&#39; will be inferred as AnyRef because &#39;r&#39;s static type is Random[AnyRef]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">val</span> <span class="n">a</span> <span class="k">=</span> <span class="n">r</span><span class="o">.</span><span class="n">next</span> <span class="c1">// Good. &#39;r.next&#39; returns a T, which resolves to AnyRef here.
</span></span></span><span class="line"><span class="cl"><span class="c1">// ----------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Random</span><span class="o">[</span> <span class="kt">+T</span> <span class="o">]</span> <span class="o">{</span> <span class="c1">// +T indicates covariance
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">def</span> <span class="n">next</span><span class="k">:</span> <span class="kt">T</span> <span class="o">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Error! A covariant type parameter [+T] cannot appear in a contravariant position,
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="c1">// such as a method argument position (input).
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">def</span> <span class="n">initialize</span><span class="o">(</span> <span class="n">i</span><span class="k">:</span> <span class="kt">T</span> <span class="o">)</span> <span class="k">=</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span> <span class="c1">// Scalac: Error. Covariant type T appears in contravariant position. Doesn&#39;t even compile.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">}</span>
</span></span></code></pre></div><p>We can do a similar thing for contravariant generics.</p>
<h3 id="using-parametric-polimorphism">Using Parametric Polimorphism<a hidden class="anchor" aria-hidden="true" href="#using-parametric-polimorphism">#</a></h3>
<p>Parametric polimorphis is the other way along side <a href="/notes/typing-and-subtyping">subtyping</a> and overloading or overriding methods to provide ways to generalize code.</p>
<h4 id="adding-type-parameters">Adding Type Parameters<a hidden class="anchor" aria-hidden="true" href="#adding-type-parameters">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">Person</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">Student</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">PersonComp</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="n">fst</span><span class="p">,</span><span class="w"> </span><span class="n">Person</span><span class="w"> </span><span class="n">snd</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">interface</span> <span class="nc">Comparator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">fst</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">snd</span><span class="w"> </span><span class="p">);}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">TreeSet</span><span class="o">&lt;</span><span class="n">F</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">F</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">TreeSet</span><span class="p">(</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="w"> </span><span class="n">Student</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="w"> </span><span class="n">Student</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PersonComp</span><span class="p">()</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><p>We could not use personcomp without defining the F, because student does not implement that comparator, even if students are persons. The above is too low level to be useful.</p>
<p>The main drawbacks are:</p>
<ul>
<li>The client needs to understand exactly what needs to go there. We need to understand how to use those.</li>
<li>Type instantiation: after a type has been instantiated we cannot change it anymore, so it has some bad dynamicism.</li>
</ul>
<h4 id="allowing-different-comparisons">Allowing different comparisons<a hidden class="anchor" aria-hidden="true" href="#allowing-different-comparisons">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">PersonComp</span><span class="o">&lt;</span><span class="n">T</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Person</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="kt">int</span><span class="w"> </span><span class="nf">compare</span><span class="p">(</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">fst</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">snd</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="k">new</span><span class="w"> </span><span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PersonComp</span><span class="o">&lt;</span><span class="n">Student</span><span class="o">&gt;</span><span class="p">()</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><p>We can also define it in the above manner, and instantiate the correct comparisor.
But:</p>
<ol>
<li>The client still needs to understand how personComp works</li>
<li>We need to have foresight to understand the cases we need to run that simple little thing.
This is a bad way to implement it.</li>
</ol>
<h4 id="using-existential-types">Using Existential Types<a hidden class="anchor" aria-hidden="true" href="#using-existential-types">#</a></h4>
<p>We now have a</p>
<ul>
<li>“There exists a type argument T such that c has typeCollection T&quot;, and this is instantiated automatically by the type system.</li>
</ul>
<p>You can use it like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printAll</span><span class="p">(</span><span class="w"> </span><span class="n">Collection</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="p">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">(</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">printAll</span><span class="p">(</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><p>After that we can <strong>bound the wildcard types correctly</strong> when needed.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printFormatted</span><span class="p">(</span><span class="n">Collection</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Format</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Format</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="n">80</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>We basically can set up subtype or supertype relations between the bounds using the existential quantifier in java!</p>
<p>The existence of this flexible type system allows now to define the tree comparator as:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">TreeSet</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">TreeSet</span><span class="p">(</span><span class="w"> </span><span class="n">Comparator</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>Which is really nice and concise.</p>
<h4 id="type-erasure">Type Erasure<a hidden class="anchor" aria-hidden="true" href="#type-erasure">#</a></h4>
<p>For backwards compatibility all this generics system (which was introduced in Java 5) all the type generics annotation is erased at the bytecode level.</p>
<figure class="center">
<img src="/images/notes/Polimorfismo-20251106105426737.webp" style="width: 100%"   alt="Polimorfismo-20251106105426737" title="Polimorfismo-20251106105426737"/>
<figcaption><p style="text-align:center;"> Slide from ETHz COOP course</p></figcaption>
</figure>.
This means lots of information is lost (you cannot do instance of, you cannot do .class to check the correct type instantiation), and doesn't even allow for arrays of generic types.the underlying mechanism (erasure) sometimes _shows through_, forcing developers to think about how it works internally. For this reason it is called a **leaky abstraction**.
<p>Yet this is not the same for C#, which has this information!</p>
<h4 id="java-generics-are-turing-complete">Java Generics are Turing Complete<a hidden class="anchor" aria-hidden="true" href="#java-generics-are-turing-complete">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">class</span> <span class="nc">T</span><span class="w"> </span><span class="p">{</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">N</span><span class="o">&lt;</span><span class="n">Z</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// A generic class C with type parameter X, </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">// which extends the generic class N with a complex type argument </span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="kd">class</span> <span class="nc">C</span><span class="o">&lt;</span><span class="n">X</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">N</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">C</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&lt;</span><span class="n">X</span><span class="o">&gt;&gt;&gt;&gt;</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm">     * A method that takes an argument of type C&lt;T&gt; and returns 
</span></span></span><span class="line"><span class="cl"><span class="cm">     * a generic type N with a lower-bounded wildcard.
</span></span></span><span class="line"><span class="cl"><span class="cm">     */</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">N</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">super</span><span class="w"> </span><span class="n">C</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="n">C</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>The only thing that we need to check if whether the type <code>C&lt;T&gt;</code> is a subtype of <code>N&lt;? super C&lt;T&gt;&gt;</code>. This leads to a stack overflow in the compiler.
This means we need to check if the class:<code>N&lt;? super C&lt;C&lt;X&gt;&gt;&gt;</code> a subtype <code>? super C&lt;T&gt;</code>. This is true if
<code>C&lt;T&gt; &lt;: N&lt;? super C&lt;C&lt;X&gt;&gt;&gt;</code>, this is true if <code> N&lt;N&lt;? super C&lt;C&lt;X&gt;&gt;&gt;&gt; &lt;: N&lt;? super C&lt;C&lt;X&gt;&gt;&gt;</code>.
The type checker can invent types that are never written, but present in the process! And these are infinite, which means it is indecidable.</p>
<h3 id="c-landscape">C++ Landscape<a hidden class="anchor" aria-hidden="true" href="#c-landscape">#</a></h3>
<h4 id="templating-in-c">Templating in C++<a hidden class="anchor" aria-hidden="true" href="#templating-in-c">#</a></h4>
<p>There are two main differences compared to Java code:</p>
<ul>
<li>Here we <strong>do not check return types</strong></li>
<li>And we do not check availability of methods, <strong>until they are instantiated</strong>.</li>
</ul>
<p>We can add upper bounds, like require, to templates too!</p>
<h4 id="concepts">Concepts<a hidden class="anchor" aria-hidden="true" href="#concepts">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">concept</span> <span class="n">Comparable</span> <span class="o">=</span> <span class="k">requires</span><span class="p">(</span> <span class="n">T</span> <span class="n">a</span><span class="p">,</span> <span class="n">T</span> <span class="n">b</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">a</span><span class="p">.</span><span class="n">compareTo</span><span class="p">(</span> <span class="n">b</span> <span class="p">)</span> <span class="p">}</span> <span class="o">-&gt;</span> <span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span> <span class="nc">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">requires</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Queue</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">T</span> <span class="n">elem</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Queue</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// ... other members and methods
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">};</span>
</span></span></code></pre></div><p>We can check if bounds are satisfied in this manner, statically, but only from c++20.
For backward compatibility, even if you don&rsquo;t add requires, it will compile, even if it shouldn&rsquo;t if we don&rsquo;t include the requirement part.
The C++ compiler will check its presence when you actually instantiate the class and attempt to use it.</p>
<h4 id="template-metaprogramming">Template Metaprogramming<a hidden class="anchor" aria-hidden="true" href="#template-metaprogramming">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;</span><span class="kt">int</span> <span class="n">n</span><span class="o">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Fact</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="n">Fact</span><span class="o">&lt;</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;::</span><span class="n">val</span> <span class="o">*</span> <span class="n">n</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">template</span><span class="o">&lt;&gt;</span>
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Fact</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="k">public</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">static</span> <span class="k">const</span> <span class="kt">int</span> <span class="n">val</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><p>The compiler generates the instantiations and effectively computes the values!</p>
<h4 id="comparisons-with-parametric-polimorphism">Comparisons with Parametric Polimorphism<a hidden class="anchor" aria-hidden="true" href="#comparisons-with-parametric-polimorphism">#</a></h4>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Generic Types</th>
          <th style="text-align: left">Templates</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">- Modular type checking of generic class</td>
          <td style="text-align: left">- Type checking per instantiation</td>
      </tr>
      <tr>
          <td style="text-align: left">- Overhead (e.g., upper bounds)</td>
          <td style="text-align: left">- Flexibility like with structural typing</td>
      </tr>
      <tr>
          <td style="text-align: left">- Run-time support desirable</td>
          <td style="text-align: left">- No need for run-time support</td>
      </tr>
      <tr>
          <td style="text-align: left">- Typically no meta-programming</td>
          <td style="text-align: left">- Meta-programming is Turing-complete</td>
      </tr>
  </tbody>
</table>
<h3 id="ibridazione-con-polimorfismo-di-sottotipo">Ibridazione con polimorfismo di sottotipo<a hidden class="anchor" aria-hidden="true" href="#ibridazione-con-polimorfismo-di-sottotipo">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 20.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 20">
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 21.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 21">
<p>A volte non vogliamo che la nostra funzione vada per tutti, senza quindi conoscere come è fatto sotto, vorremmo avere certe funzioni (quindi un sottotipo del tipo generale), per esempio nei tratti di rust possiamo dire che questa nostra funzione vada per tutte in cui è definita una certa funzione/interfaccia/tratto, in questo senso andiamo ad utilizzare un sottotipo</p>
<p>Array c&rsquo;erano già all&rsquo;inizio, lo puoi utilizzare covariante in entrambe le direzioni, mentre altrimenti non ti permetterebbe di utilizzare in entrambe le direzioni (vuole che tu sia prima sicuro se vuoi utilizzarlo come consumer o producer. un buon modo per ricordarsi è <strong>PECS</strong> producer deve estender, mentre consumer deve fare super.</p>
<p>Abbiamo sempre che è safe, nel senso che ritorna sempre un tipo senza bloccarsi (e posso sapere a tempo di compilazione cosa vada a ritornare).</p>
<h3 id="esempi-di-utilizzo-di-polimorfismo-parametrico-e-di-sottotipo">Esempi di utilizzo di polimorfismo parametrico e di sottotipo<a hidden class="anchor" aria-hidden="true" href="#esempi-di-utilizzo-di-polimorfismo-parametrico-e-di-sottotipo">#</a></h3>
<img src="/images/notes/image/universita/ex-notion/Polimorfismo/Untitled 22.png" style="width: 100%" class="center" alt="image/universita/ex-notion/Polimorfismo/Untitled 22">
<h3 id="tipi-maybe-e-result">Tipi maybe e result<a hidden class="anchor" aria-hidden="true" href="#tipi-maybe-e-result">#</a></h3>
<p>Questi sono alcuni tipi ispirati alle monadi, solamente capire in che formato sono:</p>
<ul>
<li>Maybe: Some qualcosa&gt; + None</li>
<li>Result: come le promises di js, possiamo esprimere i risultati di errore e nel caso sia andato tutto bene.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/programming-languages/">Programming-Languages</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on x"
            href="https://x.com/intent/tweet/?text=Polimorfismo&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f&amp;hashtags=programming-languages">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f&amp;title=Polimorfismo&amp;summary=Polimorfismo&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f&title=Polimorfismo">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on whatsapp"
            href="https://api.whatsapp.com/send?text=Polimorfismo%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on telegram"
            href="https://telegram.me/share/url?text=Polimorfismo&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Polimorfismo on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Polimorfismo&u=https%3a%2f%2fflecart.github.io%2fnotes%2fpolimorfismo%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
