<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Structured Query Language | X. Angelo Huang&#39;s Blog</title>
<meta name="keywords" content="ðŸ“™basi-di-dati, ðŸ““big-data">
<meta name="description" content="Little bits of history
It was invented in 1970 in Almaden (San Jose) by IBM (Don Chamberlin, Raymond Boyce worked on this) for the first relational database, called system R. Then for copyright issues it hasn&rsquo;t been called SEQUEL, so they branded it as SQL.
SQL is a declarative language
With declaratives language there is a separation between what I call the intentionality and the actual process. In declarative languages we just say what we want the result to be, and don&rsquo;t care what the actual implementation is like.
This allows queries to be executed and optimized in different ways, even if the query on the surface is the same">
<meta name="author" content="
By Xuanqiang &#39;Angelo&#39; Huang">
<link rel="canonical" href="https://flecart.github.io/notes/structured-query-language/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f790d9af969c56c079c1ce2d5972a04486bf3d6144295d5fba319830e1e55a7a.css" integrity="sha256-95DZr5acVsB5wc4tWXKgRIa/PWFEKV1fujGYMOHlWno=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://flecart.github.io/favicon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://flecart.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://flecart.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://flecart.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://flecart.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://flecart.github.io/notes/structured-query-language/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        processEscapes: true
      }
    });
  </script>
<script type="text/javascript" async
src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>






      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WW6NN2QGKF"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WW6NN2QGKF');
        }
      </script><meta property="og:url" content="https://flecart.github.io/notes/structured-query-language/">
  <meta property="og:site_name" content="X. Angelo Huang&#39;s Blog">
  <meta property="og:title" content="Structured Query Language">
  <meta property="og:description" content="Little bits of history It was invented in 1970 in Almaden (San Jose) by IBM (Don Chamberlin, Raymond Boyce worked on this) for the first relational database, called system R. Then for copyright issues it hasnâ€™t been called SEQUEL, so they branded it as SQL.
SQL is a declarative language With declaratives language there is a separation between what I call the intentionality and the actual process. In declarative languages we just say what we want the result to be, and donâ€™t care what the actual implementation is like. This allows queries to be executed and optimized in different ways, even if the query on the surface is the same">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="notes">
    <meta property="article:tag" content="ðŸ“™Basi-Di-Dati">
    <meta property="article:tag" content="ðŸ““Big-Data">
      <meta property="og:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://flecart.github.io/images/papermod-cover.png">
<meta name="twitter:title" content="Structured Query Language">
<meta name="twitter:description" content="Little bits of history
It was invented in 1970 in Almaden (San Jose) by IBM (Don Chamberlin, Raymond Boyce worked on this) for the first relational database, called system R. Then for copyright issues it hasn&rsquo;t been called SEQUEL, so they branded it as SQL.
SQL is a declarative language
With declaratives language there is a separation between what I call the intentionality and the actual process. In declarative languages we just say what we want the result to be, and don&rsquo;t care what the actual implementation is like.
This allows queries to be executed and optimized in different ways, even if the query on the surface is the same">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Notes",
      "item": "https://flecart.github.io/notes/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Structured Query Language",
      "item": "https://flecart.github.io/notes/structured-query-language/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Structured Query Language",
  "name": "Structured Query Language",
  "description": "Little bits of history It was invented in 1970 in Almaden (San Jose) by IBM (Don Chamberlin, Raymond Boyce worked on this) for the first relational database, called system R. Then for copyright issues it hasn\u0026rsquo;t been called SEQUEL, so they branded it as SQL.\nSQL is a declarative language With declaratives language there is a separation between what I call the intentionality and the actual process. In declarative languages we just say what we want the result to be, and don\u0026rsquo;t care what the actual implementation is like. This allows queries to be executed and optimized in different ways, even if the query on the surface is the same\n",
  "keywords": [
    "ðŸ“™basi-di-dati", "ðŸ““big-data"
  ],
  "articleBody": "Little bits of history It was invented in 1970 in Almaden (San Jose) by IBM (Don Chamberlin, Raymond Boyce worked on this) for the first relational database, called system R. Then for copyright issues it hasnâ€™t been called SEQUEL, so they branded it as SQL.\nSQL is a declarative language With declaratives language there is a separation between what I call the intentionality and the actual process. In declarative languages we just say what we want the result to be, and donâ€™t care what the actual implementation is like. This allows queries to be executed and optimized in different ways, even if the query on the surface is the same\nSQL is a functional language SQL is also a functional language, because the main principle is based on expression evaluation. This allows SQL to have some nested expressions in it.\nData types Default data types I tipi di dati sono\nCarattere numero data tempo intervallo di tempo booleano blob (binario) clob (carattere) Setting custom data types Ma possono essere definiti anche tipi di dati custom, la sintassi Ã¨ simile\nCREATE DOMAIN Grade AS SMALLINT DEFAULT NULL CHECK (value \u003e= 18 AND value \u003c= 30) Altering existing domains In cui posso mettere anche dei check custom.\nDROP DOMAIN Per cancellare il domain lÃ¬ presente\nE si puÃ² anche cambiare con\nALTER DOMAIN Posso aggiungere o eliminare constraints per esempio.\nPerÃ² a seguito di questo comando, dovrei essere in grado di modificare correttamente i valori con schema cambiato, metterli a default, o metterli a null diciamo.\nData definitions Database Creation CREATE DATABASE db_name, che va a creare un database che puÃ² contenere molte tavole, schemi diversi e simili.\nSchema Ãˆ una descrizione logica di come Ã¨ strutturato lâ€™intero database, non Ã¨ da confondere con lo schema di una singola tavola.\nSchema creation Lo schema Ã¨ la specificazione dei domini e delle restrizioni che ogni colonna deve avere per essere integra. In piÃ¹ possono essere definite view diverse o anche authorization.\nCREATE SCHEMA schema_name\nTable La tavola specifica una relazione vuota, che puÃ² seguire o meno uno schema, come definito di sopra.\nCreate table !500\nTable constraints Durante la creazione di una table posso specificare cose come\nTipo (intero, carattere?) Valore di default Constraints (tipo NOT NULL) Reference esterna o chiave di tavola. Deletion and change Abbiamo comandi come\nDROP TABLE ALTER TABLE Per eliminare o cambiare lo schema della singola table.\nSolitamente posso modificare singole colonne per sql, aggiungere constraints o dati di default.\nReferential trigger Per le foreign keys posso andare a definire anche una\nAzione che viene eseguito quanto lâ€™altra tabella viene Aggiornata Eliminata Azioni permesse sulla table con foreign key Cascade (eliminare o aggiornare di conseguenza) Set null set default no op, che non permette di fare lâ€™operazione nemmeno sulla tavola originaria. Indexes Sono delle strutture di dati che permettono di svolgere certe operazioni in modo piÃ¹ efficiente, cercheremo di distinguere i casi in cui Ã¨ effettivamente utile andare a creare questo indice. Questo solitamente Ã¨ fatto al livello fisico.\nCREATE INDEX idx_surname ON officer (Surname) Creo un indice con nome, su un attributo della table.\nData operations CRUD:\nCreate -\u003e Insert Read -\u003e SELECT Update -\u003e UPDATE Delete -\u003e DELETE (molto rischioso!) Select Le operazioni di select Ã¨ molto simile a proiezione e selezione che sono trattati in Relational Algebra.\nSintassi classica SELECT attributes FROM tables and joins [WHERE condition] [GROUP BY attributes] [HAVING conditions] [ORDER BY attributes] Compare: algebra relazionale Si possono considerare molte similitudini in Relational Algebra\nSelect and projection $\\pi_{age, height}(\\sigma_{age \u003c 30}(people))$ Select with renaming (projection) Pure select $\\sigma_{age\u003c30}(People)$ Projection without selection $\\pi_{age, height}(people)$ che prende colonne. Da questo si puÃ² notare che SELECT da sola gestisce tre relazioni\nSelect Projection Rename Che sono stati trattati nellâ€™algebra relazionale. Possono anche essere estesi ad avere le JOIN usando cose del from. Si potrebbe semplificare affermando\nWHERE = Selection in algebra relazionale SELECT = projection FROM = prodotto cartesiano. Esempio complesso di query con Cartesian product e renaming ! 500\nLike and null values Like Ã¨ utilizzato per fare pattern matching sulla stringa. ! 300 Mentre i null values si possono gestire con sintassi $AGE\\, is \\, NULL$\nJoin Sintassi precedentemente nella sezione #Select abbiamo utilizzato join delle tables in maniera implicita utilizzando il prodotto cartesiano. Esiste perÃ² anche una istruzione esplicita per dire che vogliamo fare JOIN, molto coerente con la teoria presente in Relational Algebra.\nSELECT ... FROM leftTable [JOIN rightTable ON condition] [WHERE predicate] Esempio di differenza fra JOIN e il prodotto cartesiano con la sintassi di sopra. Inner and outer joins La differenza principale fra inner e outer join Ã¨\nInner Dati che non hanno elementi in comune vengono scartati (come quello presente sulla slides di sopra) questo viene anche chiamato natural join. Outer Vengono tenuti anche i dati che non fanno matching in una parte in comune, solitamente questi sono sempre chiamati left o right, ma vedremo dopo esattamente quale sia la semantica LEFT: (right Ã¨ esattamente il contrario) Ritorna sempre il sinistro, ma il destro puÃ² anche essere null FULL: ritorna sinistro se câ€™Ã¨ e destro se câ€™Ã¨.\nRemaining CRUD operations La sintassi di insertion, deletion and update Ã¨ molto piÃ¹ semplice rispetto alla lettura, quindi la mettiamo nella sottosezione.\nInsert NOTE: Ã¨ importante lâ€™ordine di inserimento!\nINSERT INTO table [attrs] VALUES(vals) | SELECT roba.. ! 500\nUpdate UPDATE TableName SET Attribute = \u003c Expression, select, null or similar \u003e WHERE \u003ccond\u003e Esempi: Delete DELETE FROM table [WHERE condition] ### Altre Istruzioni #### Sorting Per fare sorting basta aggiungere **ORDER BY** Order by puÃ² essere ascendente o discendente (facile se Ã¨ alfanumerica come attributo). DEFAULT: descending. Union intersection and difference UNIONE\nUso normale: come in figura Nel caso venga definito ALL, anche se Ã¨ doppio, viene mantenuto. Nel caso di conflitti semantici, utilizzare positional notation, se sono nella stessa posizione vengono messi assieme (il nome dellâ€™attributo Ã¨ sempre della prima tavola) ! 500 DIFFERENZA Si usa except, e poi altre notazioni sono simil ial precedente.\nINTERSEZIONE Si usa intersect come istruzione. (ma Ã¨ meglio usare il where, descritto in #Select, che Ã¨ equivalente).\nIntersection\nNested Queries NOTA: ogni subquery viene eseguita ogni volta per\nCorrectness conditions Le queries innestate vengono eseguite per ogni tupla esterna, e sono corrette se quanto viene ritornato Ã¨ coerente con lâ€™input del secondo\nSELECT Name, Income FROM People WHERE Name IN (SELECT Father FROM Fatherhood, People WHERE Child=Name AND Income\u003e20) In questo caso IN si aspetta poi un insieme, che Ã¨ quanto ritornato nella subquery, il vantaggio principale di questo approccio Ã¨ la leggibilitÃ ,\nVisibilitÃ  Ci sono due note riguardo la visibilitÃ , perchÃ© seguendo una logica simile agli scopes strutturali se sono in scope esterno non posso accedere a quello internamente definito. Mentre la query innestata puÃ² leggere variabili definite esternamente. Chiaramente se hai due nested diverse, non riescono ad avere stesso variabile, segui le stesse regole di scoping definito in linguaggi di programmazione.\nExistance Exists Molto intuitivo, se sai un po' di Logica del Primo ordine. #### Any and ALL Sono altri predicati possibili per cose innestate Aggregate functions Gli aggregate consentono di ritornare un valore unico da una lista di dati. Hanno una semantica precisa: Prima fatto tutto, ignorando dellâ€™esistenza del groupby, fanno una selezione di tutti gli attributi che sono presenti qui, e poi effettivamente raggruppano. Sul libro atzeni Ã¨ descritto in pagina 123. Lâ€™aspetto principale da ricordare Ã¨ che attributi in group by sono superset degli attributi di selezione.\nClassical sintax La sintassi classica per questo genere di query Ã¨\nAggr([DISTINCT] attribute) Attribute Ã¨ il dominio su cui andare a runnare la funzione di aggregazione.\nSome aggregate functions Count Ritorna semplicemente il numero di elementi dentro la lista Caso interessante da ricordare Ã¨ count NULL values AVG, MAX, MIN Sintassi Ã¨ uguale al precedente, poi la semantica Ã¨ un poâ€™ diversa, ma credo sia chiara dal nome delal fuznione aggregate\nGrouping La sintassi classica Ã¨ GROUP BY attributeList.\nSemantica Prima esegue la query normale, come se grouping non esistesse. Poi esegue il grouping, e se câ€™Ã¨ un aggregate function, eseguirlo sul singolo gruppo. Questa cosa Ã¨ molto importante da conoscere perchÃ© altrimenti sbagli al query e questo mi era successo in passato, ci ho speso molto tempo. Giustifica anche il motivo per cui devi fare select dellâ€™attributo di cui vuoi fare grouping, altrimenti non hai niente da grouppare diciamo! NOTA: aggregate Ã¨ eseguito sul singolo gruppo!\nOther conditions Si puÃ² usare HAVING per aggiungere altre condizioni sui gruppi in modo simile a quanto faceva WHERE dentro #Select.\nComportamento con i NULLs Altro Sullâ€™esecuzione di SQL Ãˆ il DBMS che si occupa di eseguire la query ed ottimizzarla. Avere query corrette e leggibili Ã¨ piÃ¹ importante. Questo descrive anche il perchÃ© sarebbe a volte sensato farle innestate. ",
  "wordCount" : "1455",
  "inLanguage": "en",
  "image": "https://flecart.github.io/images/papermod-cover.png","datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Xuanqiang 'Angelo' Huang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://flecart.github.io/notes/structured-query-language/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "X. Angelo Huang's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://flecart.github.io/favicon-192x192.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://flecart.github.io/" accesskey="h" title="X. Angelo Huang&#39;s Blog (Alt + H)">X. Angelo Huang&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://flecart.github.io/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://flecart.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://flecart.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://flecart.github.io/notes/">Notes</a></div>
    <h1 class="post-title entry-hint-parent">
      Structured Query Language
    </h1>
    <div class="post-meta">Reading Time: 7 minutes&nbsp;Â·&nbsp;
By Xuanqiang &#39;Angelo&#39; Huang

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul>
                <li>
                    <a href="#little-bits-of-history" aria-label="Little bits of history">Little bits of history</a><ul>
                        
                <li>
                    <a href="#sql-is-a-declarative-language" aria-label="SQL is a declarative language">SQL is a declarative language</a></li>
                <li>
                    <a href="#sql-is-a-functional-language" aria-label="SQL is a functional language">SQL is a functional language</a></li></ul>
                </li>
                <li>
                    <a href="#data-types" aria-label="Data types">Data types</a><ul>
                        
                <li>
                    <a href="#default-data-types" aria-label="Default data types">Default data types</a></li>
                <li>
                    <a href="#setting-custom-data-types" aria-label="Setting custom data types">Setting custom data types</a></li>
                <li>
                    <a href="#altering-existing-domains" aria-label="Altering existing domains">Altering existing domains</a></li></ul>
                </li></ul>
                    
                <li>
                    <a href="#data-definitions" aria-label="Data definitions">Data definitions</a><ul>
                        
                <li>
                    <a href="#database" aria-label="Database">Database</a><ul>
                        
                <li>
                    <a href="#creation" aria-label="Creation">Creation</a></li></ul>
                </li>
                <li>
                    <a href="#schema" aria-label="Schema">Schema</a><ul>
                        
                <li>
                    <a href="#schema-creation" aria-label="Schema creation">Schema creation</a></li></ul>
                </li>
                <li>
                    <a href="#table" aria-label="Table">Table</a><ul>
                        
                <li>
                    <a href="#create-table" aria-label="Create table">Create table</a></li>
                <li>
                    <a href="#table-constraints" aria-label="Table constraints">Table constraints</a></li>
                <li>
                    <a href="#deletion-and-change" aria-label="Deletion and change">Deletion and change</a></li>
                <li>
                    <a href="#referential-trigger" aria-label="Referential trigger">Referential trigger</a></li>
                <li>
                    <a href="#indexes" aria-label="Indexes">Indexes</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#data-operations" aria-label="Data operations">Data operations</a><ul>
                        
                <li>
                    <a href="#select" aria-label="Select">Select</a><ul>
                        
                <li>
                    <a href="#sintassi-classica" aria-label="Sintassi classica">Sintassi classica</a></li>
                <li>
                    <a href="#compare-algebra-relazionale" aria-label="Compare: algebra relazionale">Compare: algebra relazionale</a></li>
                <li>
                    <a href="#like-and-null-values" aria-label="Like and null values">Like and null values</a></li></ul>
                </li>
                <li>
                    <a href="#join" aria-label="Join">Join</a><ul>
                        
                <li>
                    <a href="#sintassi" aria-label="Sintassi">Sintassi</a></li>
                <li>
                    <a href="#inner-and-outer-joins" aria-label="Inner and outer joins">Inner and outer joins</a></li></ul>
                </li>
                <li>
                    <a href="#remaining-crud-operations" aria-label="Remaining CRUD operations">Remaining CRUD operations</a><ul>
                        
                <li>
                    <a href="#insert" aria-label="Insert">Insert</a></li>
                <li>
                    <a href="#update" aria-label="Update">Update</a></li>
                <li>
                    <a href="#delete" aria-label="Delete">Delete</a></li>
                <li>
                    <a href="#union-intersection-and-difference" aria-label="Union intersection and difference">Union intersection and difference</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#nested-queries" aria-label="Nested Queries">Nested Queries</a><ul>
                        
                <li>
                    <a href="#correctness-conditions" aria-label="Correctness conditions">Correctness conditions</a><ul>
                        
                <li>
                    <a href="#visibilit%c3%a0" aria-label="VisibilitÃ ">VisibilitÃ </a></li></ul>
                </li>
                <li>
                    <a href="#existance" aria-label="Existance">Existance</a><ul>
                        
                <li>
                    <a href="#exists" aria-label="Exists">Exists</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#aggregate-functions" aria-label="Aggregate functions">Aggregate functions</a><ul>
                        
                <li>
                    <a href="#classical-sintax" aria-label="Classical sintax">Classical sintax</a></li>
                <li>
                    <a href="#some-aggregate-functions" aria-label="Some aggregate functions">Some aggregate functions</a><ul>
                        
                <li>
                    <a href="#count" aria-label="Count">Count</a></li>
                <li>
                    <a href="#avg-max-min" aria-label="AVG, MAX, MIN">AVG, MAX, MIN</a></li></ul>
                </li>
                <li>
                    <a href="#grouping" aria-label="Grouping">Grouping</a><ul>
                        
                <li>
                    <a href="#semantica" aria-label="Semantica">Semantica</a></li>
                <li>
                    <a href="#other-conditions" aria-label="Other conditions">Other conditions</a></li>
                <li>
                    <a href="#comportamento-con-i-nulls" aria-label="Comportamento con i NULLs">Comportamento con i NULLs</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#altro" aria-label="Altro">Altro</a><ul>
                        
                <li>
                    <a href="#sullesecuzione-di-sql" aria-label="Sull&rsquo;esecuzione di SQL">Sull&rsquo;esecuzione di SQL</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="little-bits-of-history">Little bits of history<a hidden class="anchor" aria-hidden="true" href="#little-bits-of-history">#</a></h3>
<p>It was invented in 1970 in Almaden (San Jose) by IBM (Don Chamberlin, Raymond Boyce worked on this) for the first relational database, called system R. Then for copyright issues it hasn&rsquo;t been called SEQUEL, so they branded it as SQL.</p>
<h4 id="sql-is-a-declarative-language">SQL is a declarative language<a hidden class="anchor" aria-hidden="true" href="#sql-is-a-declarative-language">#</a></h4>
<p>With declaratives language there is a separation between what I call the intentionality and the actual process. In declarative languages we just say what we want the result to be, and don&rsquo;t care what the actual implementation is like.
This allows queries to be executed and optimized in different ways, even if the query on the surface is the same</p>
<h4 id="sql-is-a-functional-language">SQL is a functional language<a hidden class="anchor" aria-hidden="true" href="#sql-is-a-functional-language">#</a></h4>
<p>SQL is also a functional language, because the main principle is based on <strong>expression evaluation</strong>. This allows SQL to have some nested expressions in it.</p>
<h3 id="data-types">Data types<a hidden class="anchor" aria-hidden="true" href="#data-types">#</a></h3>
<h4 id="default-data-types">Default data types<a hidden class="anchor" aria-hidden="true" href="#default-data-types">#</a></h4>
<p>I tipi di dati sono</p>
<ul>
<li>Carattere</li>
<li>numero</li>
<li>data</li>
<li>tempo</li>
<li>intervallo di tempo</li>
<li>booleano</li>
<li>blob (binario)</li>
<li>clob (carattere)</li>
</ul>
<h4 id="setting-custom-data-types">Setting custom data types<a hidden class="anchor" aria-hidden="true" href="#setting-custom-data-types">#</a></h4>
<p>Ma possono essere definiti anche tipi di dati custom, la sintassi Ã¨ simile</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">DOMAIN</span><span class="w"> </span><span class="n">Grade</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">AS</span><span class="w"> </span><span class="nb">SMALLINT</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">CHECK</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">18</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">30</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><h4 id="altering-existing-domains">Altering existing domains<a hidden class="anchor" aria-hidden="true" href="#altering-existing-domains">#</a></h4>
<p>In cui posso mettere anche dei <strong>check custom</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="k">DOMAIN</span><span class="w">
</span></span></span></code></pre></div><p>Per cancellare il domain lÃ¬ presente</p>
<p>E si puÃ² anche cambiare con</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">ALTER</span><span class="w"> </span><span class="k">DOMAIN</span><span class="w">
</span></span></span></code></pre></div><p>Posso <strong>aggiungere o eliminare</strong> constraints per esempio.</p>
<p>PerÃ² a seguito di questo comando, dovrei essere in grado di <strong>modificare correttamente</strong> i valori con schema cambiato, metterli a default, o metterli a null diciamo.</p>
<h2 id="data-definitions">Data definitions<a hidden class="anchor" aria-hidden="true" href="#data-definitions">#</a></h2>
<h3 id="database">Database<a hidden class="anchor" aria-hidden="true" href="#database">#</a></h3>
<h4 id="creation">Creation<a hidden class="anchor" aria-hidden="true" href="#creation">#</a></h4>
<p><code>CREATE DATABASE db_name</code>, che va a creare un database che puÃ² contenere molte tavole, schemi diversi e simili.</p>
<h3 id="schema">Schema<a hidden class="anchor" aria-hidden="true" href="#schema">#</a></h3>
<p>Ãˆ una <strong>descrizione logica</strong> di come Ã¨ strutturato l&rsquo;intero database, non Ã¨ da confondere con lo schema di una singola tavola.</p>
<h4 id="schema-creation">Schema creation<a hidden class="anchor" aria-hidden="true" href="#schema-creation">#</a></h4>
<p>Lo schema Ã¨ la <strong>specificazione dei domini</strong> e delle restrizioni che ogni colonna deve avere per essere integra.
In piÃ¹ possono essere definite view diverse o anche <strong>authorization</strong>.</p>
<p><code>CREATE SCHEMA schema_name</code></p>
<h3 id="table">Table<a hidden class="anchor" aria-hidden="true" href="#table">#</a></h3>
<p>La tavola <strong>specifica</strong> una relazione vuota, che puÃ² seguire o meno uno schema, come definito di sopra.</p>
<h4 id="create-table">Create table<a hidden class="anchor" aria-hidden="true" href="#create-table">#</a></h4>
<p>!<a href="/notes/structured-query-language-1697621915956.jpeg-">500</a></p>
<h4 id="table-constraints">Table constraints<a hidden class="anchor" aria-hidden="true" href="#table-constraints">#</a></h4>
<p>Durante la creazione di una table posso specificare cose come</p>
<ol>
<li>Tipo (intero, carattere?)</li>
<li>Valore di default</li>
<li>Constraints (tipo NOT NULL)</li>
<li>Reference esterna o chiave di tavola.</li>
</ol>
<h4 id="deletion-and-change">Deletion and change<a hidden class="anchor" aria-hidden="true" href="#deletion-and-change">#</a></h4>
<p>Abbiamo comandi come</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w">
</span></span></span></code></pre></div><p>Per eliminare o cambiare lo schema della singola table.</p>
<p>Solitamente posso <strong>modificare singole colonne</strong> per sql, aggiungere constraints o dati di default.</p>
<h4 id="referential-trigger">Referential trigger<a hidden class="anchor" aria-hidden="true" href="#referential-trigger">#</a></h4>
<p>Per le <strong>foreign keys</strong> posso andare a definire anche una</p>
<ul>
<li>Azione che viene eseguito quanto l&rsquo;altra tabella viene
<ul>
<li>Aggiornata</li>
<li>Eliminata</li>
</ul>
</li>
<li>Azioni permesse sulla table con foreign key
<ul>
<li>Cascade (eliminare o aggiornare di conseguenza)</li>
<li>Set null</li>
<li>set default</li>
<li>no op, che non permette di fare l&rsquo;operazione nemmeno sulla tavola originaria.</li>
</ul>
</li>
</ul>
<h4 id="indexes">Indexes<a hidden class="anchor" aria-hidden="true" href="#indexes">#</a></h4>
<p>Sono delle strutture di dati che <em>permettono di svolgere certe operazioni in modo piÃ¹ efficiente</em>, cercheremo di distinguere i casi in cui Ã¨ effettivamente utile andare a creare questo indice.
Questo solitamente Ã¨ fatto <strong>al livello fisico</strong>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">idx_surname</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">ON</span><span class="w"> </span><span class="n">officer</span><span class="w"> </span><span class="p">(</span><span class="n">Surname</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></div><p>Creo un indice con nome, su un attributo della table.</p>
<h2 id="data-operations">Data operations<a hidden class="anchor" aria-hidden="true" href="#data-operations">#</a></h2>
<p>CRUD:</p>
<ul>
<li>Create -&gt; Insert</li>
<li>Read -&gt; SELECT</li>
<li>Update -&gt; UPDATE</li>
<li>Delete -&gt; DELETE (molto rischioso!)</li>
</ul>
<h3 id="select">Select<a hidden class="anchor" aria-hidden="true" href="#select">#</a></h3>
<p>Le operazioni di select Ã¨ molto simile a <strong>proiezione e selezione</strong>  che sono trattati in <a href="/notes/relational-algebra">Relational Algebra</a>.</p>
<h4 id="sintassi-classica">Sintassi classica<a hidden class="anchor" aria-hidden="true" href="#sintassi-classica">#</a></h4>
<pre tabindex="0"><code class="language-pseudocode" data-lang="pseudocode">SELECT attributes
FROM tables and joins
[WHERE condition]
[GROUP BY attributes]
[HAVING conditions]
[ORDER BY attributes]
</code></pre><h4 id="compare-algebra-relazionale">Compare: algebra relazionale<a hidden class="anchor" aria-hidden="true" href="#compare-algebra-relazionale">#</a></h4>
<p>Si possono considerare molte similitudini in <a href="/notes/relational-algebra">Relational Algebra</a></p>
<ul>
<li>Select and projection $\pi_{age, height}(\sigma_{age < 30}(people))$</li>
<li>Select with renaming (projection)</li>
<li>Pure select $\sigma_{age<30}(People)$</li>
<li>Projection without selection $\pi_{age, height}(people)$ che prende colonne.</li>
</ul>
<p>Da questo si puÃ² notare che <code>SELECT</code> da sola gestisce tre relazioni</p>
<ul>
<li>Select</li>
<li>Projection</li>
<li>Rename
Che sono stati trattati nell&rsquo;algebra relazionale.
Possono anche essere estesi ad avere le <code>JOIN</code> usando cose del from.</li>
</ul>
<p>Si potrebbe semplificare affermando</p>
<ul>
<li>WHERE = Selection in algebra relazionale</li>
<li>SELECT = projection</li>
<li>FROM = prodotto cartesiano.</li>
</ul>
<p>Esempio complesso di query con Cartesian product e renaming
!<a href="/notes/structured-query-language-1697018107929.jpeg-"> 500</a></p>
<h4 id="like-and-null-values">Like and null values<a hidden class="anchor" aria-hidden="true" href="#like-and-null-values">#</a></h4>
<p>Like Ã¨ utilizzato per fare <strong>pattern matching</strong> sulla stringa.
!<a href="/notes/structured-query-language-1697017834963.jpeg-"> 300</a>
Mentre i null values si possono gestire con sintassi $AGE\, is \, NULL$</p>
<h3 id="join">Join<a hidden class="anchor" aria-hidden="true" href="#join">#</a></h3>
<h4 id="sintassi">Sintassi<a hidden class="anchor" aria-hidden="true" href="#sintassi">#</a></h4>
<p>precedentemente nella sezione <a href="/notes#select">#Select</a> abbiamo utilizzato join delle tables in <strong>maniera implicita</strong> utilizzando il prodotto cartesiano.
Esiste perÃ² anche una istruzione esplicita per dire che vogliamo fare JOIN, molto coerente con la teoria presente in <a href="/notes/relational-algebra">Relational Algebra</a>.</p>
<pre tabindex="0"><code class="language-pseudocode" data-lang="pseudocode">SELECT ...
FROM leftTable [JOIN rightTable ON condition]
[WHERE predicate]
</code></pre><img src="/images/notes/Structured Query Language-1697018736881.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697018736881">
Esempio di differenza fra JOIN e il prodotto cartesiano con la sintassi di sopra.
<h4 id="inner-and-outer-joins">Inner and outer joins<a hidden class="anchor" aria-hidden="true" href="#inner-and-outer-joins">#</a></h4>
<p>La differenza principale fra inner e outer join Ã¨</p>
<ul>
<li><strong>Inner</strong> Dati che non hanno elementi in comune vengono scartati (come quello presente sulla slides di sopra) questo viene anche chiamato <strong>natural join</strong>.</li>
<li><strong>Outer</strong> Vengono tenuti anche i dati che non fanno matching in una parte in comune, solitamente questi sono sempre chiamati <strong>left</strong> o <strong>right</strong>, ma vedremo dopo esattamente quale sia la semantica</li>
</ul>
<p>LEFT: (right Ã¨ esattamente il contrario)
Ritorna sempre il sinistro, ma il destro puÃ² anche essere null
FULL:
ritorna sinistro se c&rsquo;Ã¨ e destro se c&rsquo;Ã¨.</p>
<img src="/images/notes/Structured Query Language-1697020973784.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697020973784">
<h3 id="remaining-crud-operations">Remaining CRUD operations<a hidden class="anchor" aria-hidden="true" href="#remaining-crud-operations">#</a></h3>
<p>La sintassi di insertion, deletion and update Ã¨ molto piÃ¹ semplice rispetto alla lettura, quindi la mettiamo nella sottosezione.</p>
<h4 id="insert">Insert<a hidden class="anchor" aria-hidden="true" href="#insert">#</a></h4>
<p>NOTE: Ã¨ <strong>importante l&rsquo;ordine di inserimento!</strong></p>
<pre tabindex="0"><code class="language-pseudocode" data-lang="pseudocode">INSERT INTO table [attrs]
VALUES(vals) | SELECT roba..
</code></pre><p>!<a href="/notes/structured-query-language-1697023320700.jpeg-"> 500</a></p>
<h4 id="update">Update<a hidden class="anchor" aria-hidden="true" href="#update">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">UPDATE</span><span class="w"> </span><span class="n">TableName</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">SET</span><span class="w"> </span><span class="n">Attribute</span><span class="w"> </span><span class="o">=</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="o">&lt;</span><span class="w"> </span><span class="n">Expression</span><span class="p">,</span><span class="w"> </span><span class="k">select</span><span class="p">,</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">similar</span><span class="w"> </span><span class="o">&gt;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="o">&lt;</span><span class="n">cond</span><span class="o">&gt;</span><span class="w">
</span></span></span></code></pre></div><p><strong>Esempi:</strong>
<img src="/images/notes/Structured Query Language-1697623815982.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697623815982"></p>
<h4 id="delete">Delete<a hidden class="anchor" aria-hidden="true" href="#delete">#</a></h4>
<pre tabindex="0"><code class="language-pseudocode" data-lang="pseudocode">DELETE FROM table
	[WHERE condition]
</code></pre><img src="/images/notes/Structured Query Language-1697023436241.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697023436241">
### Altre Istruzioni
#### Sorting 
Per fare sorting basta aggiungere **ORDER BY**
Order by puÃ² essere ascendente o discendente (facile se Ã¨ alfanumerica come attributo).
DEFAULT: descending.
<h4 id="union-intersection-and-difference">Union intersection and difference<a hidden class="anchor" aria-hidden="true" href="#union-intersection-and-difference">#</a></h4>
<p><strong>UNIONE</strong></p>
<ul>
<li>Uso normale: come in figura</li>
<li>Nel caso venga definito <strong>ALL</strong>, anche se Ã¨ doppio, viene mantenuto.</li>
<li>Nel caso di conflitti semantici, utilizzare <strong>positional notation</strong>, se sono nella stessa posizione vengono messi assieme (il nome dell&rsquo;attributo Ã¨ sempre della prima tavola)
!<a href="/notes/structured-query-language-1697021145298.jpeg-"> 500</a></li>
</ul>
<p><strong>DIFFERENZA</strong>
Si usa <strong>except</strong>, e poi altre notazioni sono simil ial precedente.</p>
<p><strong>INTERSEZIONE</strong>
Si usa <strong>intersect</strong> come istruzione. (ma Ã¨ meglio usare il where, descritto in <a href="/notes#select">#Select</a>, che Ã¨ equivalente).</p>
<p><strong>Intersection</strong></p>
<h2 id="nested-queries">Nested Queries<a hidden class="anchor" aria-hidden="true" href="#nested-queries">#</a></h2>
<p>NOTA: <strong>ogni subquery</strong> viene eseguita ogni volta per</p>
<h3 id="correctness-conditions">Correctness conditions<a hidden class="anchor" aria-hidden="true" href="#correctness-conditions">#</a></h3>
<p>Le queries innestate vengono eseguite per ogni tupla esterna, e sono corrette se <em>quanto viene ritornato Ã¨ coerente con l&rsquo;input del secondo</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">SELECT</span><span class="w"> </span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">Income</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">FROM</span><span class="w"> </span><span class="n">People</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">WHERE</span><span class="w"> </span><span class="n">Name</span><span class="w"> </span><span class="k">IN</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="k">SELECT</span><span class="w"> </span><span class="n">Father</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">Fatherhood</span><span class="p">,</span><span class="w"> </span><span class="n">People</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">Child</span><span class="o">=</span><span class="n">Name</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">Income</span><span class="o">&gt;</span><span class="mi">20</span><span class="p">)</span><span class="w"> 
</span></span></span></code></pre></div><p>In questo caso IN si aspetta poi un insieme, che Ã¨ quanto ritornato nella subquery, il vantaggio principale di questo approccio Ã¨ la <strong>leggibilitÃ </strong>,</p>
<h4 id="visibilitÃ ">VisibilitÃ <a hidden class="anchor" aria-hidden="true" href="#visibilitÃ ">#</a></h4>
<p>Ci sono due note riguardo la visibilitÃ , perchÃ© seguendo una logica simile agli <a href="/notes/nomi-e-scope">scopes strutturali</a> se sono in scope esterno non posso accedere a quello internamente definito.
Mentre la query innestata puÃ² leggere variabili definite esternamente.
Chiaramente se hai due nested diverse, non riescono ad avere stesso variabile, segui le stesse regole di scoping definito in linguaggi di programmazione.</p>
<h3 id="existance">Existance<a hidden class="anchor" aria-hidden="true" href="#existance">#</a></h3>
<h4 id="exists">Exists<a hidden class="anchor" aria-hidden="true" href="#exists">#</a></h4>
<img src="/images/notes/Structured Query Language-1697022271202.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697022271202">
Molto intuitivo, se sai un po' di <a href="/notes/logica-del-primo-ordine">Logica del Primo ordine</a>.
#### Any and ALL 
Sono altri predicati possibili per cose innestate
<h2 id="aggregate-functions">Aggregate functions<a hidden class="anchor" aria-hidden="true" href="#aggregate-functions">#</a></h2>
<p>Gli aggregate consentono di ritornare un valore unico da una lista di dati.
Hanno una semantica precisa:
Prima fatto tutto, ignorando dell&rsquo;esistenza del groupby, fanno una selezione di tutti gli attributi che sono presenti qui, e poi effettivamente raggruppano.
Sul libro atzeni Ã¨ descritto in pagina 123.
L&rsquo;aspetto principale da ricordare Ã¨ che <strong>attributi in group by sono superset degli attributi di selezione</strong>.</p>
<h3 id="classical-sintax">Classical sintax<a hidden class="anchor" aria-hidden="true" href="#classical-sintax">#</a></h3>
<p>La sintassi classica per questo genere di query Ã¨</p>
<pre tabindex="0"><code class="language-pseudocode" data-lang="pseudocode">Aggr([DISTINCT] attribute)
</code></pre><p>Attribute Ã¨ il dominio su cui andare a runnare la funzione di aggregazione.</p>
<h3 id="some-aggregate-functions">Some aggregate functions<a hidden class="anchor" aria-hidden="true" href="#some-aggregate-functions">#</a></h3>
<h4 id="count">Count<a hidden class="anchor" aria-hidden="true" href="#count">#</a></h4>
<p>Ritorna semplicemente il numero di elementi dentro la lista
<img src="/images/notes/Structured Query Language-1697022515496.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697022515496"></p>
<ul>
<li>Caso interessante da ricordare Ã¨ <strong>count NULL values</strong></li>
</ul>
<h4 id="avg-max-min">AVG, MAX, MIN<a hidden class="anchor" aria-hidden="true" href="#avg-max-min">#</a></h4>
<p>Sintassi Ã¨ uguale al precedente, poi la semantica Ã¨ un po&rsquo; diversa, ma credo sia chiara dal nome delal fuznione aggregate</p>
<h3 id="grouping">Grouping<a hidden class="anchor" aria-hidden="true" href="#grouping">#</a></h3>
<p>La sintassi classica Ã¨
<code>GROUP BY attributeList</code>.</p>
<h4 id="semantica">Semantica<a hidden class="anchor" aria-hidden="true" href="#semantica">#</a></h4>
<ul>
<li>Prima esegue la query normale, come se grouping non esistesse.</li>
<li>Poi esegue il grouping, e se c&rsquo;Ã¨ un aggregate function, eseguirlo sul singolo gruppo.
Questa cosa Ã¨ molto importante da conoscere perchÃ© altrimenti sbagli al query e questo mi era successo in passato, ci ho speso molto tempo.
Giustifica anche il motivo per cui devi fare select dell&rsquo;attributo di cui vuoi fare grouping, altrimenti non hai niente da grouppare diciamo!</li>
</ul>
<p>NOTA: aggregate Ã¨ eseguito sul <strong>singolo</strong> gruppo!</p>
<h4 id="other-conditions">Other conditions<a hidden class="anchor" aria-hidden="true" href="#other-conditions">#</a></h4>
<p>Si puÃ² usare <strong>HAVING</strong> per aggiungere altre condizioni sui gruppi in modo simile a quanto faceva <strong>WHERE</strong> dentro <a href="/notes#select">#Select</a>.</p>
<h4 id="comportamento-con-i-nulls">Comportamento con i NULLs<a hidden class="anchor" aria-hidden="true" href="#comportamento-con-i-nulls">#</a></h4>
<img src="/images/notes/Structured Query Language-1697023133005.jpeg" style="width: 100%" class="center" alt="Structured Query Language-1697023133005">
<h2 id="altro">Altro<a hidden class="anchor" aria-hidden="true" href="#altro">#</a></h2>
<h3 id="sullesecuzione-di-sql">Sull&rsquo;esecuzione di SQL<a hidden class="anchor" aria-hidden="true" href="#sullesecuzione-di-sql">#</a></h3>
<ul>
<li>Ãˆ il DBMS che si occupa di eseguire la query ed ottimizzarla.</li>
<li>Avere query corrette e leggibili Ã¨ piÃ¹ importante.</li>
<li>Questo descrive anche il perchÃ© sarebbe a volte sensato farle innestate.</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://flecart.github.io/tags/basi-di-dati/">ðŸ“™Basi-Di-Dati</a></li>
      <li><a href="https://flecart.github.io/tags/big-data/">ðŸ““Big-Data</a></li>
    </ul>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on x"
            href="https://x.com/intent/tweet/?text=Structured%20Query%20Language&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f&amp;hashtags=%f0%9f%93%99basi-di-dati%2c%f0%9f%93%93big-data">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f&amp;title=Structured%20Query%20Language&amp;summary=Structured%20Query%20Language&amp;source=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f&title=Structured%20Query%20Language">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on whatsapp"
            href="https://api.whatsapp.com/send?text=Structured%20Query%20Language%20-%20https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on telegram"
            href="https://telegram.me/share/url?text=Structured%20Query%20Language&amp;url=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Structured Query Language on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Structured%20Query%20Language&u=https%3a%2f%2fflecart.github.io%2fnotes%2fstructured-query-language%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://flecart.github.io/">X. Angelo Huang&#39;s Blog</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
